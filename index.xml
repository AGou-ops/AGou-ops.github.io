<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>AGou's blog</title><link>https://agou-ops.top/</link><description>Recent content on AGou's blog</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Tue, 16 Apr 2019 14:01:47 +0800</lastBuildDate><atom:link href="https://agou-ops.top/index.xml" rel="self" type="application/rss+xml"/><item><title>å…³äº</title><link>https://agou-ops.top/aboutme/</link><pubDate>Tue, 16 Apr 2019 14:01:47 +0800</pubDate><guid>https://agou-ops.top/aboutme/</guid><description>&lt;p>&lt;strong>å²‚èƒ½å°½å¦‚äººæ„ï¼Œä½†æ±‚æ— æ„§äºå¿ƒ.&lt;/strong>&lt;/p>
&lt;hr>
&lt;ul>
&lt;li>æœ¬ç«™åœ°å€ï¼š&lt;a href="https://agou-ops.top">https://agou-ops.top&lt;/a>&lt;/li>
&lt;li>å¤‡ç”¨åœ°å€ï¼š&lt;a href="http://x.agou-ops.top">http://x.agou-ops.top&lt;/a>&lt;/li>
&lt;li>my Docsï¼š&lt;a href="https://agou-ops.top/beforeWork">https://agou-ops.top/beforeWork&lt;/a>&lt;/li>
&lt;li>Docs å¤‡ç”¨ç«™ç‚¹ï¼š&lt;a href="https://d.agou-ops.top">https://d.agou-ops.top&lt;/a>&lt;/li>
&lt;li>myStudyNote:&lt;a href="https://agou-ops.top/myStudyNote">https://agou-ops.top/myStudyNote&lt;/a>&lt;/li>
&lt;li>å‘å¸ƒç«™ç‚¹ï¼š&lt;a href="http://fabu.agou-ops.top/">http://fabu.agou-ops.top/&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>ã€æ—¥è®°ã€‘é—²é±¼åƒåœ¾ä½¬çš„ä¸€å¤©</title><link>https://agou-ops.top/post/%E6%97%A5%E8%AE%B0%E9%97%B2%E9%B1%BC%E5%9E%83%E5%9C%BE%E4%BD%AC%E7%9A%84%E4%B8%80%E5%A4%A9/</link><pubDate>Mon, 14 Sep 2020 20:36:21 +0800</pubDate><guid>https://agou-ops.top/post/%E6%97%A5%E8%AE%B0%E9%97%B2%E9%B1%BC%E5%9E%83%E5%9C%BE%E4%BD%AC%E7%9A%84%E4%B8%80%E5%A4%A9/</guid><description>&lt;h2 id="è´­ç½®èƒŒæ™¯">è´­ç½®èƒŒæ™¯&lt;/h2>
&lt;p>ã€€ã€€é•¿è¾¾ä¸¤ä¸ªå¤šæœˆçš„èæ³½å®ä¹ ç»“æŸäº†ï¼Œæ„Ÿè§‰å¦‚é‡Šé‡è´Ÿï¼Œç»ˆäºæ‘†è„±äº†å®ä¹ å¸¦æ¥çš„å›°æ‰°å’Œé™åˆ¶ï¼Œå¿ƒæƒ…ä¹Ÿä¸ç”±åœ°å˜å¥½äº†èµ·æ¥ã€‚åœ¨è¿”æ ¡çš„ç«è½¦ä¸Šï¼Œé—²ç€æ²¡äº‹åˆ·äº†åˆ·é—²é±¼ï¼Œçœ‹äº†çœ‹è‡ªå·±è¿™æ®µæ—¶é—´ä»¥æ¥å–å‡ºçš„è™šæ‹Ÿå•†å“ï¼ˆä»£æ­å»ºåšå®¢/ä»£ä¸‹è½½GitHubèµ„æºç­‰ï¼‰ï¼Œå¤§æ¦‚èµšäº†&lt;code>1k&lt;/code>å—é’±å·¦å³å§ï¼Œå‘ƒ&amp;hellip;è¿˜æ˜¯è›®ä¸é”™çš„ã€‚&lt;/p>
&lt;p>&lt;img src="http://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/xianyu_1/Screenshot%20from%202020-09-14%2021-04-11.png" alt="">&lt;/p>
&lt;p>ã€€ã€€ç„¶åä¸ç»æ„ä¹‹é—´å°±çœ‹åˆ°æˆ‘ä¸Šä¸Šå­¦æœŸä¹°åˆ°çš„&lt;code>èœ—ç‰›æ˜Ÿé™…Bæ¬¾åŒåƒ&lt;/code>ï¼ˆçŸ¿éš¾æ— æƒ…äººæœ‰æƒ…ï¼‰ï¼Œæƒ³èµ·æ¥æœºå­è¿˜åœ¨å®¿èˆæ¡Œå­ä¸Šï¼Œå¤§åŠå¹´æ²¡åŠ¨è¿‡äº†ï¼Œä¼°è®¡å·²ç»åƒç°äº†ã€‚æ­£å½“æˆ‘çŠ¹è±«æ˜¯æŒ‚é—²é±¼è½¬æ‰‹å†å–å‡ºå»æ—¶ï¼ˆèƒ½å°èµšä¸€ç¬”ï¼‰ï¼Œæˆ‘çœ‹åˆ°äº†äºŒæ‰‹çš„ç¬”è®°æœ¬æ‹†æœºå±å¹•ï¼ŒèŒå‘èµ·é‡æŒ¯èœ—ç‰›æ˜Ÿé™…çš„æƒ³æ³•ï¼Œåˆæƒ³äº†æƒ³å®ä¹ ä¹Ÿèµšäº†ç‚¹å°é’±ï¼Œ&lt;strong>æï¼&lt;/strong>ã€‚è¯¢é—®äº†ä¸€åœˆä¹‹åï¼Œæœ€ç»ˆä¹°ä¸‹äº†è¿™æ¬¾å‹å·ä¸º&lt;code>å‹è¾¾(AUO)-B101EW05 V1(AUO51D4)&lt;/code>çš„æ‹†æœºå±ï¼Œå¤§å°æ˜¯&lt;code>10.1å¯¸&lt;/code>ï¼Œæœ€é«˜åˆ†è¾¨ç‡ä¸º&lt;code>1280*800&lt;/code>ï¼Œå‚æ•°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/xianyu_1/2ce6e2ceee2668b8034a05108ebfc531.jpg" alt="å‚æ•°å›¾">&lt;/p>
&lt;blockquote>
&lt;h4 id="æœ‰äººä¼šé—®ä¸ºå•¥éè¦ä¹°ä¸€ä¸ªäºŒæ‰‹æ‹†æœºå±å‘¢å…¶å®æ ¹æœ¬æ²¡äººé—®è¿™ä¸€åˆ‡éƒ½æ˜¯åšä¸»è‡ªå·±å¹»æƒ³å‡ºæ¥çš„">æœ‰äººä¼šé—®ä¸ºå•¥éè¦ä¹°ä¸€ä¸ªäºŒæ‰‹æ‹†æœºå±å‘¢ï¼Ÿï¼ˆ&lt;del>å…¶å®æ ¹æœ¬æ²¡äººé—®ï¼Œè¿™ä¸€åˆ‡éƒ½æ˜¯åšä¸»è‡ªå·±å¹»æƒ³å‡ºæ¥çš„&lt;/del>ï¼‰&lt;/h4>
&lt;p>&lt;strong>ç†ç”±å¦‚ä¸‹ï¼š&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>æ‰‹ä¸Šæ²¡æœ‰ç°æˆçš„æ˜¾ç¤ºå±ï¼Œä¹‹å‰å…¨æ˜¯å€Ÿéš”å£å®¿èˆçš„æ˜¾ç¤ºå±æ¥ç”¨çš„;&lt;/li>
&lt;li>ç¬”è®°æœ¬æ˜¾ç¤ºå±é©±åŠ¨éƒ¨ä»¶åµŒåœ¨ä¸»æ¿ä¸Šï¼Œæ— æ³•ç›´æ¥ä½¿ç”¨;&lt;/li>
&lt;li>å¯ä»¥ä½œä¸ºç¬”è®°æœ¬æ‹“å±•å±ï¼Œä¸€ç®­åŒé›•;&lt;/li>
&lt;li>æœ€åä¸€ç‚¹ä¹Ÿæ˜¯æœ€æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œ&lt;strong>ç©·ç©·ç©·&lt;/strong>ï¼Œæ²¡é’±ä¹°æ‹“å±•å±ï¼Œåªèƒ½è‡ªå·±ä¹°ç ´çƒ‚å‡‘ä¸€ä¸ªã€‚&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="å…¶ä»–ç¡¬ä»¶è®¾å¤‡è´­ç½®">å…¶ä»–ç¡¬ä»¶è®¾å¤‡è´­ç½®&lt;/h2>
&lt;h3 id="é©±åŠ¨æ¿">é©±åŠ¨æ¿&lt;/h3>
&lt;p>ã€€ã€€å…‰æœ‰æ˜¾ç¤ºå±è¿˜ä¸è¡Œï¼Œè¿˜éœ€è¦é©±åŠ¨æ¿æ‰èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œä¸å¾—ä¸è¯´é—²é±¼å’Œæ·˜å®æ˜¯ä¸‡èƒ½çš„ï¼Œä»€ä¹ˆä¸œè¥¿éƒ½èƒ½å¤Ÿä¹°åˆ°ï¼Œåœ¨è‹¦è‹¦å¯»æ‰¾å’Œå¯¹æ¯”äº†ä¸€ç•ªä¹‹åï¼Œæœ€ç»ˆæ‰¾åˆ°äº†ä¸€ä¸ªæ·˜å®å–å®¶ï¼ˆåº—é“ºé“¾æ¥ï¼šhttpsï¼š//m.tb.cn/h.VBYebL1?sm=6c9ebe ï¼‰ï¼Œé”€é‡å’Œå£ç¢‘éƒ½è¿˜ä¸é”™ï¼ŒæŠŠæ˜¾ç¤ºå±å‹å·å‘ç»™å–å®¶åï¼Œå–å®¶åˆ¶ä½œå®Œå½“å¤©æ™šä¸Šå°±å‘è´§äº†ï¼ŒçœŸæ˜¯è¿…é€Ÿå•Šï¼Œç‚¹ä¸ªèµğŸ‘ã€‚&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/xianyu_1/Screenshot%20from%202020-09-14%2021-07-31.png" alt="">&lt;/p>
&lt;h3 id="msata">mSATA&lt;/h3>
&lt;p>ã€€ã€€èœ—ç‰›æ˜Ÿé™…åŸè£…è‡ªå¸¦çš„&lt;code>mSATA&lt;/code>æ˜¯&lt;code>16g&lt;/code>çš„ï¼Œåªå¤Ÿè£…ä¸ª&lt;code>pve&lt;/code>ã€&lt;code>VMware ESXi&lt;/code>ã€&lt;code>iKuai&lt;/code>ã€&lt;code>openwrt&lt;/code>ã€&lt;code>ç¾¤æ™–&lt;/code>å•¥çš„ï¼Œæ ¹æœ¬ä¸å¤Ÿç”¨çš„ï¼Œç„¶åå˜ï¼Œè‡ªå·±åˆæƒ³å®‰è£…ä¸ª&lt;code>Windows Server 2008 R2&lt;/code>æŒ‚ä¸€äº›è½¯ä»¶ï¼Œæ‰€ä»¥å°±ä¸‹ç‹ å¿ƒæ¥åˆä¹°äº†ä¸€æ¡&lt;code>128g&lt;/code>çš„æ¸£å£«é¡¿&lt;code>mSATA&lt;/code>å›ºæ€ç¡¬ç›˜ï¼Œä¹Ÿæ˜¯é—²é±¼ä¹°çš„ï¼Œå¤§æ¦‚&lt;code>100è½¯å¦¹å¸&lt;/code>ï¼Œ&lt;code>MLC&lt;/code>é¢—ç²’çš„ï¼Œè¿˜æ˜¯è›®å€¼çš„ã€‚&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/xianyu_1/Screenshot%20from%202020-09-14%2021-07-03.png" alt="">&lt;/p>
&lt;p>&lt;code>CrystalDiskMark&lt;/code>è·‘åˆ†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/xianyu_1/%E9%87%91%E5%A3%AB%E9%A1%BFmSATA-128g2020-09-13.png" alt="">&lt;/p>
&lt;p>ã€€ã€€è¿™æ ·ä¸€æ¥ï¼Œæ‹†èœ—ç‰›æ˜Ÿé™…å¤šå‡ºæ¥çš„é‚£å—&lt;code>mSATA 16g&lt;/code>å²‚ä¸æ˜¯åƒç°äº†ï¼Ÿ&lt;strong>ä¸ï¼Œåƒåœ¾ä½¬ä¸ä¼šå°±æ­¤æ­¢æ­¥ï¼Œä¸ä¼šã€‚&lt;/strong>&lt;/p>
&lt;p>æ‰€ä»¥å°±æœ‰äº†ä¸‹é¢è¿™ä¸ªè®¾å¤‡ğŸ˜†ã€‚&lt;/p>
&lt;h3 id="usb30-to-msata-box">USB3.0 TO mSATA Box&lt;/h3>
&lt;p>ã€€ã€€è¿™å°ä¸œè¥¿åŠŸèƒ½å¾ˆç®€å•ï¼Œå°±æ˜¯æŠŠ&lt;code>mSATA&lt;/code>æ¥å£è½¬ä¸º&lt;code>USB&lt;/code>æ¥å£ï¼Œä»¥ä¾¿ç›´æ¥æ’åœ¨ç”µè„‘ä¸Šç›´æ¥ä½¿ç”¨ã€‚å®ä½“å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>è¿˜æ˜¯è›®å¥½çœ‹çš„ï¼Œä¸é”™ï¼Œä¸é”™ã€‚&lt;/p>
&lt;h3 id="hdmi-çº¿--äºšå…‹åŠ›å£³">HDMI çº¿ &amp;amp; äºšå…‹åŠ›å£³&lt;/h3>
&lt;p>ã€€ã€€ä¸»è¦è®¾å¤‡ä¹°å®Œä¹‹åï¼Œçªç„¶å‘ç°è¿˜ç¼ºä¸€æ¡&lt;code>HDMI&lt;/code>çº¿ï¼Œå›å®¿èˆæ‰¾äº†æ‰¾æ²¡æ‰¾åˆ°åŸæ¥é‚£æ ¹ï¼Œäºæ˜¯&lt;code>10å—é’±&lt;/code>åœ¨é—²é±¼åˆä¹°äº†æ¡ç»¿è”&lt;code>0.75m&lt;/code>çš„&lt;code>HDMI&lt;/code>çº¿ï¼Œé»„è‰²æ‰çº¿å‹çš„ã€‚&lt;/p>
&lt;p>äºšå…‹åŠ›å£³å­æ˜¯ä¹°é©±åŠ¨æ¿æ—¶åŠ ä»·&lt;code>10å—&lt;/code>ä¹°çš„ï¼Œç”¨æ¥ä¿æŠ¤é©±åŠ¨æ¿å„å…ƒä»¶å’Œå¢åŠ è§‚èµæ€§ç”¨çš„ã€‚&lt;/p>
&lt;h2 id="æˆæœå±•ç¤º-é™„å…¨å®¶ç¦">æˆæœå±•ç¤º-é™„å…¨å®¶ç¦&lt;/h2>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/xianyu_1/IMG_20200914_143028.jpg" alt="">&lt;/p>
&lt;p>æ¡Œé¢å›¾ï¼š&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/xianyu_1/1600085743650.jpg" alt="">&lt;/p>
&lt;h2 id="æœªæ¥ç”¨é€”">æœªæ¥ç”¨é€”&lt;/h2>
&lt;p>ã€€ã€€ä»¥åæœ‰ç©ºçš„è¯ä¼šä¸“é—¨å†™ä¸€ç¯‡æ–‡ç« æ¥ä»‹ç»èœ—ç‰›æ˜Ÿé™…çš„ç”¨é€”ï¼Œæ•¬è¯·æœŸå¾…å§ï¼&lt;/p>
&lt;h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™&lt;/h2>
&lt;ul>
&lt;li>ã€è£…æœºæ—¥å¸¸ã€‘åºŸæ—§ç¬”è®°æœ¬ä¸è¦æ‰”ï¼Œæ‹†ä¸‹å±å¹•ï¼Œè£¹ä¸Šé©±åŠ¨æ¿ï¼Œåšæˆå‰¯å±ï¼Œéš”å£å°å­©éƒ½é¦‹å“­å•¦ï¼ï¼š &lt;a href="https%EF%BC%9A//www.youtube.com/watch?v=V1wC3KKF2TM">httpsï¼š//www.youtube.com/watch?v=V1wC3KKF2TM&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>æ­å»ºå†…ç½‘yumæº</title><link>https://agou-ops.top/post/%E6%90%AD%E5%BB%BA%E5%86%85%E7%BD%91yum%E6%BA%90/</link><pubDate>Tue, 04 Aug 2020 10:23:39 +0800</pubDate><guid>https://agou-ops.top/post/%E6%90%AD%E5%BB%BA%E5%86%85%E7%BD%91yum%E6%BA%90/</guid><description>&lt;blockquote>
&lt;p>æ­å»ºå†…ç½‘yumæºï¼Œæ‘†è„±è½¯ä»¶åŒ…å›°æ‰°ã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="é€‰æ‹©åˆé€‚ç¨³å®šçš„å…¬ç½‘yumä»“åº“">é€‰æ‹©åˆé€‚ç¨³å®šçš„å…¬ç½‘yumä»“åº“&lt;/h2>
&lt;p>å»ºè®®é€‰æ‹©å¯¹è¿è¥å•†ç½‘ç»œå‹å¥½çš„yumä»“åº“&lt;/p>
&lt;p>å›½å†…å¯ä¾›é€‰æ‹©çš„æœ‰:&lt;/p>
&lt;ul>
&lt;li>é˜¿é‡Œäº‘ï¼šhttp://mirrors.aliyun.com/ (è¿™é‡Œæˆ‘ä½¿ç”¨é˜¿é‡Œäº‘)&lt;/li>
&lt;li>ç½‘æ˜“ï¼šhttp://mirrors.163.com/&lt;/li>
&lt;/ul>
&lt;p>æ›´å¤šå›½å†…é•œåƒä»“åº“å‚è€ƒï¼šhttps://blog.csdn.net/wyqwilliam/article/details/90581159&lt;/p>
&lt;h2 id="å®‰è£…nginxå¹¶ä¿®æ”¹é…ç½®æ–‡ä»¶">å®‰è£…nginxå¹¶ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;/h2>
&lt;p>ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨yumä»“åº“è¿›è¡Œå®‰è£….&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@centos-7 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># yum install nginx -y&lt;/span>
&lt;span class="o">[&lt;/span>root@centos-7 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># vi /etc/nginx/conf.d/default.conf&lt;/span>
&lt;span class="c1"># -----åœ¨serveræ®µæ·»åŠ ä»¥ä¸‹å†…å®¹&lt;/span>
&lt;span class="c1"># è‡ªåŠ¨åœ¨index.htmlçš„ç´¢å¼•æ‰“å¼€&lt;/span>
autoindex on&lt;span class="p">;&lt;/span>
&lt;span class="c1"># å¦‚æœæœ‰æ–‡ä»¶åˆ™æ˜¾ç¤ºæ–‡ä»¶å¤§å°&lt;/span>
autoindex_exact_size on&lt;span class="p">;&lt;/span>
&lt;span class="c1"># æ˜¾ç¤ºæ›´æ”¹æ—¶é—´ï¼Œä»¥å½“å‰ç³»ç»Ÿæ—¶é—´ä¸ºå‡†&lt;/span>
autoindex_localtime on
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…·ä½“ä½ç½®åœ¨ä¸‹é¢è¿™ä¸ªä½ç½®
&lt;img src="https://s1.ax1x.com/2020/03/18/8wx7Ax.png" alt="å†…ç½‘yumæºæ­å»º-1">
å¯åŠ¨nginxï¼Œä½¿ç”¨&lt;code>service nignx start &lt;/code>å³å¯&lt;/p>
&lt;h2 id="åˆ›å»ºè‡ªå®šä¹‰indexhtmlæ–‡ä»¶">åˆ›å»ºè‡ªå®šä¹‰index.htmlæ–‡ä»¶&lt;/h2>
&lt;p>ä¿®æ”¹é»˜è®¤&lt;code>index.html&lt;/code>ä¸ºä»¥ä¸‹å†…å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span> &lt;span class="na">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;font-weight:bolder;color:green;font-size:30px;&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>ALL of the packages in the below:&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">/&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;http://192.168.1.128/CentOS-YUM/Aliyun&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Aliyun&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">/&amp;gt;&lt;/span>
These packagers from of CentOS ISO.&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">/&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;http://192.168.1.128/CentOS7-aliyun&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>CentOS&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">/&amp;gt;&lt;/span>
These packagers from of &amp;#34;Internet service provider&amp;#34;.&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">/&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span> &lt;span class="na">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;font-weight:bolder;color:red;font-size:18px;&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Please replace the file and fill in the following content:&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span> &lt;span class="na">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;font-weight:bolder;color:blue;font-size:15px;&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Way: /etc/yum.repos.d/CentOS-Base.repo&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ç«™ç‚¹ç›®å½•ä¸­åˆ›å»º&lt;code>CentOS-YUM/Aliyun&lt;/code>ï¼ˆæœ¬åœ°ISOæ–‡ä»¶ä»“åº“ï¼‰å’Œ&lt;code>CentOS7-aliyun&lt;/code>ç›®å½•&lt;/p>
&lt;h2 id="æ·»åŠ å¹¶åŒæ­¥é˜¿é‡Œäº‘yumæº">æ·»åŠ å¹¶åŒæ­¥é˜¿é‡Œäº‘yumæº&lt;/h2>
&lt;p>æ·»åŠ é˜¿é‡Œäº‘CentOS7 yumæº&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># æ³¨æ„å¤‡ä»½åŸä»“åº“æº&lt;/span>
curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åŒæ­¥é˜¿é‡Œäº‘CentOS7 yumæºåˆ°ä¹‹å‰åˆ›å»ºå¥½çš„ç›®å½•å½“ä¸­ï¼Œä½¿ç”¨å‘½ä»¤&lt;code>reposync -p /usr/share/nginx/html/CentOS7-aliyun&lt;/code>
æ¥ç€ï¼Œä½¿ç”¨&lt;code>createrepo -p /usr/share/nginx/html/CentOS7-aliyun&lt;/code>æ¥åˆ›å»ºrepodataæ–‡ä»¶&lt;/p>
&lt;h2 id="å®¢æˆ·ç«¯é…ç½®">å®¢æˆ·ç«¯é…ç½®&lt;/h2>
&lt;p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¸ºå®¢æˆ·ç«¯æ·»åŠ å†…ç½‘ä»“åº“åœ°å€&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">yum-config-manager --add-repo&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;http://192.168.1.128/CentOS7-aliyun/base/Packages&amp;#34;&lt;/span>
yum makecache &lt;span class="c1"># æ›´æ–°ç¼“å­˜&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="åœ¨yumä»“åº“æœåŠ¡å™¨ç«¯åˆ›å»ºå®šæ—¶ä»»åŠ¡">åœ¨yumä»“åº“æœåŠ¡å™¨ç«¯åˆ›å»ºå®šæ—¶ä»»åŠ¡&lt;/h2>
&lt;p>æ–°å»ºshellæ›´æ–°è„šæœ¬&lt;code>update-aliyun.sh&lt;/code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;span class="cp">&lt;/span>/usr/bin/reposync -np /usr/share/nginx/html/CentOS7-aliyun
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨&lt;code>chmod +x update-aliyun.sh&lt;/code>ä¸ºå…¶æ·»åŠ æ‰§è¡Œæƒé™
æ·»åŠ å®šæ—¶ä»»åŠ¡(æ¯5minæ‰§è¡Œä¸€æ¬¡)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="m">5&lt;/span> * * * * root run-parts /root/update-aliyun.sh
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>å…¶ä¸­&lt;/strong>&lt;code>run-parts&lt;/code>çš„æ„æ€æ˜¯æ‰§è¡Œåé¢ç›®å½•ä¸­çš„è„šæœ¬ã€‚&lt;/p></description></item><item><title>Git Hookä»‹ç»ä¸ä½¿ç”¨</title><link>https://agou-ops.top/post/git-hook%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/</link><pubDate>Tue, 04 Aug 2020 10:23:38 +0800</pubDate><guid>https://agou-ops.top/post/git-hook%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/</guid><description>&lt;p>Git é’©å­å’Œå…¶å®ƒç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸€æ ·ï¼ŒGit èƒ½åœ¨ç‰¹å®šçš„é‡è¦åŠ¨ä½œå‘ç”Ÿæ—¶è§¦å‘è‡ªå®šä¹‰è„šæœ¬ã€‚&lt;/p>
&lt;p>æœ‰ä¸¤ç»„è¿™æ ·çš„é’©å­ï¼šå®¢æˆ·ç«¯çš„å’ŒæœåŠ¡å™¨ç«¯çš„ã€‚ å®¢æˆ·ç«¯é’©å­ç”±è¯¸å¦‚æäº¤å’Œåˆå¹¶è¿™æ ·çš„æ“ä½œæ‰€è°ƒç”¨ï¼Œè€ŒæœåŠ¡å™¨ç«¯é’©å­ä½œç”¨äºè¯¸å¦‚æ¥æ”¶è¢«æ¨é€çš„æäº¤è¿™æ ·çš„è”ç½‘æ“ä½œã€‚ ä½ å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°è¿ç”¨è¿™äº›é’©å­ã€‚&lt;/p>
&lt;h2 id="å®‰è£…é’©å­">å®‰è£…é’©å­&lt;/h2>
&lt;p>é’©å­éƒ½è¢«å­˜å‚¨åœ¨ Git ç›®å½•ä¸‹çš„ hooks å­ç›®å½•ä¸­ã€‚ ä¹Ÿå³ç»å¤§éƒ¨åˆ†é¡¹ç›®ä¸­çš„ &lt;code>.git/hooks&lt;/code> ã€‚ å½“ä½ ç”¨ &lt;code>git init&lt;/code> åˆå§‹åŒ–ä¸€ä¸ªæ–°ç‰ˆæœ¬åº“æ—¶ï¼ŒGit é»˜è®¤ä¼šåœ¨è¿™ä¸ªç›®å½•ä¸­æ”¾ç½®ä¸€äº›ç¤ºä¾‹è„šæœ¬ã€‚ è¿™äº›è„šæœ¬é™¤äº†æœ¬èº«å¯ä»¥è¢«è°ƒç”¨å¤–ï¼Œå®ƒä»¬è¿˜é€éœ²äº†è¢«è§¦å‘æ—¶æ‰€ä¼ å…¥çš„å‚æ•°ã€‚ æ‰€æœ‰çš„ç¤ºä¾‹éƒ½æ˜¯ shell è„šæœ¬ï¼Œå…¶ä¸­ä¸€äº›è¿˜æ··æ‚äº† Perl ä»£ç ï¼Œä¸è¿‡ï¼Œä»»ä½•æ­£ç¡®å‘½åçš„å¯æ‰§è¡Œè„šæœ¬éƒ½å¯ä»¥æ­£å¸¸ä½¿ç”¨ â€”â€” ä½ å¯ä»¥ç”¨ Ruby æˆ– Pythonï¼Œæˆ–ä»»ä½•ä½ ç†Ÿæ‚‰çš„è¯­è¨€ç¼–å†™å®ƒä»¬ã€‚ è¿™äº›ç¤ºä¾‹çš„åå­—éƒ½æ˜¯ä»¥ &lt;code>.sample&lt;/code> ç»“å°¾ï¼Œå¦‚æœä½ æƒ³å¯ç”¨å®ƒä»¬ï¼Œå¾—å…ˆç§»é™¤è¿™ä¸ªåç¼€ã€‚
æŠŠä¸€ä¸ªæ­£ç¡®å‘½åï¼ˆä¸å¸¦æ‰©å±•åï¼‰ä¸”å¯æ‰§è¡Œçš„æ–‡ä»¶æ”¾å…¥ &lt;code>.git&lt;/code> ç›®å½•ä¸‹çš„ hooks å­ç›®å½•ä¸­ï¼Œå³å¯æ¿€æ´»è¯¥é’©å­è„šæœ¬ã€‚ è¿™æ ·ä¸€æ¥ï¼Œå®ƒå°±èƒ½è¢« Git è°ƒç”¨ã€‚&lt;/p>
&lt;p>åˆ›å»ºä¸€ä¸ªç©ºçš„ä»“åº“ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">git --bare init &lt;span class="c1"># æ¨èä½¿ç”¨&lt;/span>
&lt;span class="c1"># git init&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä¸­&lt;code>--bare&lt;/code>å‚æ•°è¡¨ç¤ºåˆ›å»ºä¸€ä¸ªè£¸ä»“åº“ï¼Œè£¸ä»“åº“ä½•æ„ï¼Ÿä¸æ™®é€šç©ºä»“åº“æœ‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå‚è€ƒï¼šhttps://www.cnblogs.com/irockcode/p/8761954.html
&lt;strong>ä½†æ˜¯éœ€è¦æ³¨æ„çš„ä¸€ç‚¹çš„æ˜¯&lt;/strong>gitä»“åº“å’Œgitè£¸ä»“åº“çš„é’©å­æ‰€åœ¨ä½ç½®ä¸åŒ:&lt;/p>
&lt;ul>
&lt;li>gitæ™®é€šä»“åº“é’©å­åœ¨.git/hooks/ä¸­&lt;/li>
&lt;li>gitè£¸ä»“åº“é’©å­åœ¨hooks/ä¸­&lt;/li>
&lt;/ul>
&lt;p>è£¸ä»“åº“åˆå§‹åŒ–å®Œæˆåï¼Œåœ¨&lt;code>hooks&lt;/code>æ–‡ä»¶å¤¹ä¸­ä¼šå‘ç°ä¸€äº›ä»¥&lt;code>.sample&lt;/code>ç»“å°¾çš„å®ä¾‹æ–‡ä»¶ï¼š
&lt;img src="https://s1.ax1x.com/2020/03/17/8aldFU.png" alt="githook1">&lt;/p>
&lt;h2 id="å®¢æˆ·ç«¯é’©å­ç®€å•ç¤ºä¾‹">å®¢æˆ·ç«¯é’©å­ç®€å•ç¤ºä¾‹&lt;/h2>
&lt;p>ä½¿ç”¨&lt;code>commit-msg&lt;/code>é’©å­å®ç°commitä¿¡æ¯å­—ç¬¦æ•°é™åˆ¶ï¼ˆå®é™…å¯èƒ½æ²¡ä»€ä¹ˆåµç”¨,ä»…ä½œä¸ºå­¦ä¹ å‚è€ƒï¼‰&lt;/p>
&lt;ol>
&lt;li>ç¼–è¾‘&lt;code>.git/hooks/commit-msg&lt;/code>æ–‡ä»¶å¦‚ä¸‹ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">âœ git-hook-test git:&lt;span class="o">(&lt;/span>master&lt;span class="o">)&lt;/span> âœ— cat .git/hooks/commit-msg 20:55:37
&lt;span class="c1">#!/bin/sh&lt;/span>
&lt;span class="nv">MSG&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>awk &lt;span class="s1">&amp;#39;{printf(&amp;#34;%s&amp;#34;,$0)}&amp;#39;&lt;/span> &lt;span class="nv">$1&lt;/span>&lt;span class="sb">`&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="si">${#&lt;/span>&lt;span class="nv">MSG&lt;/span>&lt;span class="si">}&lt;/span> -lt &lt;span class="m">5&lt;/span> &lt;span class="o">]&lt;/span>
&lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------------------------------------------------------&amp;#34;&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;commit message åªæœ‰&lt;/span>&lt;span class="si">${#&lt;/span>&lt;span class="nv">MSG&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">å­—ç¬¦ï¼Œä¸ç¬¦åˆè¦æ±‚&amp;#34;&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;messageçš„é•¿åº¦ä¸èƒ½å°äº5, æœ¬æ¬¡æäº¤å¤±è´¥ï¼Œè¯·å®Œå–„commit messageï¼Œå†æäº¤&amp;#34;&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------------------------------------------------------&amp;#34;&lt;/span>
&lt;span class="nb">exit&lt;/span> &lt;span class="m">1&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>ä¸º&lt;code>commit-msg&lt;/code>æ–‡ä»¶æ·»åŠ æ‰§è¡Œæƒé™ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">chmod u+x .git/hooks/commit-msg
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>ç”Ÿæˆä¸€æ¬¡æäº¤ä¿¡æ¯ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">âœ git-hook-test git:&lt;span class="o">(&lt;/span>master&lt;span class="o">)&lt;/span> âœ— git add . 21:00:48
âœ git-hook-test git:&lt;span class="o">(&lt;/span>master&lt;span class="o">)&lt;/span> âœ— git commit -m &lt;span class="s2">&amp;#34;test&amp;#34;&lt;/span>
-------------------------------------------------------------------
commit message åªæœ‰4å­—ç¬¦
messageçš„é•¿åº¦ä¸èƒ½å°äº5, æœ¬æ¬¡æäº¤å¤±è´¥ï¼Œè¯·å®Œå–„commit messageï¼Œå†æäº¤
-------------------------------------------------------------------
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸æ»¡è¶³æœ€ä½5å­—ç¬¦è¦æ±‚ï¼Œæäº¤å¤±è´¥ã€‚&lt;/p>
&lt;h2 id="æœåŠ¡ç«¯é’©å­ç®€å•ç¤ºä¾‹">æœåŠ¡ç«¯é’©å­ç®€å•ç¤ºä¾‹&lt;/h2>
&lt;p>ä½¿ç”¨&lt;code>post-receive&lt;/code>å°†ä»£ç è‡ªåŠ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨&lt;/p>
&lt;p>æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼šåœ¨æœåŠ¡å™¨ç«¯åˆ›å»ºä¸€ä¸ª Git ä»“åº“(repository)ï¼Œç„¶åå°†æœ¬åœ°çš„æ–‡ä»¶ä½¿ç”¨&lt;code>git push&lt;/code>ä¸Šä¼ åˆ°è¿™ä¸ªä»“åº“åï¼Œå°†ä¸Šä¼ åˆ°Git ä»“åº“çš„æ–‡ä»¶ï¼Œè‡ªåŠ¨å¤åˆ¶åˆ°æœåŠ¡å™¨é‡Œç½‘ç«™ç›®å½•æ–‡ä»¶å¤¹ä¸‹ã€‚&lt;/p>
&lt;ol>
&lt;li>åœ¨æœåŠ¡å™¨ç«¯åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„Gitä»“åº“&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">git init --bare myblog.git
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>åœ¨&lt;code>hooks&lt;/code>ç›®å½•ä¸­åˆ›å»º&lt;code>post-receive&lt;/code>æ–‡ä»¶ï¼Œå¹¶ç»™äºˆæ‰§è¡Œæƒé™&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">cd&lt;/span> hooks/
touch post-receive&lt;span class="p">;&lt;/span>chmod u+x post-receive
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>ç¼–è¾‘&lt;code>post-receive&lt;/code>æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@localhost hooks&lt;span class="o">]&lt;/span>&lt;span class="c1"># cat post-receive&lt;/span>
&lt;span class="c1">#!/bin/bash -l&lt;/span>
&lt;span class="nv">GIT_REPO&lt;/span>&lt;span class="o">=&lt;/span>/root/myblog.git
&lt;span class="nv">TMP_GIT_CLONE&lt;/span>&lt;span class="o">=&lt;/span>/tmp/myblog
&lt;span class="nv">PUBLIC_WWW&lt;/span>&lt;span class="o">=&lt;/span>/var/www/html
rm -rf &lt;span class="si">${&lt;/span>&lt;span class="nv">TMP_GIT_CLONE&lt;/span>&lt;span class="si">}&lt;/span>
git clone &lt;span class="nv">$GIT_REPO&lt;/span> &lt;span class="nv">$TMP_GIT_CLONE&lt;/span>
&lt;span class="nb">cd&lt;/span> &lt;span class="nv">$TMP_GIT_CLONE&lt;/span>
rm -rf &lt;span class="si">${&lt;/span>&lt;span class="nv">PUBLIC_WWW&lt;/span>&lt;span class="si">}&lt;/span>/*
cp -rf &lt;span class="si">${&lt;/span>&lt;span class="nv">TMP_GIT_CLONE&lt;/span>&lt;span class="si">}&lt;/span>/* &lt;span class="si">${&lt;/span>&lt;span class="nv">PUBLIC_WWW&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="4">
&lt;li>æœ¬åœ°æ·»åŠ è¿œç¨‹Gitä»“åº“å¹¶è¿›è¡Œæµ‹è¯•&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">âœ &lt;span class="nb">test&lt;/span> git:&lt;span class="o">(&lt;/span>master&lt;span class="o">)&lt;/span> âœ— git remote add deploy ssh://root@172.16.224.128:/root/myblog.git 21:20:35
âœ &lt;span class="nb">test&lt;/span> git:&lt;span class="o">(&lt;/span>master&lt;span class="o">)&lt;/span> âœ— git add . 21:20:52
âœ &lt;span class="nb">test&lt;/span> git:&lt;span class="o">(&lt;/span>master&lt;span class="o">)&lt;/span> âœ— git commit -m &lt;span class="s2">&amp;#34;auto deploy test&amp;#34;&lt;/span> 21:21:01
&lt;span class="o">[&lt;/span>master &lt;span class="o">(&lt;/span>root-commit&lt;span class="o">)&lt;/span> 26fde86&lt;span class="o">]&lt;/span> auto deploy &lt;span class="nb">test&lt;/span>
&lt;span class="m">2&lt;/span> files changed, &lt;span class="m">1&lt;/span> insertion&lt;span class="o">(&lt;/span>+&lt;span class="o">)&lt;/span>
create mode &lt;span class="m">100644&lt;/span> index.html
create mode &lt;span class="m">100644&lt;/span> testfile
âœ &lt;span class="nb">test&lt;/span> git:&lt;span class="o">(&lt;/span>master&lt;span class="o">)&lt;/span> git push --set-upstream deploy master 21:28:19
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨gitæœåŠ¡å™¨ç«¯æŸ¥çœ‹&lt;code>post-receive&lt;/code>æ˜¯å¦æˆåŠŸè¿è¡Œ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@localhost ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># cd /var/www/html/&lt;/span>
&lt;span class="o">[&lt;/span>root@localhost html&lt;span class="o">]&lt;/span>&lt;span class="c1"># ls&lt;/span>
index.html testfile
&lt;span class="o">[&lt;/span>root@localhost html&lt;span class="o">]&lt;/span>&lt;span class="c1"># cat index.html&lt;/span>
auto deploy
auto deploy
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="5">
&lt;li>å°†ä»£ç æ¨é€æŒ‡å®šåˆ†æ”¯ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="cp">#!/bin/bash -l
&lt;/span>&lt;span class="cp">&lt;/span>&lt;span class="k">while&lt;/span> &lt;span class="nb">read&lt;/span> oldrev newrev ref
&lt;span class="k">do&lt;/span>
&lt;span class="nv">branch&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$ref&lt;/span> &lt;span class="p">|&lt;/span> cut -d/ -f3&lt;span class="sb">`&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;master&amp;#34;&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$branch&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;production&amp;#34;&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$branch&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nv">GIT_REPO&lt;/span>&lt;span class="o">=&lt;/span>/root/myblog.git
&lt;span class="nv">TMP_GIT_CLONE&lt;/span>&lt;span class="o">=&lt;/span>/tmp/myblog
&lt;span class="nv">PUBLIC_WWW&lt;/span>&lt;span class="o">=&lt;/span>/var/www/html
rm -rf &lt;span class="si">${&lt;/span>&lt;span class="nv">TMP_GIT_CLONE&lt;/span>&lt;span class="si">}&lt;/span>
git clone &lt;span class="nv">$GIT_REPO&lt;/span> &lt;span class="nv">$TMP_GIT_CLONE&lt;/span>
&lt;span class="nb">cd&lt;/span> &lt;span class="nv">$TMP_GIT_CLONE&lt;/span>
&lt;span class="nb">unset&lt;/span> GIT_DIR
git checkout &lt;span class="nv">$branch&lt;/span>
rm -rf &lt;span class="si">${&lt;/span>&lt;span class="nv">PUBLIC_WWW&lt;/span>&lt;span class="si">}&lt;/span>/*
cp -rf &lt;span class="si">${&lt;/span>&lt;span class="nv">TMP_GIT_CLONE&lt;/span>&lt;span class="si">}&lt;/span>/* &lt;span class="si">${&lt;/span>&lt;span class="nv">PUBLIC_WWW&lt;/span>&lt;span class="si">}&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ›´å¤šé’©å­å‚è€ƒï¼šhttps://git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E9%92%A9%E5%AD%90&lt;/p>
&lt;h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://www.ituring.com.cn/article/206985">gité’©å­-å›¾çµç¤¾åŒº&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://devslash.net/easy-git-hooks-with-python/">git hooks with python&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.jianshu.com/p/ccd135180783">commit-msgå®ç”¨ç¤ºä¾‹&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Hexoåšå®¢ä½¿ç”¨gulpå‹ç¼©é™æ€èµ„æº 1</title><link>https://agou-ops.top/post/hexo%E5%8D%9A%E5%AE%A2%E4%BD%BF%E7%94%A8gulp%E5%8E%8B%E7%BC%A9%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90-1/</link><pubDate>Tue, 04 Aug 2020 10:23:38 +0800</pubDate><guid>https://agou-ops.top/post/hexo%E5%8D%9A%E5%AE%A2%E4%BD%BF%E7%94%A8gulp%E5%8E%8B%E7%BC%A9%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90-1/</guid><description>&lt;p>gulp å°†å¼€å‘æµç¨‹ä¸­è®©äººç—›è‹¦æˆ–è€—æ—¶çš„ä»»åŠ¡è‡ªåŠ¨åŒ–ï¼Œä»è€Œå‡å°‘ä½ æ‰€æµªè´¹çš„æ—¶é—´ã€åˆ›é€ æ›´å¤§ä»·å€¼ã€‚&lt;/p>
&lt;p>å®˜æ–¹ç«™ç‚¹ï¼šhttps://www.gulpjs.com.cn/&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h3 id="1å…¨å±€å®‰è£…gulp">1ã€å…¨å±€å®‰è£…gulp&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">npm install gulp -g
# æŸ¥çœ‹ç‰ˆæœ¬
gulp -v
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="2å®‰è£…gulpæ’ä»¶">2ã€å®‰è£…gulpæ’ä»¶&lt;/h3>
&lt;p>åœ¨ç«™ç‚¹æ ¹ç›®å½•ä¸‹å®‰è£…&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">npm install gulp --save
npm install gulp-minify-css --save
npm install gulp-uglify --save
npm install gulp-htmlmin --save
npm install gulp-htmlclean --save
npm install gulp-imagemin --save
# è§£å†³ã€Gulpæ‰“åŒ…é—®é¢˜ã€‘ GulpUglifyError: unable to minify JavaScript
# è§£å†³ gulp-uglify å‹ç¼©JavaScript ä¸å…¼å®¹ es5 è¯­æ³•çš„é—®é¢˜
npm install babel-core@6.26.3 --save
npm install gulp-babel@7.0.1 --save
npm install babel-preset-es2015@6.24.1 --save
# gulp-babel å–æ¶ˆä¸¥æ ¼æ¨¡å¼æ–¹æ³•(&amp;#34;use strict&amp;#34;)
npm install babel-plugin-transform-remove-strict-mode --save
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é—®é¢˜ï¼šå¦‚æœå®‰è£…&lt;code>gulp-imagemin&lt;/code>é”™è¯¯è¯·æ‰§è¡Œä»¥ä¸‹è¯­å¥
&lt;code>sudo npm i gulp-imagemin --unsafe-perms&lt;/code>&lt;/p>
&lt;h3 id="3åˆ›å»ºgulpfilejsæ–‡ä»¶">3ã€åˆ›å»º&lt;code>gulpfile.js&lt;/code>æ–‡ä»¶&lt;/h3>
&lt;p>åœ¨ Hexo ç«™ç‚¹ä¸‹æ–°å»º&lt;code>gulpfile.js&lt;/code>æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">var gulp = require(&amp;#39;gulp&amp;#39;);
var minifycss = require(&amp;#39;gulp-minify-css&amp;#39;);
var uglify = require(&amp;#39;gulp-uglify&amp;#39;);
var htmlmin = require(&amp;#39;gulp-htmlmin&amp;#39;);
var htmlclean = require(&amp;#39;gulp-htmlclean&amp;#39;);
var imagemin = require(&amp;#39;gulp-imagemin&amp;#39;);
var babel = require(&amp;#39;gulp-babel&amp;#39;);
// å‹ç¼©cssæ–‡ä»¶
gulp.task(&amp;#39;minify-css&amp;#39;, function (done) {
return gulp.src(&amp;#39;./public/**/*.css&amp;#39;)
.pipe(minifycss())
.pipe(gulp.dest(&amp;#39;./public&amp;#39;));
done();
});
// å‹ç¼©htmlæ–‡ä»¶
gulp.task(&amp;#39;minify-html&amp;#39;, function (done) {
return gulp.src(&amp;#39;./public/**/*.html&amp;#39;)
.pipe(htmlclean())
.pipe(htmlmin({
removeComments: true,
minifyJS: true,
minifyCSS: true,
minifyURLs: true,
}))
.pipe(gulp.dest(&amp;#39;./public&amp;#39;));
done();
});
// å‹ç¼©jsæ–‡ä»¶
gulp.task(&amp;#39;minify-js&amp;#39;, function (done) {
return gulp.src([&amp;#39;./public/**/*.js&amp;#39;, &amp;#39;!./public/**/*.min.js&amp;#39;])
.pipe(babel({
//å°†ES6ä»£ç è½¬è¯‘ä¸ºå¯æ‰§è¡Œçš„JSä»£ç 
presets: [&amp;#39;es2015&amp;#39;] // es5æ£€æŸ¥æœºåˆ¶
}))
.pipe(uglify())
.pipe(gulp.dest(&amp;#39;./public&amp;#39;));
done();
});
// å‹ç¼© public/images ç›®å½•å†…å›¾ç‰‡(Version&amp;lt;3)
// gulp.task(&amp;#39;minify-images&amp;#39;, function () {
// gulp.src(&amp;#39;./public/images/**/*.*&amp;#39;)
// .pipe(imagemin({
// optimizationLevel: 5, //ç±»å‹ï¼šNumber é»˜è®¤ï¼š3 å–å€¼èŒƒå›´ï¼š0-7ï¼ˆä¼˜åŒ–ç­‰çº§ï¼‰
// progressive: true, //ç±»å‹ï¼šBoolean é»˜è®¤ï¼šfalse æ— æŸå‹ç¼©jpgå›¾ç‰‡
// interlaced: false, //ç±»å‹ï¼šBoolean é»˜è®¤ï¼šfalse éš”è¡Œæ‰«ægifè¿›è¡Œæ¸²æŸ“
// multipass: false, //ç±»å‹ï¼šBoolean é»˜è®¤ï¼šfalse å¤šæ¬¡ä¼˜åŒ–svgç›´åˆ°å®Œå…¨ä¼˜åŒ–
// }))
// .pipe(gulp.dest(&amp;#39;./public/images&amp;#39;));
// });
// å‹ç¼© public/images ç›®å½•å†…å›¾ç‰‡(Version&amp;gt;3)
gulp.task(&amp;#39;minify-images&amp;#39;, function (done) {
gulp.src(&amp;#39;./public/images/**/*.*&amp;#39;)
.pipe(imagemin([
imagemin.gifsicle({interlaced: true}),
imagemin.jpegtran({progressive: true}),
imagemin.optipng({optimizationLevel: 5}),
imagemin.svgo({
plugins: [
{removeViewBox: true},
{cleanupIDs: false}
]
})
]))
.pipe(gulp.dest(&amp;#39;./public/images&amp;#39;));
done();
});
//4.0ä»¥å‰çš„å†™æ³•
//gulp.task(&amp;#39;default&amp;#39;, [
// &amp;#39;minify-html&amp;#39;, &amp;#39;minify-css&amp;#39;, &amp;#39;minify-js&amp;#39;, &amp;#39;minify-images&amp;#39;
//]);
//4.0ä»¥åçš„å†™æ³•
// æ‰§è¡Œ gulp å‘½ä»¤æ—¶æ‰§è¡Œçš„ä»»åŠ¡
gulp.task(&amp;#39;default&amp;#39;, gulp.series(gulp.parallel(&amp;#39;minify-html&amp;#39;, &amp;#39;minify-css&amp;#39;, &amp;#39;minify-js&amp;#39;, &amp;#39;minify-images&amp;#39;)), function () {
console.log(&amp;#34;----------gulp Finished----------&amp;#34;);
// Do something after a, b, and c are finished.
});
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="4åˆ›å»ºbabelrcæ–‡ä»¶">4ã€åˆ›å»º&lt;code>.babelrc&lt;/code>æ–‡ä»¶&lt;/h3>
&lt;p>åœ¨ Hexo ç«™ç‚¹ä¸‹æ–°å»º&lt;code>.babelrc&lt;/code>æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">{
&amp;#39;presets&amp;#39;: [&amp;#39;es2015&amp;#39;],
&amp;#34;plugins&amp;#34;: [&amp;#34;transform-remove-strict-mode&amp;#34;]
}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="5å¯ç”¨é™æ€èµ„æºå‹ç¼©">5ã€å¯ç”¨é™æ€èµ„æºå‹ç¼©&lt;/h3>
&lt;p>æ¨èå§¿åŠ¿ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">hexo cl &amp;amp;&amp;amp; hexo g &amp;amp;&amp;amp; gulp &amp;amp;&amp;amp; hexo d
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯åœ¨&lt;code>package.json&lt;/code> ä¸­çš„ &lt;code>&amp;quot;scripts&amp;quot;&lt;/code> é¡¹å¢åŠ ä¸€ä¸ª &lt;code>&amp;quot;publish&amp;quot;&lt;/code> å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">{
//...
&amp;#34;scripts&amp;#34;: {
//...
&amp;#34;publish&amp;#34;: &amp;#34;hexo cl &amp;amp;&amp;amp; hexo g &amp;amp;&amp;amp; gulp &amp;amp;&amp;amp; hexo d&amp;#34;,
//...
}
//...
}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>ä½¿ç”¨GitHub Actionså°†æ–‡ä»¶pushåˆ°OSS</title><link>https://agou-ops.top/post/%E4%BD%BF%E7%94%A8github-actions%E5%B0%86%E6%96%87%E4%BB%B6push%E5%88%B0oss/</link><pubDate>Tue, 04 Aug 2020 10:23:38 +0800</pubDate><guid>https://agou-ops.top/post/%E4%BD%BF%E7%94%A8github-actions%E5%B0%86%E6%96%87%E4%BB%B6push%E5%88%B0oss/</guid><description>&lt;p>é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼ˆObject Storage Serviceï¼Œç®€ç§°OSSï¼‰ä¸ºæ‚¨æä¾›åŸºäºç½‘ç»œçš„æ•°æ®å­˜å–æœåŠ¡ã€‚ä½¿ç”¨OSSï¼Œæ‚¨å¯ä»¥é€šè¿‡ç½‘ç»œéšæ—¶å­˜å‚¨å’Œè°ƒç”¨åŒ…æ‹¬æ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘å’Œè§†é¢‘ç­‰åœ¨å†…çš„å„ç§éç»“æ„åŒ–æ•°æ®æ–‡ä»¶ã€‚&lt;/p>
&lt;p>å®˜æ–¹å¸®åŠ©æ–‡æ¡£ï¼šhttps://help.aliyun.com/document_detail/31883.html&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;ol>
&lt;li>é¦–å…ˆæ‰“å¼€æ‰€è¦ä½¿ç”¨&lt;code>Github Actions&lt;/code>çš„ä»“åº“ï¼Œç‚¹å‡»&lt;code>Actions&lt;/code>ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„&lt;code>workflow&lt;/code>
&lt;img src="https://s2.ax1x.com/2020/03/08/3zlpwD.png" alt="3zlpwD.png">
æ­¤æ—¶ï¼Œgithubå°†ä¼šè‡ªåŠ¨åœ¨ä»“åº“ä¸­åˆ›å»ºä¸€ä¸ªåä¸º&lt;code>.github/workflows&lt;/code>çš„æ–‡ä»¶å¤¹ã€‚
&lt;img src="https://s2.ax1x.com/2020/03/08/3zlN0U.png" alt="3zlN0U.png">&lt;/li>
&lt;li>ç¼–è¾‘é…ç½®æ–‡ä»¶&lt;code>oss.yml&lt;/code>,è¾“å…¥ä»¥ä¸‹å†…å®¹&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>MainWorkflow&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>push&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">runs-on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>ubuntu-latest&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>actions/checkout@v1&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>actions/setup-node@v1&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">node-version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;12.x&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>Build&lt;span class="w"> &lt;/span>Blog&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="sd">|
&lt;/span>&lt;span class="sd"> npm install&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>npm&lt;span class="w"> &lt;/span>install&lt;span class="w"> &lt;/span>-g&lt;span class="w"> &lt;/span>hexo-cli&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>hexo&lt;span class="w"> &lt;/span>generate&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>manyuanrong/setup-ossutil@v1&lt;span class="m">.0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># endpoint å¯ä»¥å»ossæ§åˆ¶å°ä¸ŠæŸ¥çœ‹&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">endpoint&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;oss-cn-hangzhou.aliyuncs.com&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰é…ç½®åœ¨secretsé‡Œé¢çš„accesskeysæ¥é…ç½®ossutil&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">access-key-id&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>${{&lt;span class="w"> &lt;/span>secrets.ACCESS_KEY_ID&lt;span class="w"> &lt;/span>}}&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">access-key-secret&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>${{&lt;span class="w"> &lt;/span>secrets.ACCESS_KEY_SECRET&lt;span class="w"> &lt;/span>}}&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>Deply&lt;span class="w"> &lt;/span>To&lt;span class="w"> &lt;/span>OSS&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>ossutil&lt;span class="w"> &lt;/span>cp&lt;span class="w"> &lt;/span>public&lt;span class="w"> &lt;/span>oss&lt;span class="p">:&lt;/span>//agou-ops/&lt;span class="w"> &lt;/span>-rf&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä¸­ï¼Œ&lt;code>secrets.ACCESS_KEY_ID&lt;/code>å’Œ&lt;code>secrets.ACCESS_KEY_SECRET&lt;/code>å±äºgithubçš„ä¸“ç”¨ç§˜é’¥ï¼Œæ¯”è¾ƒéšç§çš„å˜é‡å¯ä»¥æ”¾ç½®åœ¨æ­¤å¤„ï¼Œå…·ä½“ä½ç½®åœ¨Settings&amp;gt;Secrets
&lt;img src="https://s2.ax1x.com/2020/03/08/3zlx9s.png" alt="3zlx9s.png">
3. æäº¤&lt;code>commit&lt;/code>ï¼Œgithubä¼šè‡ªåŠ¨è¿›è¡Œéƒ¨ç½²ï¼Œç‚¹å‡»&lt;code>Actions&lt;/code>å¯ä»¥æŸ¥çœ‹éƒ¨ç½²çš„è¯¦ç»†çŠ¶æ€&lt;/p>
&lt;h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥&lt;/h2>
&lt;blockquote>
&lt;p>&lt;a href="http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html">Github Actionså…¥é—¨æ•™ç¨‹&lt;/a>,é˜®ä¸€å³°
&lt;a href="https://help.github.com/en/categories/automating-your-workflow-with-github-actions">GitHub Pages å®˜æ–¹æ–‡æ¡£&lt;/a>
&lt;a href="https://lukeboyle.com/blog-posts/2019/08/github-actions-for-web-apps/">Github Actions for web apps&lt;/a>, Luke Boyle
&lt;a href="https://medium.com/@adam.zolyak/my-first-week-with-github-actions-5d92de4c4851">My First Week With GitHub Actions&lt;/a>, Adam Zolyak&lt;/p>
&lt;/blockquote></description></item><item><title>ç¼–å†™shellå¸®åŠ©ä¿¡æ¯é€šç”¨å°æŠ€å·§</title><link>https://agou-ops.top/post/%E7%BC%96%E5%86%99shell%E5%B8%AE%E5%8A%A9%E6%96%87%E6%A1%A3/</link><pubDate>Tue, 14 Jul 2020 11:00:31 +0800</pubDate><guid>https://agou-ops.top/post/%E7%BC%96%E5%86%99shell%E5%B8%AE%E5%8A%A9%E6%96%87%E6%A1%A3/</guid><description>&lt;p>åºŸè¯å°‘è¯´ï¼Œ ç›´æ¥ä¸Šè„šæœ¬ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;span class="cp">&lt;/span>&lt;span class="c1">###&lt;/span>
&lt;span class="c1">### Some shell version or description here.&lt;/span>
&lt;span class="c1">###&lt;/span>
&lt;span class="c1">### Usage:&lt;/span>
&lt;span class="c1">### test &amp;lt;input&amp;gt; &amp;lt;output&amp;gt;&lt;/span>
&lt;span class="c1">###&lt;/span>
&lt;span class="c1">### Options:&lt;/span>
&lt;span class="c1">### &amp;lt;input&amp;gt; Input file to read.&lt;/span>
&lt;span class="c1">### &amp;lt;output&amp;gt; Output file to write. Use &amp;#39;-&amp;#39; for stdout.&lt;/span>
&lt;span class="c1">### -h | --help Show this message.&lt;/span>
help&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
sed -rn &lt;span class="s1">&amp;#39;s/^### ?//;T;p&amp;#39;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1"># å¦‚æœç”¨æˆ·è¾“å…¥â€œ-hâ€æˆ–è€…æ— å‚æ•°ï¼Œæ‰§è¡Œhelpå‡½æ•°&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$#&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;-h&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;--help&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">help&lt;/span>
&lt;span class="nb">exit&lt;/span> &lt;span class="m">1&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ•ˆæœï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">â•­â”€agou-ops@ideapad-15ISK ~/tmp
â•°â”€$ bash test.sh --help
Some shell version or description here.
Usage:
&lt;span class="nb">test&lt;/span> &amp;lt;input&amp;gt; &amp;lt;output&amp;gt;
Options:
&amp;lt;input&amp;gt; Input file to read.
&amp;lt;output&amp;gt; Output file to write. Use &lt;span class="s1">&amp;#39;-&amp;#39;&lt;/span> &lt;span class="k">for&lt;/span> stdout.
-h &lt;span class="p">|&lt;/span> --help Show this message.
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Web å‹æµ‹å·¥å…·</title><link>https://agou-ops.top/post/web-benchmark/</link><pubDate>Tue, 14 Jul 2020 10:23:47 +0800</pubDate><guid>https://agou-ops.top/post/web-benchmark/</guid><description>&lt;h2 id="web-benchmark-tools">web benchmark tools&lt;/h2>
&lt;h3 id="apache-bench">Apache Bench&lt;/h3>
&lt;blockquote>
&lt;p>ApacheBench æ˜¯ä¸€ä¸ªç”¨æ¥è¡¡é‡httpæœåŠ¡å™¨æ€§èƒ½çš„å•çº¿ç¨‹å‘½ä»¤è¡Œå·¥å…·ã€‚åŸæœ¬é’ˆå¯¹Apache httpæœåŠ¡å™¨ï¼Œä½†æ˜¯ä¹Ÿé€‚ç”¨äºå…¶ä»–httpæœåŠ¡å™¨ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>å¦‚æœä½ çš„æ“ä½œç³»ç»Ÿæ²¡æœ‰&lt;code>ab&lt;/code>å·¥å…·ï¼Œ é‚£ä¹ˆåªéœ€å®‰è£…&lt;code>httpd-tools&lt;/code>(CentOS)æˆ–è€…&lt;code>apache-utils&lt;/code>(Ubuntu)å³å¯ã€‚&lt;/p>
&lt;p>å¸¸ç”¨å‚æ•°è¯´æ˜ï¼š&lt;/p>
&lt;ul>
&lt;li>-nï¼šæ‰§è¡Œçš„è¯·æ±‚æ¬¡æ•°&lt;/li>
&lt;li>-cï¼šå¹¶å‘æ•°é‡&lt;/li>
&lt;li>-sï¼šå“åº”çš„è¶…æ—¶æ—¶é—´&lt;/li>
&lt;li>-pï¼špostè¯·æ±‚çš„æ•°æ®æ–‡ä»¶è·¯å¾„ï¼Œéœ€è¦è®¾ç½®-Tå‚æ•°&lt;/li>
&lt;li>-Tï¼šContent-Type&lt;/li>
&lt;li>-Cï¼šè®¾ç½®cookieï¼Œæ ¼å¼ä¸º&amp;quot;name=zhou&amp;rdquo;&lt;/li>
&lt;/ul>
&lt;p>å¸¸ç”¨ç»„åˆï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">ab -n &lt;span class="m">10000&lt;/span> -c &lt;span class="m">1000&lt;/span> http://localhost/index.html
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="wrk">wrk&lt;/h3>
&lt;blockquote>
&lt;p>wrk HTTPæ˜¯ä¸€ä¸ªç°ä»£çš„åŸºå‡†æµ‹è¯•å·¥å…·èƒ½äº§ç”Ÿæ˜¾è‘—çš„è´Ÿè½½è¿è¡Œæ—¶åœ¨ä¸€ä¸ªå¤šæ ¸CPUã€‚å®ƒç»“åˆäº†å¤šçº¿ç¨‹è®¾è®¡å¯ä¼¸ç¼©çš„ç³»ç»Ÿå¦‚epollå’Œkqueueäº‹ä»¶é€šçŸ¥ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>å®˜æ–¹githubä»“åº“ï¼š &lt;a href="https://github.com/wg/wrk">https://github.com/wg/wrk&lt;/a>&lt;/p>
&lt;p>ç¼–è¯‘å®‰è£…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">wget https://github.com/wg/wrk/archive/4.1.0.tar.gz
tar xf 4.1.0.tar.gz
&lt;span class="nb">cd&lt;/span> 4.1.0/deps
tar xf LuaJIT-2.1.0-beta3.tar.gz -C /usr/local
tar xf openssl-1.1.0g.tar.gz -C /usr/local
&lt;span class="nb">cd&lt;/span> ..
make &lt;span class="nv">WITH_LUAJIT&lt;/span>&lt;span class="o">=&lt;/span>/usr/local/LuaJIT-2.1.0-beta3 &lt;span class="nv">WITH_OPENSSL&lt;/span>&lt;span class="o">=&lt;/span>/usr/local/openssl-1.1.0g
make install
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¸¸ç”¨å‚æ•°è¯´æ˜ï¼š&lt;/p>
&lt;ul>
&lt;li>-tï¼šçº¿ç¨‹æ•°&lt;/li>
&lt;li>-cï¼šhttpæ€»è¯·æ±‚æ•°é‡&lt;/li>
&lt;li>-dï¼šæµ‹è¯•æ—¶é•¿ï¼Œe.g. 2s, 2m, 2h&lt;/li>
&lt;/ul>
&lt;p>ç®€å•ä½¿ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">wrk -t12 -c400 -d30s http://127.0.0.1:8080/index.html
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å¾…ç»­">å¾…ç»­ã€‚ã€‚ã€‚&lt;/h3></description></item><item><title>ECS-Linux æ•…éšœå¤„ç†</title><link>https://agou-ops.top/post/ecs-linux-%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/</link><pubDate>Tue, 14 Jul 2020 09:41:39 +0800</pubDate><guid>https://agou-ops.top/post/ecs-linux-%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/</guid><description>&lt;p>&lt;strong>ç¯‡å¹…æœ‰é™ï¼Œè½¬è‡³ &lt;a href="https://agou-ops.top/linux_sys_fix">https://agou-ops.top/linux_sys_fix&lt;/a> è¿›è¡ŒæŸ¥çœ‹ã€‚&lt;/strong>&lt;/p></description></item><item><title>Linux å®æ—¶æŸ¥çœ‹ç½‘å¡æµé‡</title><link>https://agou-ops.top/post/linux-%E5%AE%9E%E6%97%B6%E6%9F%A5%E7%9C%8B%E7%BD%91%E5%8D%A1%E6%B5%81%E9%87%8F/</link><pubDate>Sat, 11 Jul 2020 22:12:17 +0800</pubDate><guid>https://agou-ops.top/post/linux-%E5%AE%9E%E6%97%B6%E6%9F%A5%E7%9C%8B%E7%BD%91%E5%8D%A1%E6%B5%81%E9%87%8F/</guid><description>&lt;h2 id="nloadå·¥å…·">nloadå·¥å…·&lt;/h2>
&lt;p>nloadç”¨äºå®æ—¶æŸ¥çœ‹ç½‘å¡æµé‡ï¼Œé»˜è®¤ç³»ç»Ÿéƒ½æ²¡æœ‰å®‰è£…ï¼Œé¦–å…ˆå®‰è£…æ–¹å¼å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ yum install -y epel-release
$ yum install -y nload
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨ä¹Ÿéå¸¸ç®€å•ï¼Œå¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">
$ nload
Device eth0 &lt;span class="o">[&lt;/span>192.168.0.110&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>4/5&lt;span class="o">)&lt;/span>:
&lt;span class="o">===================================================================================&lt;/span>
Incoming:
Curr: 5.21 kBit/s &lt;span class="c1"># Incomingï¼šè¿›æ¥çš„æµé‡&lt;/span>
Avg: 4.09 kBit/s &lt;span class="c1"># Outgoingï¼šå‡ºå»çš„æµé‡&lt;/span>
Min: 1.59 kBit/s &lt;span class="c1"># Currï¼šå½“å‰çš„æµé‡å€¼&lt;/span>
Max: 12.51 kBit/s &lt;span class="c1"># Avgï¼šå¹³å‡å€¼çš„æµé‡å€¼&lt;/span>
Ttl: 4.16 GByte &lt;span class="c1"># Minï¼šæœ€å°çš„æµé‡å€¼&lt;/span>
Outgoing: &lt;span class="c1"># Maxï¼šæœ€å¤§çš„æµé‡å€¼&lt;/span>
Curr: 16.48 kBit/s &lt;span class="c1"># Ttlï¼šæ€»çš„æµé‡å€¼&lt;/span>
Avg: 14.38 kBit/s
Min: 6.73 kBit/s
Max: 28.39 kBit/s
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="iftopå·¥å…·">iftopå·¥å…·&lt;/h2>
&lt;p>é»˜è®¤ç³»ç»Ÿæ²¡æœ‰å®‰è£…ï¼Œéœ€è¦å®‰è£…ï¼Œå¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># éœ€è¦epelç¯å¢ƒ&lt;/span>
$ yum install -y epel-release
$ yum install -y iftop
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®‰è£…å®Œæˆä¹‹åï¼Œè¾“å…¥iftopä¾¿å¯çœ‹åˆ°å¦‚ä¸‹ç•Œé¢&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/Others/iftop.png" alt="null">&lt;/p>
&lt;p>å…¶ä¸­ï¼Œç›¸å…³å‚æ•°è§£é‡Šå¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ç•Œé¢ä¸Šé¢æ˜¾ç¤ºçš„æ˜¯ç±»ä¼¼åˆ»åº¦å°ºçš„åˆ»åº¦èŒƒå›´ï¼Œä¸ºæ˜¾ç¤ºæµé‡å›¾å½¢çš„é•¿æ¡ä½œæ ‡å°ºç”¨çš„ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¸­é—´çš„&amp;lt;= =&amp;gt;è¿™ä¸¤ä¸ªå·¦å³ç®­å¤´ï¼Œè¡¨ç¤ºçš„æ˜¯æµé‡çš„æ–¹å‘ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>TXï¼šå‘é€æµé‡&lt;/p>
&lt;/li>
&lt;li>
&lt;p>RXï¼šæ¥æ”¶æµé‡5.TOTALï¼šæ€»æµé‡6.Cummï¼šè¿è¡Œiftopåˆ°ç›®å‰æ—¶é—´çš„æ€»æµé‡&lt;/p>
&lt;/li>
&lt;li>
&lt;p>peakï¼šæµé‡å³°å€¼&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ratesï¼šåˆ†åˆ«è¡¨ç¤ºè¿‡å» 2s 10s 40s çš„å¹³å‡æµé‡&lt;/strong>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="sarå‘½ä»¤">sarå‘½ä»¤&lt;/h2>
&lt;p>sarå‘½ä»¤åŒ…å«åœ¨&lt;code>sysstat&lt;/code>å·¥å…·åŒ…ä¸­ï¼Œæä¾›ç³»ç»Ÿçš„ä¼—å¤šç»Ÿè®¡æ•°æ®ã€‚å…¶åœ¨ä¸åŒçš„ç³»ç»Ÿä¸Šå‘½ä»¤æœ‰äº›å·®å¼‚ï¼ŒæŸäº›ç³»ç»Ÿæä¾›çš„saræ”¯æŒåŸºäºç½‘ç»œæ¥å£çš„æ•°æ®ç»Ÿè®¡ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹è®¾å¤‡ä¸Šæ¯ç§’æ”¶å‘åŒ…çš„ä¸ªæ•°å’Œæµé‡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># DEVæ˜¾ç¤ºç½‘ç»œæ¥å£ä¿¡æ¯&lt;/span>
&lt;span class="c1"># å‘½ä»¤åé¢1 2 æ„æ€æ˜¯ï¼šæ¯ä¸€ç§’é’Ÿå–1æ¬¡å€¼ï¼Œå–2æ¬¡&lt;/span>
$ sar -n DEV &lt;span class="m">1&lt;/span> &lt;span class="m">2&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦å¤–ï¼Œ-nå‚æ•°å¾ˆæœ‰ç”¨ï¼Œä»–æœ‰6ä¸ªä¸åŒçš„å¼€å…³ï¼š&lt;code>DEV | EDEV | NFS | NFSD | SOCK | ALL&lt;/code> ï¼Œå…¶ä»£è¡¨çš„å«ä¹‰å¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>DEVæ˜¾ç¤ºç½‘ç»œæ¥å£ä¿¡æ¯ã€‚&lt;/li>
&lt;li>EDEVæ˜¾ç¤ºå…³äºç½‘ç»œé”™è¯¯çš„ç»Ÿè®¡æ•°æ®ã€‚&lt;/li>
&lt;li>NFSç»Ÿè®¡æ´»åŠ¨çš„NFSå®¢æˆ·ç«¯çš„ä¿¡æ¯ã€‚&lt;/li>
&lt;li>NFSDç»Ÿè®¡NFSæœåŠ¡å™¨çš„ä¿¡æ¯&lt;/li>
&lt;li>SOCKæ˜¾ç¤ºå¥—æ¥å­—ä¿¡æ¯&lt;/li>
&lt;li>ALLæ˜¾ç¤ºæ‰€æœ‰5ä¸ªå¼€å…³&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ sar -n DEV &lt;span class="m">1&lt;/span> &lt;span class="m">2&lt;/span>
Linux 3.10.0-514.26.2.el7.x86_64 &lt;span class="o">(&lt;/span>localhost&lt;span class="o">)&lt;/span> 08/31/2019 _x86_64_ &lt;span class="o">(&lt;/span>&lt;span class="m">1&lt;/span> CPU&lt;span class="o">)&lt;/span>
09:52:28 AM IFACE rxpck/s txpck/s rxkB/s txkB/s rxcmp/s txcmp/s rxmcst/s
09:52:29 AM eth0 2.02 1.01 0.13 0.16 0.00 0.00 0.00
09:52:29 AM lo 0.00 0.00 0.00 0.00 0.00 0.00 0.00
09:52:29 AM IFACE rxpck/s txpck/s rxkB/s txkB/s rxcmp/s txcmp/s rxmcst/s
09:52:30 AM eth0 1.02 1.02 0.07 0.23 0.00 0.00 0.00
09:52:30 AM lo 0.00 0.00 0.00 0.00 0.00 0.00 0.00
Average: IFACE rxpck/s txpck/s rxkB/s txkB/s rxcmp/s txcmp/s rxmcst/s
Average: eth0 1.52 1.02 0.10 0.19 0.00 0.00 0.00
Average: lo 0.00 0.00 0.00 0.00 0.00 0.00 0.00
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‚æ•°è¯´æ˜ï¼š&lt;/p>
&lt;ul>
&lt;li>IFACEï¼šLANæ¥å£&lt;/li>
&lt;li>rxpck/sï¼šæ¯ç§’é’Ÿæ¥æ”¶çš„æ•°æ®åŒ…&lt;/li>
&lt;li>txpck/sï¼šæ¯ç§’é’Ÿå‘é€çš„æ•°æ®åŒ…&lt;/li>
&lt;li>rxbyt/sï¼šæ¯ç§’é’Ÿæ¥æ”¶çš„å­—èŠ‚æ•°&lt;/li>
&lt;li>txbyt/sï¼šæ¯ç§’é’Ÿå‘é€çš„å­—èŠ‚æ•°&lt;/li>
&lt;li>rxcmp/sï¼šæ¯ç§’é’Ÿæ¥æ”¶çš„å‹ç¼©æ•°æ®åŒ…&lt;/li>
&lt;li>txcmp/sï¼šæ¯ç§’é’Ÿå‘é€çš„å‹ç¼©æ•°æ®åŒ…&lt;/li>
&lt;li>rxmcst/sï¼šæ¯ç§’é’Ÿæ¥æ”¶çš„å¤šæ’­æ•°æ®åŒ…&lt;/li>
&lt;li>rxerr/sï¼šæ¯ç§’é’Ÿæ¥æ”¶çš„åæ•°æ®åŒ…&lt;/li>
&lt;li>txerr/sï¼šæ¯ç§’é’Ÿå‘é€çš„åæ•°æ®åŒ…&lt;/li>
&lt;li>coll/sï¼šæ¯ç§’å†²çªæ•°&lt;/li>
&lt;li>rxdrop/sï¼šå› ä¸ºç¼“å†²å……æ»¡ï¼Œæ¯ç§’é’Ÿä¸¢å¼ƒçš„å·²æ¥æ”¶æ•°æ®åŒ…æ•°&lt;/li>
&lt;li>txdrop/sï¼šå› ä¸ºç¼“å†²å……æ»¡ï¼Œæ¯ç§’é’Ÿä¸¢å¼ƒçš„å·²å‘é€æ•°æ®åŒ…æ•°&lt;/li>
&lt;li>txcarr/sï¼šå‘é€æ•°æ®åŒ…æ—¶ï¼Œæ¯ç§’è½½æ³¢é”™è¯¯æ•°&lt;/li>
&lt;li>rxfram/sï¼šæ¯ç§’æ¥æ”¶æ•°æ®åŒ…çš„å¸§å¯¹é½é”™è¯¯æ•°&lt;/li>
&lt;li>rxfifo/sï¼šæ¥æ”¶çš„æ•°æ®åŒ…æ¯ç§’FIFOè¿‡é€Ÿçš„é”™è¯¯æ•°&lt;/li>
&lt;li>txfifo/sï¼šå‘é€çš„æ•°æ®åŒ…æ¯ç§’FIFOè¿‡é€Ÿçš„é”™è¯¯æ•°&lt;/li>
&lt;/ul>
&lt;p>è¿™ç§æ–¹å¼ç®€å•ï¼Œç›´è§‚ï¼Œæ¨èä½¿ç”¨ã€‚&lt;/p>
&lt;h2 id="cat-procnetdev">cat /proc/net/dev&lt;/h2>
&lt;p>Linux å†…æ ¸æä¾›äº†ä¸€ç§é€šè¿‡ /proc æ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨è¿è¡Œæ—¶è®¿é—®å†…æ ¸å†…éƒ¨æ•°æ®ç»“æ„ã€æ”¹å˜å†…æ ¸è®¾ç½®çš„æœºåˆ¶ã€‚procæ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸€ä¸ªä¼ªæ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒåªå­˜åœ¨å†…å­˜å½“ä¸­ï¼Œè€Œä¸å ç”¨å¤–å­˜ç©ºé—´ã€‚å®ƒä»¥æ–‡ä»¶ç³»ç»Ÿçš„æ–¹å¼ä¸ºè®¿é—®ç³»ç»Ÿå†…æ ¸æ•°æ®çš„æ“ä½œæä¾›æ¥å£ã€‚ç”¨æˆ·å’Œåº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡procå¾—åˆ°ç³»ç»Ÿçš„ä¿¡æ¯ï¼Œå¹¶å¯ä»¥æ”¹å˜å†…æ ¸çš„æŸäº›å‚æ•°ã€‚ç”±äºç³»ç»Ÿçš„ä¿¡æ¯ï¼Œå¦‚è¿›ç¨‹ï¼Œæ˜¯åŠ¨æ€æ”¹å˜çš„ï¼Œæ‰€ä»¥ç”¨æˆ·æˆ–åº”ç”¨ç¨‹åºè¯»å–procæ–‡ä»¶æ—¶ï¼Œprocæ–‡ä»¶ç³»ç»Ÿæ˜¯åŠ¨æ€ä»ç³»ç»Ÿå†…æ ¸è¯»å‡ºæ‰€éœ€ä¿¡æ¯å¹¶æäº¤çš„ã€‚/procæ–‡ä»¶ç³»ç»Ÿä¸­åŒ…å«äº†å¾ˆå¤šç›®å½•ï¼Œå…¶ä¸­/proc/net/dev ä¿å­˜äº†ç½‘ç»œé€‚é…å™¨åŠç»Ÿè®¡ä¿¡æ¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@agou ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> cat /proc/net/dev
Inter-&lt;span class="p">|&lt;/span> Receive &lt;span class="p">|&lt;/span> Transmit
face &lt;span class="p">|&lt;/span>bytes packets errs drop fifo frame compressed multicast&lt;span class="p">|&lt;/span>bytes packets errs drop fifo colls carrier compressed
ens32: &lt;span class="m">11196722&lt;/span> &lt;span class="m">21042&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">4605085&lt;/span> &lt;span class="m">14465&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span>
lo: &lt;span class="m">1934784&lt;/span> &lt;span class="m">7162&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">1934784&lt;/span> &lt;span class="m">7162&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback"> è¯´æ˜ï¼š
æœ€å·¦è¾¹çš„è¡¨ç¤ºæ¥å£çš„åå­—ï¼ŒReceiveè¡¨ç¤ºæ”¶åŒ…ï¼ŒTransmitè¡¨ç¤ºå‘é€åŒ…ï¼›
bytesè¡¨ç¤ºæ”¶å‘çš„å­—èŠ‚æ•°ï¼›
packetsè¡¨ç¤ºæ”¶å‘æ­£ç¡®çš„åŒ…é‡ï¼›
errsè¡¨ç¤ºæ”¶å‘é”™è¯¯çš„åŒ…é‡ï¼›
dropè¡¨ç¤ºæ”¶å‘ä¸¢å¼ƒçš„åŒ…é‡ï¼›
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶å®ï¼Œæˆ‘ä»¬å¹³æ—¶ç»å¸¸ç”¨çš„å¾ˆå¤šæŸ¥çœ‹ç½‘å¡å®æ—¶æµé‡çš„å‘½ä»¤ï¼Œéƒ½æ˜¯é€šè¿‡è¯»å–è¯¥ç›®å½•ä¸‹çš„å®æ—¶æµé‡ï¼Œå¹¶é€šè¿‡ç®€å•è®¡ç®—å¾—åˆ°çš„ã€‚&lt;/p>
&lt;h2 id="å®æ—¶ç›‘æ§è„šæœ¬1">å®æ—¶ç›‘æ§è„šæœ¬1&lt;/h2>
&lt;p>ifconfigå¯ä»¥æŸ¥çœ‹çš„æ˜¯ä»è¿ä¸Šç½‘å¼€å§‹çš„æµé‡æ€»å’Œï¼Œcat /proc/net/devè®°å½•çš„å€¼ä¹Ÿæ˜¯æ€»æµé‡ï¼Œé‚£ä¹ˆå¯ä»¥è®¡ç®—ä¸€ä¸‹ï¼Œå®æ—¶æµé‡=å½“å‰æµé‡-ä¸Šä¸€ç§’çš„æµé‡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@localhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> cat network.sh
&lt;span class="c1"># ä¼ å…¥ç½‘å¡å‚æ•°&lt;/span>
&lt;span class="nv">ethn&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$1&lt;/span>
&lt;span class="k">while&lt;/span> &lt;span class="nb">true&lt;/span>
&lt;span class="k">do&lt;/span>
&lt;span class="nv">RX_pre&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>cat /proc/net/dev &lt;span class="p">|&lt;/span> grep &lt;span class="nv">$ethn&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;s/:/ /g&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $2}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;span class="nv">TX_pre&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>cat /proc/net/dev &lt;span class="p">|&lt;/span> grep &lt;span class="nv">$ethn&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;s/:/ /g&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $10}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
sleep &lt;span class="m">1&lt;/span>
&lt;span class="nv">RX_next&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>cat /proc/net/dev &lt;span class="p">|&lt;/span> grep &lt;span class="nv">$ethn&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;s/:/ /g&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $2}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;span class="nv">TX_next&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>cat /proc/net/dev &lt;span class="p">|&lt;/span> grep &lt;span class="nv">$ethn&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;s/:/ /g&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $10}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
clear
&lt;span class="c1"># echo -eæ¿€æ´»è½¬ä¹‰ç¬¦&lt;/span>
&lt;span class="c1"># è¾“å‡ºæ—¶é—´çš„æ ‡é¢˜&lt;/span>
&lt;span class="nb">echo&lt;/span> -e &lt;span class="s2">&amp;#34;t RX `date +%k:%M:%S` TX&amp;#34;&lt;/span>
&lt;span class="nv">RX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$((&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">RX_next&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">RX_pre&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="k">))&lt;/span>
&lt;span class="nv">TX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$((&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">TX_next&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">TX_pre&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="k">))&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$RX&lt;/span> -lt &lt;span class="m">1024&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="k">then&lt;/span>
&lt;span class="nv">RX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">RX&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">B/s&amp;#34;&lt;/span>
&lt;span class="k">elif&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$RX&lt;/span> -gt &lt;span class="m">1048576&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="k">then&lt;/span>
&lt;span class="nv">RX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$RX&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $1/1048576 &amp;#34;MB/s&amp;#34;}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;span class="k">else&lt;/span>
&lt;span class="nv">RX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$RX&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $1/1024 &amp;#34;KB/s&amp;#34;}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$TX&lt;/span> -lt &lt;span class="m">1024&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="k">then&lt;/span>
&lt;span class="nv">TX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">TX&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">B/s&amp;#34;&lt;/span>
&lt;span class="k">elif&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$TX&lt;/span> -gt &lt;span class="m">1048576&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="k">then&lt;/span>
&lt;span class="nv">TX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$TX&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $1/1048576 &amp;#34;MB/s&amp;#34;}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;span class="k">else&lt;/span>
&lt;span class="nv">TX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$TX&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $1/1024 &amp;#34;KB/s&amp;#34;}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;span class="c1"># è¾“å‡ºæµé‡&lt;/span>
&lt;span class="nb">echo&lt;/span> -e &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$ethn&lt;/span>&lt;span class="s2"> t &lt;/span>&lt;span class="nv">$RX&lt;/span>&lt;span class="s2"> &lt;/span>&lt;span class="nv">$TX&lt;/span>&lt;span class="s2"> &amp;#34;&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@localhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> ./network.sh eth0
RX 20:23:38 TX
eth0 66B/s 0B/s
RX 20:23:39 TX
eth0 132B/s 0B/s
RX 20:23:40 TX
eth0 186B/s 194B/s
RX 20:23:41 TX
eth0 240B/s 194B/s
RX 20:23:42 TX
eth0 132B/s 0B/s
RX 20:23:43 TX
eth0 240B/s 194B/s
RX 20:23:44 TX
eth0 396B/s 4.19727KB/s
RX 20:23:45 TX
eth0 276B/s 178B/s
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å®æ—¶ç›‘æ§è„šæœ¬2">å®æ—¶ç›‘æ§è„šæœ¬2&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ cat network_flow.sh
&lt;span class="c1"># ç›‘æ§å®æ—¶ç½‘å¡æµé‡&lt;/span>
&lt;span class="c1"># $1 æ¥æ”¶æ‰€ä¼ ç¬¬ä¸€ä¸ªå‚æ•° å³è¦ç›‘æ§çš„ç½‘å¡&lt;/span>
&lt;span class="nv">NIC&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$1&lt;/span>
&lt;span class="c1"># echo -e &amp;#34;traffic in --- traffic out&amp;#34;&lt;/span>
&lt;span class="k">while&lt;/span> true&lt;span class="p">;&lt;/span>&lt;span class="k">do&lt;/span>
&lt;span class="c1"># $0 å‘½ä»¤è¾“å‡ºç»“æœ ~ åŒ¹é…æ¨¡å¼&lt;/span>
&lt;span class="nv">OLD_IN&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>awk &lt;span class="s1">&amp;#39;$0~&amp;#34;&amp;#39;&lt;/span>&lt;span class="nv">$NIC&lt;/span>&lt;span class="s1">&amp;#39;&amp;#34;{print $2}&amp;#39;&lt;/span> /proc/net/dev&lt;span class="sb">`&lt;/span>
&lt;span class="nv">OLD_OUT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>awk &lt;span class="s1">&amp;#39;$0~&amp;#34;&amp;#39;&lt;/span>&lt;span class="nv">$NIC&lt;/span>&lt;span class="s1">&amp;#39;&amp;#34;{print $10}&amp;#39;&lt;/span> /proc/net/dev&lt;span class="sb">`&lt;/span>
sleep &lt;span class="m">1&lt;/span>
&lt;span class="nv">NEW_IN&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>awk &lt;span class="s1">&amp;#39;$0~&amp;#34;&amp;#39;&lt;/span>&lt;span class="nv">$NIC&lt;/span>&lt;span class="s1">&amp;#39;&amp;#34;{print $2}&amp;#39;&lt;/span> /proc/net/dev&lt;span class="sb">`&lt;/span>
&lt;span class="nv">NEW_OUT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>awk &lt;span class="s1">&amp;#39;$0~&amp;#34;&amp;#39;&lt;/span>&lt;span class="nv">$NIC&lt;/span>&lt;span class="s1">&amp;#39;&amp;#34;{print $10}&amp;#39;&lt;/span> /proc/net/dev&lt;span class="sb">`&lt;/span>
clear
&lt;span class="c1"># printfä¸æ¢è¡Œ %så ä½ç¬¦&lt;/span>
&lt;span class="nv">IN&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">printf&lt;/span> &lt;span class="s2">&amp;#34;%.1f%s&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$((&lt;/span>&lt;span class="nv">$NEW_IN&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">$OLD_IN&lt;/span>&lt;span class="k">))&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;B/s&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;span class="nv">OUT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">printf&lt;/span> &lt;span class="s2">&amp;#34;%.1f%s&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$((&lt;/span>&lt;span class="nv">$NEW_OUT&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">$OLD_OUT&lt;/span>&lt;span class="k">))&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;B/s&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34; traffic in `date +%k:%M:%S` traffic out &amp;#34;&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$NIC&lt;/span>&lt;span class="s2"> &lt;/span>&lt;span class="nv">$IN&lt;/span>&lt;span class="s2"> &lt;/span>&lt;span class="nv">$OUT&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ ./network_flow.sh eth0
traffic in 11:15:02 traffic out
eth0 732.0B/s 948.0B/s
traffic in 11:15:03 traffic out
eth0 132.0B/s 0.0B/s
traffic in 11:15:04 traffic out
eth0 132.0B/s 0.0B/s
traffic in 11:15:05 traffic out
eth0 132.0B/s 0.0B/s
traffic in 11:15:06 traffic out
eth0 186.0B/s 242.0B/s
traffic in 11:15:07 traffic out
eth0 132.0B/s 0.0B/s
traffic in 11:15:08 traffic out
eth0 132.0B/s 0.0B/s
traffic in 11:15:09 traffic out
eth0 132.0B/s 0.0B/s
traffic in 11:15:10 traffic out
eth0 240.0B/s 242.0B/s
traffic in 11:15:11 traffic out
eth0 132.0B/s 0.0B/s
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>è¯¥æ–‡ç« å†…å®¹æ”¶é›†äºç½‘ç»œã€‚&lt;/p>
&lt;/blockquote></description></item><item><title>Linux ç³»ç»Ÿå°è£…</title><link>https://agou-ops.top/post/linux-%E7%B3%BB%E7%BB%9F%E5%B0%81%E8%A3%85/</link><pubDate>Fri, 10 Jul 2020 21:16:31 +0800</pubDate><guid>https://agou-ops.top/post/linux-%E7%B3%BB%E7%BB%9F%E5%B0%81%E8%A3%85/</guid><description>&lt;h2 id="mondo-rescue">Mondo Rescue&lt;/h2>
&lt;p>Mondo Rescueï¼ˆç®€ç§° Mondoï¼‰ï¼šæ˜¯ä¸€æ¬¾å¼€æºå…è´¹çš„æ•…éšœæ¢å¤å’Œå¤‡ä»½å·¥å…·ï¼Œå¯ä»¥è¯´æ˜¯ Linux æ“ä½œç³»ç»Ÿä¸‹çš„ Ghost ï¼Œä½ å¯ä»¥è½»æ¾åœ°åˆ›å»ºç³»ç»Ÿï¼ˆLinux æˆ– Windowsï¼‰å…‹éš†æˆ–å¤‡ä»½çš„ ISO é•œåƒï¼Œå¯ä»¥å°†è¿™äº›é•œåƒå­˜æ”¾åœ¨ CDã€DVDã€ç£å¸¦ã€USB è®¾å¤‡ã€ç¡¬ç›˜å’Œ NFS ä¸Šã€‚&lt;/p>
&lt;p>å®˜æ–¹ç«™ç‚¹:http://www.mondorescue.org/&lt;/p>
&lt;h3 id="å®‰è£…-mondo">å®‰è£… mondo&lt;/h3>
&lt;p>ä»&lt;a href="http://mondo.mirror.pclark.com/ftp/pub/mondorescue/">å®˜æ–¹æŒ‡å®šçš„ä»“åº“&lt;/a>ä¸‹è½½&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">wget http://mondo.mirror.pclark.com/ftp/pub/mondorescue/centos/7/x86_64/mondorescue.repo -O /etc/yum.repos.d/mondorescue.repo
yum install -y mondo
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–è€…ç›´æ¥å®‰è£…&lt;code>rpm&lt;/code>åŒ…:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">yum install -y http://mondo.mirror.pclark.com/ftp/pub/mondorescue/centos/7/x86_64/mondo-3.3.0-1.centos7.x86_64.rpm
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨è¯¥æ–¹æ³•å®‰è£…å¯èƒ½ä¼šç¼ºå°‘ä¾èµ–åŒ…æ–‡ä»¶,åœ¨è¿™é‡Œæ‰‹åŠ¨è§£å†³ä¾èµ–å…³ç³»å³å¯(å¤ªå¤šäº†,è¯´ç€ç©çš„,è¿˜æ˜¯æ¨èç”¨åœ¨çº¿ä»“åº“å®‰è£…å§&amp;hellip;):&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">yum install -y http://ftp.mondorescue.org/centos/7/x86_64/afio-2.5-1.centos7.x86_64.rpm
yum install -y http://ftp.mondorescue.org/centos/7/x86_64/mindi-3.3.0-1.centos7.x86_64.rpm
yum install -y http://ftp.mondorescue.org/centos/7/x86_64/buffer-1.19-8.centos7.x86_64.rpm
...
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="åˆ¶ä½œå…‰ç›˜é•œåƒ">åˆ¶ä½œå…‰ç›˜é•œåƒ&lt;/h3>
&lt;p>å®‰è£…å®Œæ¯•åï¼Œåœ¨ç»ˆç«¯ä¸‹è¾“å…¥&lt;code>mondoarchive&lt;/code>ï¼Œå³å¯è¿›å…¥å›¾å½¢å®‰è£…ç•Œé¢ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">mondoarchive
See /var/log/mondoarchive.log &lt;span class="k">for&lt;/span> details of backup run.
Checking sanity of your Linux distribution
.......
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>éšå,æŒ‰ç…§å¼•å¯¼ä¸€æ­¥æ­¥è®¾ç½®å³å¯.&lt;/p>
&lt;h2 id="remastersys">Remastersys&lt;/h2>
&lt;p>Remastersys å¯ä»¥å°†ä½ å®‰è£…çš„ Ubuntuã€Debian åŠå…¶è¡ç”Ÿç‰ˆæ‰“åŒ…æˆä¸€ä¸ªå¯ä»¥ç”¨æ¥å®‰è£…çš„ Live CD/DVD çš„ ISO é•œåƒæ–‡ä»¶ï¼Œå¯æ‰“åŒ…ä¸€ä¸ªåŒ…å«ä¸ªäººæ•°æ®çš„ ISO é•œåƒæ–‡ä»¶ä½œä¸ºæ“ä½œç³»ç»Ÿå¤‡ä»½ï¼Œä¹Ÿå¯ä»¥æ‰“åŒ…ä¸€ä¸ªä¸åŒ…å«ä¸ªäººæ•°æ®çš„ ISO é•œåƒæ–‡ä»¶å‘å¸ƒç»™å…¶ä»–äººå®‰è£…ã€‚&lt;/p>
&lt;h3 id="remastersys-åŒ…ä¸‹è½½">&lt;strong>Remastersys åŒ…ä¸‹è½½&lt;/strong>&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">$ mkdir tools
$ cd tools/
$ wget ftp://ftp.gwdg.de/pub/linux/easyvdr/mirror/remastersys/ubuntu/remastersys/remastersys_3.0.4-2_all.deb
$ wget ftp://ftp.gwdg.de/pub/linux/easyvdr/mirror/remastersys/ubuntu/remastersys-gui/remastersys-gui_3.0.4-1_amd64.deb
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å®‰è£…-remastersys-ä¾èµ–">&lt;strong>å®‰è£… Remastersys ä¾èµ–&lt;/strong>&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">$ sudo apt-get install syslinux-utils isolinux squashfs-tools casper libdebian-installer4 ubiquity-frontend-debconf user-setup discover xresprobe systemd
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å®‰è£…-remastersys-gui-ä¾èµ–">&lt;strong>å®‰è£… Remastersys-gui ä¾èµ–&lt;/strong>&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">$ sudo apt-get install libvte-common libvte9 plymouth-x11
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å¼€å§‹å®‰è£…-remastersys">&lt;strong>å¼€å§‹å®‰è£… Remastersys&lt;/strong>&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">$ cd tools/
$ sudo dpkg -i remastersys_3.0.4-2_all.deb
$ sudo dpkg -i remastersys-gui_3.0.4-1_amd64.deb
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>Remastersys å¤‡ä»½æ“ä½œç³»ç»Ÿ&lt;/strong>&lt;/p>
&lt;p>&lt;strong>å‘½ä»¤è¡Œæ¨¡å¼ï¼š&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="n">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">remastersys&lt;/span> &lt;span class="n">backup&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>å›¾å½¢åŒ–æ¨¡å¼ï¼š&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="n">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">remastersys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gui&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Apache HTTPDä½¿ç”¨Let's Encrypt</title><link>https://agou-ops.top/post/apache-httpd%E4%BD%BF%E7%94%A8lets-encrypt/</link><pubDate>Fri, 10 Jul 2020 21:15:22 +0800</pubDate><guid>https://agou-ops.top/post/apache-httpd%E4%BD%BF%E7%94%A8lets-encrypt/</guid><description>&lt;h2 id="apache-httpdä½¿ç”¨lets-encryptå®ç°å®‰å…¨è¿æ¥https">&lt;code>Apache HTTPD&lt;/code>ä½¿ç”¨&lt;code>Let's Encrypt&lt;/code>å®ç°å®‰å…¨è¿æ¥(https)&lt;/h2>
&lt;p>å®‰è£…&lt;code>cerbot&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">yum update -y
yum install -y cerbot
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç”Ÿæˆé«˜å®‰å…¨æ€§çš„&lt;code>DH&lt;/code>ç§˜é’¥åˆ°&lt;code>/etc/ssl/certs/&lt;/code>ç›®å½•å½“ä¸­å»:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo openssl dhparam -out /etc/ssl/certs/dhparam.pem &lt;span class="m">2048&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºç›®å½•, å¹¶ä½¿å®ƒå¯å†™ä¸ºApacheæœåŠ¡å™¨:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo mkdir -p /var/lib/letsencrypt/.well-known
sudo chgrp www-data /var/lib/letsencrypt
sudo chmod g+s /var/lib/letsencrypt
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸ºäº†é¿å…å¤åˆ¶ä»£ç å’Œé…ç½®æ›´æ˜“äºç»´æŠ¤, åˆ›å»ºä»¥ä¸‹ä¸¤ä¸ªé…ç½®ä»£ç ç‰‡æ®µ:&lt;/p>
&lt;ul>
&lt;li>ç¼–è¾‘&lt;code>/etc/apache2/conf-available/letsencrypt.conf&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">Alias /.well-known/acme-challenge/ &lt;span class="s2">&amp;#34;/var/lib/letsencrypt/.well-known/acme-challenge/&amp;#34;&lt;/span>
&amp;lt;Directory &lt;span class="s2">&amp;#34;/var/lib/letsencrypt/&amp;#34;&lt;/span>&amp;gt;
AllowOverride None
Options MultiViews Indexes SymLinksIfOwnerMatch IncludesNoExec
Require method GET POST OPTIONS
&amp;lt;/Directory&amp;gt;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>ç¼–è¾‘&lt;code>/etc/apache2/conf-available/ssl-params.conf&lt;/code>:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1
SSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384
SSLHonorCipherOrder off
SSLSessionTickets off
SSLUseStapling On
SSLStaplingCache &lt;span class="s2">&amp;#34;shmcb:logs/ssl_stapling(32768)&amp;#34;&lt;/span>
SSLOpenSSLConfCmd DHParameters &lt;span class="s2">&amp;#34;/etc/ssl/certs/dhparam.pem&amp;#34;&lt;/span>
Header always &lt;span class="nb">set&lt;/span> Strict-Transport-Security &lt;span class="s2">&amp;#34;max-age=63072000&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿›è¡Œå¯ç”¨é…ç½®æ–‡ä»¶ä¹‹å‰, ç¡®ä¿&lt;code>mod_ssl &lt;/code>å’Œ&lt;code>mod_headers&lt;/code>å·²ç»è¢«å¯ç”¨:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo a2enmod ssl
sudo a2enmod headers
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶å, å¯ç”¨&lt;code>SSL&lt;/code>é…ç½®æ–‡ä»¶, è¿è¡Œä»¥ä¸‹å‘½ä»¤å³å¯:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo a2enconf letsencrypt
sudo a2enconf ssl-params
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ç”¨&lt;code>HTTP/2&lt;/code>æ¨¡å—:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo a2enmod http2
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é‡å¯&lt;code>httpd&lt;/code>è®©é…ç½®ç”Ÿæ•ˆ:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">systemctl restart httpd
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨&lt;code>webroot&lt;/code>æ’ä»¶è¿è¡Œ&lt;code>Certbot&lt;/code>å·¥å…·å¹¶è·å–SSLè¯ä¹¦æ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo certbot certonly --agree-tos --email agou-ops@foxmail.com --webroot -w /var/lib/letsencrypt/ -d agou-ops.top -d www.agou-ops.top
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœè¾“å‡ºä»¥ä¸‹ä¿¡æ¯, åˆ™è¡¨å·²ç»æˆåŠŸç”³è¯·åˆ°&lt;code>SSL&lt;/code>è¯ä¹¦æ–‡ä»¶:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">IMPORTANT NOTES:
- Congratulations! Your certificate and chain have been saved at:
/etc/letsencrypt/live/agou-ops.top/fullchain.pem
Your key file has been saved at:
/etc/letsencrypt/live/agou-ops.top/privkey.pem
Your cert will expire on 2020-10-06. To obtain a new or tweaked
version of this certificate in the future, simply run certbot
again. To non-interactively renew *all* of your certificates, run
&lt;span class="s2">&amp;#34;certbot renew&amp;#34;&lt;/span>
- Your account credentials have been saved in your Certbot
configuration directory at /etc/letsencrypt. You should make a
secure backup of this folder now. This configuration directory will
also contain certificates and private keys obtained by Certbot so
making regular backups of this folder is ideal.
- If you like Certbot, please consider supporting our work by:
Donating to ISRG / Let&lt;span class="err">&amp;#39;&lt;/span>s Encrypt: https://letsencrypt.org/donate
Donating to EFF: https://eff.org/donate-le
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="é…ç½®è™šæ‹Ÿä¸»æœº">é…ç½®è™šæ‹Ÿä¸»æœº&lt;/h2>
&lt;p>åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿä¸»æœº&lt;code>conf.d/agou-ops-top.conf&lt;/code>(ä»…ä¸ºç¤ºä¾‹):&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&amp;lt;VirtualHost *:80&amp;gt;
ServerName mail.agou-ops.top
Redirect permanent / https://mail.agou-ops.top/
&amp;lt;/VirtualHost&amp;gt;
&amp;lt;VirtualHost *:443&amp;gt;
ServerName mail.agou-ops.top
Protocols h2 http:/1.1
&amp;lt;If &lt;span class="s2">&amp;#34;%{HTTP_HOST} == &amp;#39;www.mail.agou-ops.top&amp;#39;&amp;#34;&lt;/span>&amp;gt;
Redirect permanent / https://mail.agou-ops.top/
&amp;lt;/If&amp;gt;
DocumentRoot /var/www/mail.agou-ops.top/public_html
ErrorLog &lt;span class="si">${&lt;/span>&lt;span class="nv">APACHE_LOG_DIR&lt;/span>&lt;span class="si">}&lt;/span>/mail.agou-ops.top-error.log
CustomLog &lt;span class="si">${&lt;/span>&lt;span class="nv">APACHE_LOG_DIR&lt;/span>&lt;span class="si">}&lt;/span>/mail.agou-ops.top-access.log combined
SSLEngine On
SSLCertificateFile /etc/letsencrypt/live/mail.agou-ops.top/fullchain.pem
SSLCertificateKeyFile /etc/letsencrypt/live/mail.agou-ops.top/privkey.pem
&lt;span class="c1"># Other Apache Configuration&lt;/span>
&amp;lt;/VirtualHost&amp;gt;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é‡è½½&lt;code>httpd&lt;/code>ä½¿è™šæ‹Ÿä¸»æœºé…ç½®ç”Ÿæ•ˆ:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">systemctl reload httpd
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨, å°±å¯ä»¥é€šè¿‡&lt;code>https&lt;/code>è®¿é—®ä½ çš„ç«™ç‚¹äº†: &lt;a href="https://agou-ops.top">https://agou-ops.top&lt;/a>&lt;/p>
&lt;h2 id="è‡ªåŠ¨æ›´æ–°lets-encryptè¯ä¹¦">è‡ªåŠ¨æ›´æ–°Letâ€™s Encryptè¯ä¹¦&lt;/h2>
&lt;p>&lt;code>Letâ€™s Encrypt&lt;/code>çš„è¯ä¹¦æœ‰æ•ˆæœŸä¸º90å¤©, è‡ªåŠ¨æ›´æ–°è¯ä¹¦åˆ°æœŸå‰,certbotåŒ…åˆ›å»ºä¸€ä¸ªè®¡åˆ’, ä¸€å¤©ä¸¤æ¬¡, å¹¶è‡ªåŠ¨æ›´æ–°ä»»ä½•è¯ä¹¦åˆ°æœŸå‰30å¤©.&lt;/p>
&lt;p>è§£å†³æ–¹æ³•, æ·»åŠ å®šæ—¶ä»»åŠ¡, &lt;code>/etc/cron.d/cerbot&lt;/code>, å†…å®¹å¦‚ä¸‹æ‰€ç¤º:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="m">0&lt;/span> */12 * * * root &lt;span class="nb">test&lt;/span> -x /usr/bin/certbot -a &lt;span class="se">\!&lt;/span> -d /run/systemd/system &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> perl -e &lt;span class="s1">&amp;#39;sleep int(rand(3600))&amp;#39;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> certbot -q renew --renew-hook &lt;span class="s2">&amp;#34;systemctl reload apache2&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æµ‹è¯•æ›´æ–°, ä½¿ç”¨&lt;code>certbot&lt;/code>çš„å¹²è·‘æ¨¡å¼è¿›è¡Œæµ‹è¯•:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo certbot renew --dry-run
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥&lt;/h2>
&lt;ul>
&lt;li>SSL lab: &lt;a href="https://www.ssllabs.com/">https://www.ssllabs.com/&lt;/a>&lt;/li>
&lt;li>Let&amp;rsquo;s Encrypt: &lt;a href="https://letsencrypt.org/">https://letsencrypt.org/&lt;/a>&lt;/li>
&lt;/ul>
&lt;!-- raw HTML omitted --></description></item><item><title>ã€æ—¥è®°ã€‘æœç„¶å¤§å­¦ç”Ÿéƒ½æ˜¯å»‰ä»·åŠ³åŠ¨åŠ›å—ï¼Ÿå¯æ¶ï¼</title><link>https://agou-ops.top/post/%E6%97%A5%E8%AE%B0%E6%9E%9C%E7%84%B6%E5%A4%A7%E5%AD%A6%E7%94%9F%E9%83%BD%E6%98%AF%E5%BB%89%E4%BB%B7%E5%8A%B3%E5%8A%A8%E5%8A%9B%E5%90%97%E5%8F%AF%E6%81%B6/</link><pubDate>Sun, 28 Jun 2020 22:14:03 +0800</pubDate><guid>https://agou-ops.top/post/%E6%97%A5%E8%AE%B0%E6%9E%9C%E7%84%B6%E5%A4%A7%E5%AD%A6%E7%94%9F%E9%83%BD%E6%98%AF%E5%BB%89%E4%BB%B7%E5%8A%B3%E5%8A%A8%E5%8A%9B%E5%90%97%E5%8F%AF%E6%81%B6/</guid><description>&lt;p>â€‹ &lt;code>2020å¹´06æœˆ28æ—¥&lt;/code>ï¼Œç«¯åˆâ€œä¸‰å¤©å°çŸ­å‡â€å·²ç»è¿‡å»äº†ï¼ŒæŒ‰å¸¸ç†è¯´åº”å½“æ”¾å‡ï¼Œå“ªæ€•ä¸€å¤©ä¹Ÿå¥½ï¼Œä½†æˆ‘ä»¬æ²¡æœ‰æ”¾å‡ï¼Œä¸€è¡Œäº”äººè¿˜æ˜¯åƒå¾€å¸¸ä¸€æ ·å‡ºå¤–ä¸šï¼Œç»ç†å‘¢ä¹Ÿå®Œå…¨æ²¡æœ‰ä»»ä½•è¡¨ç¤ºï¼Œå½“ç„¶æˆ‘ä¹Ÿä¸å¥¢æœ›æœ‰ä½•è¡¨ç¤ºï¼Œæ¯•ç«Ÿè¿™ä¸ªä¸œè¥¿çœ‹ä¸ªäººï¼Œå¯¹æˆ‘æ¥è¯´ä¹Ÿå°±æ— æ‰€è°“äº†ã€‚ å¯ä»Šå¤©æ˜¯å‘¨æ—¥ï¼Œåˆè®©æˆ‘ä»¬å‡ºå¤–ä¸šäº†ï¼Œæ—©ä¸Šä¸ƒç‚¹å°±æŠŠæˆ‘ä»¬å«èµ·æ¥ï¼ˆå…¶å®å…«ç‚¹åŠæ‰ä¸Šç­ï¼‰ï¼Œç­‰äº†ä¸€ä¸ªå¤šå°æ—¶æ‰å‡ºå‘ã€‚&lt;/p>
&lt;p>æ¬¸ï¼Œè¿™æ—¶å€™å¯èƒ½å°±æœ‰å°ä¼™ä¼´è¦é—®äº†ï¼Œä¸ºä»€ä¹ˆå‘¨æ—¥ä¹Ÿè¦ä¸Šç­å‘¢ï¼Ÿæ²¡æœ‰ä¼‘æ¯çš„çš„æ—¶é—´ä¹ˆï¼Œè¿™é‡Œå¼•ç”¨ç»ç†çš„ä¸€äº›è¯ï¼Œå¤§æ¦‚æ„æ€æ˜¯ï¼š&lt;/p>
&lt;blockquote>
&lt;p>é¡¹ç›®æ¯”è¾ƒâ€œç´§å¼ â€ï¼Œä¼‘æ¯çš„è¯è§†æƒ…å†µè€Œè¨€ï¼Œæ¯”å¦‚è¯´é¡¹ç›®æœ‰å¯èƒ½è¿›åº¦å¿«ï¼Œä¸åˆ°å‘¨æœ«å°±ä¼šä¼‘æ¯ï¼Œæœ‰æ—¶å€™å‘¢é¡¹ç›®â€œç´§å¼ â€ï¼Œä¹Ÿå°±ä¸ä¼‘æ¯äº†ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>â€‹ å˜¿å˜¿ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼Œé™¤éå¤–é¢ä¸‹å¤§é›¨æˆ–è€…è€ƒè¯•ä¸å·¥ä½œæ—¶é—´å†²çªæ‰ä¼šæ”¾å‡ä¼‘æ¯ï¼Œå¦åˆ™å°±åˆ«æƒ³äº†ï¼Œå“¦ï¼Œè¯´ä¸å®šå¿ƒæƒ…å¥½ä¼šç»™æ”¾åŠå¤©å‡ã€‚&lt;/p>
&lt;p>&lt;img src="https://s1.ax1x.com/2020/06/28/NR65Pf.jpg" alt="" title="å˜¿å˜¿">&lt;/p>
&lt;hr>
&lt;p>â€‹ ä½ ä¹Ÿåˆ«è·Ÿæˆ‘è¯´æ¥å®ä¹ å°±æ˜¯æ¥é”»ç‚¼è‡ªå·±çš„åƒè‹¦ç²¾ç¥çš„ï¼Œé‚£éƒ½æ˜¯æ”¾ç‹—è‡­å±ï¼Œè‡³å°‘å¯¹äºæˆ‘ä¸ªäººè€Œè¨€ï¼Œä¸éœ€è¦ã€‚ è¦ä¸æ˜¯ä¸ºäº†é‚£ç‚¹å­¦åˆ†ï¼Œå­¦æ ¡åˆå¼ºåˆ¶è¦æ±‚æ¥å®ä¹ ï¼ˆè™½ç„¶è¡¨é¢æ²¡ç›´æ¥è¯´ï¼‰ï¼Œæ‰ªå¿ƒè‡ªé—®ï¼Œè°åˆä¼šé—²ç€æ²¡äº‹æ¥å®ä¹ å‘¢ï¼Ÿè¿™é‡Œæˆ‘å¯èƒ½è¨€é‡äº†ï¼Œä½†å¯¹äºæˆ‘æˆ–è€…æˆ‘è¿™ç±»äººæ¥è¯´ï¼Œæ˜¯è¿™æ ·çš„ï¼Œæ¯•ç«Ÿæˆ‘/æˆ‘ä»¬çš„å¿—å‘ä¸åœ¨äºæ­¤ï¼Œå¯¹äºä»¥åè¦æ··è¿™ç¢—é¥­çš„äººæ¥è¯´ï¼Œå®ä¹ â€œæˆ–è®¸â€æ˜¯ä¸ªå¥½é€‰æ‹©ï¼Œä¸ºä»€ä¹ˆç”¨â€œæˆ–è®¸â€è¿™ä¸ªè¯å‘¢ï¼Œå› ä¸ºå†³å®šæ€§å› ç´ å¤ªå¤šï¼Œå­¦æ ¡ï¼ŒæŒ‡å¯¼è€å¸ˆï¼Œè¿˜æœ‰é¡¹ç›®ç»ç†ç­‰ç­‰ã€‚ã€‚ã€‚&lt;/p>
&lt;hr>
&lt;p>â€‹ æ˜¯å•Šï¼Œä»–ä»¬éƒ½èƒ½åšæŒä¸ƒå¤©æ— ä¼‘ä¸Šç­æ›´ä½•å†µæˆ‘ä»¬è¿™äº›å°é’å¹´å‘¢ï¼Ÿèƒ½è¿™ä¹ˆå•çº¯æƒ³çš„ä¹ŸçœŸæ˜¯å¤©çœŸçƒ‚æ¼«ï¼Œæ˜¯çš„ï¼Œæˆ‘ä»¬å®ä¹ ç”Ÿä¸€å¤©åœ¨å¤–é¢åˆ°å¤„è·‘ä¸€å¤©åŠ ä¸Šé¤è´¹ï¼ˆç®—ä¸Šè¡¥è´´ï¼‰å·¥èµ„æ‰å…­åå—å·¦å³ï¼Œå’Œä»–ä»¬ä¸€å¤©äºŒä¸‰ç™¾å—ï¼Œä¸‰å››ç™¾å—ç›¸æ¯”ã€‚ã€‚ã€‚ &lt;strong>å•Šï¼Œæœç„¶å¤§å­¦ç”Ÿæ˜¯å»‰ä»·åŠ³åŠ¨åŠ›ï¼Œå¯æ¶ï¼&lt;/strong> è¦æ˜¯æˆ‘æœ‰è¿™å·¥èµ„ï¼Œä¸è¯´å’Œä»–ä»¬ä¸€æ ·å·¥èµ„å¾…é‡ï¼Œæœ‰ä¸€åŠï¼Œå°±ç®—æ—©ä¸Šä¸ƒç‚¹å¼€å§‹å·¥ä½œåˆ°æ™šä¸Šä¹ç‚¹åŠåç‚¹ä¸‹ç­æˆ‘ä¹Ÿæ„¿æ„ï¼Œè¿«çœŸï¼Œå“ˆå“ˆã€‚&lt;/p>
&lt;hr>
&lt;p>â€‹ å¦å¤–å‘¢ï¼Œæˆ‘ç°åœ¨ååˆ†è®¨åŒåˆ«äººæ‹¿ä»–é‚£ä¸€è¾ˆçš„è‰°è¾›å’Œéš¾å¤„â€œæ•™å¯¼/å¼€å¯¼â€æˆ‘ä»¬è¿™äº›åè¾ˆï¼Œé‚£æ—¶å€™ç¡®å®å¾ˆéš¾ï¼Œè¿™æ˜¯æ¯‹åº¸ç½®ç–‘çš„ï¼Œæˆ‘ä¹Ÿååˆ†æ„Ÿæ¿€å‰è¾ˆä»¬çš„åŠªåŠ›å’Œä»˜å‡ºï¼Œè¿™æ‰æœ‰äº†å½“ä»Šè¿™æ ·ç¾å¥½çš„ç¤¾ä¼šã€‚ ä¹Ÿè®¸åˆä¸­é«˜ä¸­å‰è¾ˆä»¬çš„è¿™äº›è¯èƒ½æ„ŸæŸ“åˆ°æˆ‘ä»¬ï¼Œä½†ç°åœ¨é•¿å¤§äº†ï¼Œæœ‰äº›é“ç†ä¸è¨€è€Œå–»ï¼Œä¸çŸ¥ä¸è§‰ä¹‹é—´ä¹Ÿå¼€å§‹åŒæ¶è¿™äº›è¯ï¼Œç”šè‡³éº»ç—¹ï¼Œå¯¹äºè¿™äº›ï¼Œæˆ‘åªæƒ³è¯´ï¼Œæ—¶ä»£å˜äº†ï¼Œæ¯ä¸€ä»£äººéƒ½æœ‰æ¯ä¸€ä»£äººçš„çƒ¦æ¼å’Œè‰°è¾›ä¹‹å¤„ï¼Œæˆ–è®¸ä¸æ˜¯èº«ä½“ä¸Šçš„ï¼Œä½†ç²¾ç¥å’Œèº«å¿ƒä¸Šçš„çƒ¦æ¼ä¸ä¼¤å®³ï¼Œæˆ‘è§‰å¾—è¦æ¯”èº«ä½“ä¸Šçš„ä¸¥é‡ç™¾å€ä¸æ­¢ï¼&lt;/p>
&lt;hr>
&lt;p>â€‹ è¿™é‡Œåˆæ‰¯è¿œäº†ï¼Œè¿›å…¥æ­£é¢˜ã€‚â­â­&lt;/p>
&lt;p>&lt;em>&lt;strong>ä¸Šé¢è¿™äº›éƒ½ä¸æ˜¯ä»Šå¤©çœŸæ­£è®©æˆ‘æ„¤æ‡‘å†™ä¸‹è¿™ç¯‡åšå®¢çš„åŸå› &lt;/strong>&lt;/em>ï¼Œä¸æ­¢æˆ‘ä¸€äººç»™ä»–è¯´è¿‡28å·ä¸‹åˆ&lt;code>1:30-3:00&lt;/code>è€ƒVRï¼Œå¹¶ä¸”éœ€è¦æå‰è‡³å°‘åŠå°æ—¶æ¥å‡†å¤‡è€ƒè¯•ã€‚&lt;/p>
&lt;p>â€‹ å¯æ˜¯å‘¢ï¼Œä¸­åˆåä¸€ç‚¹åŠä¸‹ç­äº†è¿˜æ²¡è§åˆ°ä»–äººï¼Œå¼€è½¦ä¹Ÿä¸çŸ¥é“å»å“ªåŠäº›é‡è¦çš„ä¸šåŠ¡äº†ï¼Œæœç„¶å¤§å­¦ç”Ÿå°±æ˜¯å¤§å­¦ç”Ÿï¼Œå¯èƒ½æˆ‘ä»¬æ˜¯ä¸€äº›æ— æ‰€è°“çš„äººå§ï¼Œè¿‡äº†ååˆ†é’Ÿï¼Œä¹Ÿå°±æ˜¯åä¸€ç‚¹å››åå·¦å³ï¼Œæˆ‘è®©å’Œæˆ‘ä¸€èµ·å®ä¹ çš„åŒç­åŒå­¦æ‰“ç”µè¯ç»™ä»–ï¼Œå“ˆå“ˆï¼ŒçœŸæ˜¯æ²¡æƒ³åˆ°ï¼Œæ‰“è¿‡å»ï¼Œè¿™è¾¹å“äº†ä¸¤å£°ï¼Œé‚£è¾¹ç›´æ¥ç»™æŒ‚äº†ï¼æˆ‘æ•²ï¼Œæˆ‘è¿˜ä»¥ä¸ºåœ¨è·¯ä¸Šå‘¢ï¼Œå¿«è¦åˆ°äº†æ‰æ²¡æ¥ç”µè¯ï¼Œç»“æœå‘¢ï¼Œåˆè¿‡äº†åå‡ äºŒååˆ†é’Ÿå§ï¼Œå¤§æ¦‚åä¸€ç‚¹äº”åå¤šï¼Œä»–æ‰“ç”µè¯ç»™å¦å¤–ä¸€ä¸ªå’Œæˆ‘ä»¬ä¸€èµ·å®ä¹ çš„å¥³ç”Ÿï¼Œè¯´ä¸è¿‡æ¥äº†ï¼Œè®©æˆ‘ä»¬æ‰“è½¦å›å»ï¼Œï¼Ÿï¼Ÿï¼Ÿï¼ï¼ï¼çœŸæ˜¯ä¸ªå°æœºçµé¬¼å‘¢&amp;hellip;ä¸ªå±ã€‚ æˆ‘ä»¬åœ¨éƒŠåŒºåˆåœ¨ä¸€ä¸ªä½ç½®æ¯”è¾ƒé å¤§è·¯è¿œçš„ä¸€ä¸ªæ‘é‡Œï¼Œèƒ½æ‰“åˆ°è½¦ï¼Œæˆ‘ä¼°è®¡è€ƒè¯•éƒ½è€ƒå®Œäº†ï¼Œéšåï¼Œæœç„¶ï¼Œåœ¨æ»´æ»´ä¸Šç­‰äº†ååˆ†é’Ÿæ²¡è§ä¸ªè½¦å½±ã€‚ æœ€åï¼Œè¿™é‡Œè¦ååˆ†æ„Ÿè°¢é©¬å²­å²—æ‘é‡Œçš„é‚£ä¸ªä¹¦è®°å¤§å“¥æŠŠæˆ‘ä¿©é€å›å»ï¼Œè¿˜æœ‰ä¸€åŒå®ä¹ çš„é‚£ä¸ªå¥³ç”Ÿå¸®æˆ‘ä»¬è¯´æ¸…æ¥šåŸå› è®©å¤§å“¥å¸¦æˆ‘ä»¬å›å»è€ƒè¯•ï¼ŒçœŸæ˜¯ååˆ†æ„Ÿè°¢ã€‚&lt;/p>
&lt;hr>
&lt;p>ä»¥ä¸Šéƒ½åªæ˜¯æˆ‘çš„ä¸ªäººè§‚ç‚¹ï¼Œæƒ³æ‰¯æ·¡çš„è¯ï¼Œå¯ä»¥åœ¨ä¸‹æ–¹è¯„è®ºåŒºå’Œæˆ‘ä¸€èµ·äº¤æµäº¤æµè¿™æ–¹é¢çš„ä¸€äº›ä¸œè¥¿ã€‚&lt;/p>
&lt;p>åœ¨æ­¤ï¼Œæœ€åä¸€æ¬¡å‘ä¸‡æ¶çš„èµ„æœ¬ä¸»ä¹‰ä½å¤´ã€‚&lt;/p>
&lt;p>&lt;img src="https://s1.ax1x.com/2020/06/28/NR6IG8.jpg" alt="">&lt;/p></description></item><item><title>ã€æ—¥è®°ã€‘é©¬å²­å²—æ‘å®ä¹ </title><link>https://agou-ops.top/post/%E6%97%A5%E8%AE%B0%E9%A9%AC%E5%B2%AD%E5%B2%97%E6%9D%91%E5%AE%9E%E4%B9%A0/</link><pubDate>Thu, 25 Jun 2020 20:44:20 +0800</pubDate><guid>https://agou-ops.top/post/%E6%97%A5%E8%AE%B0%E9%A9%AC%E5%B2%AD%E5%B2%97%E6%9D%91%E5%AE%9E%E4%B9%A0/</guid><description>&lt;p>è‹¦é€¼çš„å®ä¹ å·²ç»è¿›è¡Œåˆ°ç¬¬ä¸‰å¤©ï¼Œå¤©æ°”ä¸€å¤©æ¯”ä¸€å¤©çƒ­ï¼Œä¸è¿‡å€¼å¾—é«˜å…´çš„æ˜¯ï¼Œä¸ç”¨å†ä¸€ä¸€è¿›æˆ·å¯¹æ‰€æœ‰æˆ¿å±‹è¿›è¡Œæµ‹é‡äº†ï¼Œå‡å°‘äº†äº†ä¸å°‘çš„å·¥ä½œé‡ï¼Œå› ä¸ºæ˜¨å¤©ä¸‹åˆå·²ç»ç”¨&lt;code>RTK&lt;/code>æµ‹é‡å¥½äº†æ§åˆ¶ç‚¹ï¼Œé‚£äº›æ— æ•°æœ¨é®æŒ¡çš„å»ºç­‘ç‰©å°±å¯ä»¥ç›´æ¥ç”¨æ— äººæœºè¿›è¡Œæµ‹é‡äº†ã€‚æ— éœ€äººå·¥å†æµ‹é‡ã€‚&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/daily/IMG_20200624_170305.jpg" alt="æµ‹é‡ing" title="æµ‹é‡ing">&lt;/p>
&lt;p>å¦å¤–å‘¢ï¼Œè¿™é‡Œçš„æ‘æ°‘ååˆ†çš„çƒ­å¿ƒå¥½å®¢ï¼Œå¤©æ°”ç‚çƒ­ï¼Œç»™æˆ‘ä»¬åˆ‡è¥¿ç“œå’Œå†°æ£åƒï¼Œå“ˆå“ˆï¼Œæˆ‘ä»¬ä¸‰äººåƒäº†ä¸€è·¯ï¼ˆå½“ç„¶æ²¡è¿™ä¹ˆå¤¸å¼ ï¼‰ï¼ŒçœŸæ˜¯ä¸é”™å‘¢ã€‚&lt;/p>
&lt;p>å¦é™„ä¸€å¼ æ‘æ°‘å®¶é‡Œé‡åˆ°çš„å±±ç¾Šå…„å¼Ÿï¼š&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/daily/IMG_20200625_165318.jpg" alt="å±±ç¾Šå…„å¼Ÿ" title="å±±ç¾Šå…„å¼Ÿ">&lt;/p>
&lt;p>å•Šï¼Œè¿˜æœ‰å¥½å¤šæˆ·è¦é‡ï¼ŒåšæŒåšæŒï¼Œä¹Ÿå°±è¿™å‡ å¤©äº†ï¼Œæ¸¯å·´å˜šï¼&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/daily/IMG_20200624_093738.jpg" alt="">&lt;/p></description></item><item><title>Linux æ—¥å¿—åˆ†å‰²å·¥å…·-splitå’Œlogrotate</title><link>https://agou-ops.top/post/linux-%E6%97%A5%E5%BF%97%E5%88%86%E5%89%B2%E5%B7%A5%E5%85%B7/</link><pubDate>Mon, 22 Jun 2020 08:45:13 +0800</pubDate><guid>https://agou-ops.top/post/linux-%E6%97%A5%E5%BF%97%E5%88%86%E5%89%B2%E5%B7%A5%E5%85%B7/</guid><description>&lt;p>æœ¬æ–‡ä¸»è¦ä»‹ç»Linuxç³»ç»Ÿä¸‹çš„æ—¥å¿—åˆ†å‰²å·¥å…·ï¼Œ&lt;code>Split&lt;/code> å’Œ &lt;code>Logrotate&lt;/code>ã€‚&lt;/p>
&lt;h2 id="split">Split&lt;/h2>
&lt;p>Linux ç³»ç»Ÿè‡ªå¸¦ç®€å•æ—¥å¿—æ–‡ä»¶åˆ†å‰²å·¥å…·ã€‚&lt;/p>
&lt;p>å¸¸ç”¨å‚æ•°åˆ—è¡¨ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>é€‰é¡¹&lt;/th>
&lt;th>å«ä¹‰&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>-b&lt;/td>
&lt;td>åˆ†å‰²åçš„æ–‡æ¡£å¤§å°ï¼Œå•ä½æ˜¯byte&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-C&lt;/td>
&lt;td>åˆ†å‰²åçš„æ–‡æ¡£ï¼Œå•è¡Œæœ€å¤§byteæ•°&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-d&lt;/td>
&lt;td>ä½¿ç”¨æ•°å­—ä½œä¸ºåç¼€(default: å­—æ¯)ï¼ŒåŒæ—¶ä½¿ç”¨-a length(default: 2)æŒ‡å®šåç¼€é•¿åº¦&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-l&lt;/td>
&lt;td>åˆ†å‰²åæ–‡æ¡£çš„è¡Œæ•°&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ndash;verbose&lt;/td>
&lt;td>æ˜¾ç¤ºè¾“å‡ºè¯¦ç»†ä¿¡æ¯&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">split -l --verbose &lt;span class="m">1000000&lt;/span> split.test -d -a &lt;span class="m">3&lt;/span> split.log
â•°â”€$ ls
split.test split.test008 split.test017 split.test026
split.test000 split.test009 split.test018 split.test027
split.test001 split.test010 split.test019 split.test028
split.test002 split.test011 split.test020 split.test029
split.test003 split.test012 split.test021 split.test030
split.test004 split.test013 split.test022 split.test031
split.test005 split.test014 split.test023 split.test032
split.test006 split.test015 split.test024 split.test033
split.test007 split.test016 split.test025
...
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="logrotate">Logrotate&lt;/h2>
&lt;h3 id="ç®€ä»‹åŠè§£å†³æ–¹æ¡ˆ">ç®€ä»‹åŠè§£å†³æ–¹æ¡ˆ&lt;/h3>
&lt;p>Logrotateï¼Œå³&lt;code>Log rotation&lt;/code>æ—¥å¿—æ»šåŠ¨ï¼Œå±äºLinuxç³»ç»Ÿè‡ªå¸¦å·¥å…·ï¼ŒåŸºäº&lt;code>crontab&lt;/code>å®ç°æ—¶é—´ç‚¹æ»šåŠ¨æ—¥å¿—ï¼Œè®¡åˆ’æ¯å¤©è¿è¡Œçš„è„šæœ¬ä½äº &lt;code>/etc/cron.daily/logrotate&lt;/code>ã€‚&lt;/p>
&lt;p>GitHub åœ°å€ï¼šhttps://github.com/logrotate/logrotate&lt;/p>
&lt;blockquote>
&lt;p>logrotate æ˜¯æ€ä¹ˆåšåˆ°æ»šåŠ¨æ—¥å¿—æ—¶ä¸å½±å“ç¨‹åºæ­£å¸¸çš„æ—¥å¿—è¾“å‡ºå‘¢ï¼Ÿlogrotate æä¾›äº†ä¸¤ç§è§£å†³æ–¹æ¡ˆã€‚&lt;/p>
&lt;ol>
&lt;li>create&lt;/li>
&lt;li>copytruncate&lt;/li>
&lt;/ol>
&lt;h3 id="create">create&lt;/h3>
&lt;p>è¿™ä¹Ÿå°±æ˜¯é»˜è®¤çš„æ–¹æ¡ˆï¼Œå¯ä»¥é€šè¿‡ create å‘½ä»¤é…ç½®æ–‡ä»¶çš„æƒé™å’Œå±ç»„è®¾ç½®ï¼›è¿™ä¸ªæ–¹æ¡ˆçš„æ€è·¯æ˜¯é‡å‘½ååŸæ—¥å¿—æ–‡ä»¶ï¼Œåˆ›å»ºæ–°çš„æ—¥å¿—æ–‡ä»¶ã€‚è¯¦ç»†æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>é‡å‘½åæ­£åœ¨è¾“å‡ºæ—¥å¿—æ–‡ä»¶ï¼Œå› ä¸ºé‡å‘½ååªä¿®æ”¹ç›®å½•ä»¥åŠæ–‡ä»¶çš„åç§°ï¼Œè€Œè¿›ç¨‹æ“ä½œæ–‡ä»¶ä½¿ç”¨çš„æ˜¯ inodeï¼Œæ‰€ä»¥å¹¶ä¸å½±å“åŸç¨‹åºç»§ç»­è¾“å‡ºæ—¥å¿—ã€‚&lt;/li>
&lt;li>åˆ›å»ºæ–°çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ–‡ä»¶åå’ŒåŸæ—¥å¿—æ–‡ä»¶ä¸€æ ·ï¼Œæ³¨æ„ï¼Œæ­¤æ—¶åªæ˜¯æ–‡ä»¶åç§°ä¸€æ ·ï¼Œè€Œ inode ç¼–å·ä¸åŒï¼ŒåŸç¨‹åºè¾“å‡ºçš„æ—¥å¿—è¿˜æ˜¯å¾€åŸæ—¥å¿—æ–‡ä»¶è¾“å‡ºã€‚&lt;/li>
&lt;li>æœ€åé€šè¿‡æŸäº›æ–¹å¼é€šçŸ¥ç¨‹åºï¼Œé‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶ï¼›ç”±äºé‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶ä¼šç”¨åˆ°æ–‡ä»¶è·¯å¾„è€Œé inode ç¼–å·ï¼Œæ‰€ä»¥æ‰“å¼€çš„æ˜¯æ–°çš„æ—¥å¿—æ–‡ä»¶ã€‚&lt;/li>
&lt;/ol>
&lt;p>å¦‚ä¸Šä¹Ÿå°±æ˜¯ logrotate çš„é»˜è®¤æ“ä½œæ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ mv+create æ‰§è¡Œå®Œä¹‹åï¼Œé€šçŸ¥åº”ç”¨é‡æ–°åœ¨æ–°æ–‡ä»¶å†™å…¥å³å¯ã€‚mv+create æˆæœ¬éƒ½æ¯”è¾ƒä½ï¼Œå‡ ä¹æ˜¯åŸå­æ“ä½œï¼Œå¦‚æœåº”ç”¨æ”¯æŒé‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶ï¼Œå¦‚ syslog, nginx, mysql ç­‰ï¼Œé‚£ä¹ˆè¿™æ˜¯æœ€å¥½çš„æ–¹å¼ã€‚&lt;/p>
&lt;p>ä¸è¿‡ï¼Œæœ‰äº›ç¨‹åºå¹¶ä¸æ”¯æŒè¿™ç§æ–¹å¼ï¼Œå‹æ ¹æ²¡æœ‰æä¾›é‡æ–°æ‰“å¼€æ—¥å¿—çš„æ¥å£ï¼›è€Œå¦‚æœé‡å¯åº”ç”¨ç¨‹åºï¼Œå¿…ç„¶ä¼šé™ä½å¯ç”¨æ€§ï¼Œä¸ºæ­¤å¼•å…¥äº†å¦‚ä¸‹æ–¹å¼ã€‚&lt;/p>
&lt;h3 id="copytruncate">copytruncate&lt;/h3>
&lt;p>è¯¥æ–¹æ¡ˆæ˜¯æŠŠæ­£åœ¨è¾“å‡ºçš„æ—¥å¿—æ‹· (copy) ä¸€ä»½å‡ºæ¥ï¼Œå†æ¸…ç©º (trucate) åŸæ¥çš„æ—¥å¿—ï¼›è¯¦ç»†æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>å°†å½“å‰æ­£åœ¨è¾“å‡ºçš„æ—¥å¿—æ–‡ä»¶å¤åˆ¶ä¸ºç›®æ ‡æ–‡ä»¶ï¼Œæ­¤æ—¶ç¨‹åºä»ç„¶å°†æ—¥å¿—è¾“å‡ºåˆ°åŸæ¥æ–‡ä»¶ä¸­ï¼Œæ­¤æ—¶ï¼ŒåŸæ–‡ä»¶åä¹Ÿæ²¡æœ‰å˜ã€‚&lt;/li>
&lt;li>æ¸…ç©ºæ—¥å¿—æ–‡ä»¶ï¼ŒåŸç¨‹åºä»ç„¶è¿˜æ˜¯è¾“å‡ºåˆ°é¢„æ¡ˆæ—¥å¿—æ–‡ä»¶ä¸­ï¼Œå› ä¸ºæ¸…ç©ºæ–‡ä»¶åªæŠŠæ–‡ä»¶çš„å†…å®¹åˆ é™¤äº†ï¼Œè€Œ inode å¹¶æ²¡æ”¹å˜ï¼Œåç»­æ—¥å¿—çš„è¾“å‡ºä»ç„¶å†™å…¥è¯¥æ–‡ä»¶ä¸­ã€‚&lt;/li>
&lt;/ol>
&lt;p>å¦‚ä¸Šæ‰€è¿°ï¼Œå¯¹äº copytruncate ä¹Ÿå°±æ˜¯å…ˆå¤åˆ¶ä¸€ä»½æ–‡ä»¶ï¼Œç„¶åæ¸…ç©ºåŸæœ‰æ–‡ä»¶ã€‚&lt;/p>
&lt;p>é€šå¸¸æ¥è¯´ï¼Œæ¸…ç©ºæ“ä½œæ¯”è¾ƒå¿«ï¼Œä½†æ˜¯å¦‚æœæ—¥å¿—æ–‡ä»¶å¤ªå¤§ï¼Œé‚£ä¹ˆå¤åˆ¶å°±ä¼šæ¯”è¾ƒè€—æ—¶ï¼Œä»è€Œå¯èƒ½å¯¼è‡´éƒ¨åˆ†æ—¥å¿—ä¸¢å¤±ã€‚ä¸è¿‡è¿™ç§æ–¹å¼ä¸éœ€è¦åº”ç”¨ç¨‹åºçš„æ”¯æŒå³å¯ã€‚&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>æ‰§è¡Œæ–‡ä»¶ï¼š &lt;code>/usr/sbin/logrotate&lt;/code>&lt;/li>
&lt;li>ä¸»é…ç½®æ–‡ä»¶: &lt;code>/etc/logrotate.conf&lt;/code>&lt;/li>
&lt;li>è‡ªå®šä¹‰é…ç½®æ–‡ä»¶: &lt;code>/etc/logrotate.d/*.conf&lt;/code>&lt;/li>
&lt;li>æ‰§è¡ŒçŠ¶æ€æ–‡ä»¶ï¼š&lt;code>/var/lib/logrotate/logrotate.status&lt;/code>&lt;/li>
&lt;/ul>
&lt;h3 id="è¿è¡Œ-logrotate">è¿è¡Œ logrotate&lt;/h3>
&lt;p>logrotate å‘½ä»¤æ ¼å¼åŠå¸¸ç”¨å‚æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">logrotate &lt;span class="o">[&lt;/span>-dv&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-f&lt;span class="p">|&lt;/span>--force&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-s&lt;span class="p">|&lt;/span>--state file&lt;span class="o">]&lt;/span> config_file ..
-d, --debug ï¼šdebug æ¨¡å¼ï¼Œæµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰é”™è¯¯ï¼Œå¹¶ä¸ä¼šçœŸæ­£æ‰§è¡Œ rorate å’Œ compose æ“ä½œï¼Œä½†æ˜¯ä¼šæ‰“å°å‡ºæ•´ä¸ªæ‰§è¡Œçš„æµç¨‹ï¼Œå’Œè°ƒç”¨çš„è„šæœ¬ç­‰è¯¦ç»†ä¿¡æ¯ã€‚
-f, --force ï¼šå¼ºåˆ¶è½¬å‚¨æ–‡ä»¶ã€‚
-m, --mail&lt;span class="o">=&lt;/span>&lt;span class="nb">command&lt;/span> ï¼šå‹ç¼©æ—¥å¿—åï¼Œå‘é€æ—¥å¿—åˆ°æŒ‡å®šé‚®ç®±ã€‚
-s, --state&lt;span class="o">=&lt;/span>statefile ï¼šä½¿ç”¨æŒ‡å®šçš„çŠ¶æ€æ–‡ä»¶ã€‚
-v, --verbose ï¼šæ˜¾ç¤ºè¯¦ç»†è½¬å‚¨è¿‡ç¨‹ã€‚
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šå¸¸ä½¿ç”¨çš„æ–¹æ³•æ˜¯é…åˆ&lt;code>crontab&lt;/code>æ¥è¿è¡Œï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">crontab -e
*/30 * * * * /usr/sbin/logrotate /etc/logrotate.d/rsyslog &amp;gt; /dev/null 2&amp;gt;&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="p">&amp;amp;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰‹åŠ¨è°ƒç”¨ logrotateï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># è°ƒç”¨ /etc/lograte.d/ ä¸‹é…ç½®çš„æ‰€æœ‰æ—¥å¿—&lt;/span>
logrotate /etc/logrotate.conf
&lt;span class="c1"># è¦ä¸ºæŸä¸ªç‰¹å®šçš„é…ç½®è°ƒç”¨ logrotate&lt;/span>
logrotate -d /etc/logrotate.d/log_file &lt;span class="c1"># å¼€å¯debugæ¨¡å¼ï¼Œä¸å®é™…ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ã€‚&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="é…ç½®æ–‡ä»¶è¯¦è§£">é…ç½®æ–‡ä»¶è¯¦è§£&lt;/h3>
&lt;p>è¿™é‡Œä»¥ç³»ç»Ÿè‡ªå¸¦çš„éƒ¨åˆ†&lt;code>/etc/logrotate.d/rsyslog&lt;/code>é…ç½®æ–‡ä»¶ä¸ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">/var/log/syslog
&lt;span class="o">{&lt;/span>
rotate &lt;span class="m">7&lt;/span>
daily
missingok
notifempty
delaycompress
compress
postrotate
/usr/lib/rsyslog/rsyslog-rotate
endscript
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;code>monthly&lt;/code>: æ—¥å¿—æ–‡ä»¶å°†æŒ‰æœˆè½®å¾ªã€‚å…¶å®ƒå¯ç”¨å€¼ä¸º &lt;code>daily&lt;/code>ï¼Œ&lt;code>weekly&lt;/code> æˆ–è€… &lt;code>yearly&lt;/code>ã€‚&lt;/li>
&lt;li>&lt;code>rotate 5&lt;/code>: ä¸€æ¬¡å°†å­˜å‚¨ 5 ä¸ªå½’æ¡£æ—¥å¿—ã€‚å¯¹äºç¬¬å…­ä¸ªå½’æ¡£ï¼Œæ—¶é—´æœ€ä¹…çš„å½’æ¡£å°†è¢«åˆ é™¤ã€‚&lt;/li>
&lt;li>&lt;code>compress&lt;/code>: åœ¨è½®å¾ªä»»åŠ¡å®Œæˆåï¼Œå·²è½®å¾ªçš„å½’æ¡£å°†ä½¿ç”¨ &lt;code>gzip&lt;/code> è¿›è¡Œå‹ç¼©ã€‚&lt;/li>
&lt;li>&lt;code>delaycompress&lt;/code>: æ€»æ˜¯ä¸ compress é€‰é¡¹ä¸€èµ·ç”¨ï¼Œdelaycompress é€‰é¡¹æŒ‡ç¤º logrotate &lt;em>ä¸è¦å°†æœ€è¿‘çš„å½’æ¡£å‹ç¼©&lt;/em>ï¼Œå‹ç¼© å°†åœ¨ä¸‹ä¸€æ¬¡è½®å¾ªå‘¨æœŸè¿›è¡Œã€‚è¿™åœ¨ä½ æˆ–ä»»ä½•è½¯ä»¶ä»ç„¶éœ€è¦è¯»å–æœ€æ–°å½’æ¡£æ—¶å¾ˆæœ‰ç”¨ã€‚&lt;/li>
&lt;li>&lt;code>missingok&lt;/code>: åœ¨æ—¥å¿—è½®å¾ªæœŸé—´ï¼Œä»»ä½•é”™è¯¯å°†è¢«å¿½ç•¥ï¼Œä¾‹å¦‚ â€œæ–‡ä»¶æ— æ³•æ‰¾åˆ°â€ ä¹‹ç±»çš„é”™è¯¯ã€‚&lt;/li>
&lt;li>&lt;code>notifempty&lt;/code>: å¦‚æœæ—¥å¿—æ–‡ä»¶ä¸ºç©ºï¼Œè½®å¾ªä¸ä¼šè¿›è¡Œã€‚&lt;/li>
&lt;li>&lt;code>create 644 root root&lt;/code>: ä»¥æŒ‡å®šçš„æƒé™åˆ›å»ºå…¨æ–°çš„æ—¥å¿—æ–‡ä»¶ï¼ŒåŒæ—¶ logrotate ä¹Ÿä¼šé‡å‘½ååŸå§‹æ—¥å¿—æ–‡ä»¶ã€‚&lt;/li>
&lt;li>&lt;code>postrotate/endscript&lt;/code>: åœ¨æ‰€æœ‰å…¶å®ƒæŒ‡ä»¤å®Œæˆåï¼Œpostrotate å’Œ endscript é‡Œé¢æŒ‡å®šçš„å‘½ä»¤å°†è¢«æ‰§è¡Œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œrsyslogd è¿›ç¨‹å°†ç«‹å³å†æ¬¡è¯»å–å…¶é…ç½®å¹¶ç»§ç»­è¿è¡Œã€‚&lt;/li>
&lt;/ul>
&lt;p>å…¶ä»–å¸¸ç”¨å‚æ•°ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>tabooext [+] list&lt;/code>:è®© logrotate ä¸è½¬å‚¨æŒ‡å®šæ‰©å±•åçš„æ–‡ä»¶ï¼Œç¼ºçœçš„æ‰©å±•åæ˜¯.rpm-orig, .rpmsave, v, å’Œï½&lt;/li>
&lt;li>&lt;code>missingok&lt;/code>:åœ¨æ—¥å¿—è½®å¾ªæœŸé—´ï¼Œä»»ä½•é”™è¯¯å°†è¢«å¿½ç•¥ï¼Œä¾‹å¦‚ â€œæ–‡ä»¶æ— æ³•æ‰¾åˆ°â€ ä¹‹ç±»çš„é”™è¯¯ã€‚&lt;/li>
&lt;li>&lt;code>size size&lt;/code>:å½“æ—¥å¿—æ–‡ä»¶åˆ°è¾¾æŒ‡å®šçš„å¤§å°æ—¶æ‰è½¬å‚¨ï¼Œbytes (ç¼ºçœ) åŠ KB (sizek) æˆ– MB (sizem)&lt;/li>
&lt;li>&lt;code>copytruncate&lt;/code>:ç”¨äºè¿˜åœ¨æ‰“å¼€ä¸­çš„æ—¥å¿—æ–‡ä»¶ï¼ŒæŠŠå½“å‰æ—¥å¿—å¤‡ä»½å¹¶æˆªæ–­&lt;/li>
&lt;li>&lt;code>nocopytruncate&lt;/code>: å¤‡ä»½æ—¥å¿—æ–‡ä»¶ä½†æ˜¯ä¸æˆªæ–­&lt;/li>
&lt;li>&lt;code>create mode owner group &lt;/code>: è½¬å‚¨æ–‡ä»¶ï¼Œä½¿ç”¨æŒ‡å®šçš„æ–‡ä»¶æ¨¡å¼åˆ›å»ºæ–°çš„æ—¥å¿—æ–‡ä»¶&lt;/li>
&lt;li>&lt;code>nocreate&lt;/code>: ä¸å»ºç«‹æ–°çš„æ—¥å¿—æ–‡ä»¶&lt;/li>
&lt;li>&lt;code>nodelaycompress&lt;/code>: è¦†ç›– delaycompress é€‰é¡¹ï¼Œè½¬å‚¨åŒæ—¶å‹ç¼©ã€‚&lt;/li>
&lt;li>&lt;code>errors address &lt;/code>: ä¸“å‚¨æ—¶çš„é”™è¯¯ä¿¡æ¯å‘é€åˆ°æŒ‡å®šçš„ Email åœ°å€&lt;/li>
&lt;li>&lt;code>ifempty &lt;/code>:å³ä½¿æ˜¯ç©ºæ–‡ä»¶ä¹Ÿè½¬å‚¨ï¼Œè¿™ä¸ªæ˜¯ logrotate çš„ç¼ºçœé€‰é¡¹ã€‚&lt;/li>
&lt;li>&lt;code>mail address &lt;/code>: æŠŠè½¬å‚¨çš„æ—¥å¿—æ–‡ä»¶å‘é€åˆ°æŒ‡å®šçš„ E-mail åœ°å€&lt;/li>
&lt;li>&lt;code>nomail &lt;/code>: è½¬å‚¨æ—¶ä¸å‘é€æ—¥å¿—æ–‡ä»¶&lt;/li>
&lt;li>&lt;code>olddir directory&lt;/code>:å‚¨åçš„æ—¥å¿—æ–‡ä»¶æ”¾å…¥æŒ‡å®šçš„ç›®å½•ï¼Œå¿…é¡»å’Œå½“å‰æ—¥å¿—æ–‡ä»¶åœ¨åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ&lt;/li>
&lt;li>&lt;code>noolddir&lt;/code>: è½¬å‚¨åçš„æ—¥å¿—æ–‡ä»¶å’Œå½“å‰æ—¥å¿—æ–‡ä»¶æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹&lt;/li>
&lt;/ul>
&lt;h3 id="logrotate-æ—¥å¿—åˆ‡å‰²è½®è¯¢">logrotate æ—¥å¿—åˆ‡å‰²è½®è¯¢&lt;/h3>
&lt;p>ç”±äº logrotate æ˜¯åŸºäº&lt;code>cron&lt;/code>è¿è¡Œçš„ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¥å¿—è½®è½¬çš„æ—¶é—´æ˜¯ç”± cron æ§åˆ¶çš„ï¼Œå…·ä½“å¯ä»¥æŸ¥è¯¢ cron çš„é…ç½®æ–‡ä»¶ &lt;code>/etc/anacrontab&lt;/code>ï¼Œè¿‡å¾€çš„è€ç‰ˆæœ¬çš„æ–‡ä»¶ä¸ºï¼ˆ&lt;code>/etc/crontab&lt;/code>ï¼‰&lt;/p>
&lt;p>ä½¿ç”¨ crontab æ¥ä½œä¸ºæ—¥å¿—è½®è½¬çš„è§¦å‘å®¹å™¨æ¥ä¿®æ”¹ logrotate é»˜è®¤æ‰§è¡Œæ—¶é—´ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ vim /etc/crontab
&lt;span class="c1"># åˆ‡å‰²æ—¶é—´ä¸ºæ¯å¤©æ™šä¸Šçš„12ç‚¹é’Ÿ&lt;/span>
&lt;span class="nv">SHELL&lt;/span>&lt;span class="o">=&lt;/span>/bin/bash
&lt;span class="nv">PATH&lt;/span>&lt;span class="o">=&lt;/span>/sbin:/bin:/usr/sbin:/usr/bin
&lt;span class="nv">MAILTO&lt;/span>&lt;span class="o">=&lt;/span>root
&lt;span class="nv">HOME&lt;/span>&lt;span class="o">=&lt;/span>/
&lt;span class="c1"># run-parts&lt;/span>
&lt;span class="m">01&lt;/span> * * * * root run-parts /etc/cron.hourly
&lt;span class="m">59&lt;/span> &lt;span class="m">23&lt;/span> * * * root run-parts /etc/cron.daily
&lt;span class="m">22&lt;/span> &lt;span class="m">4&lt;/span> * * &lt;span class="m">0&lt;/span> root run-parts /etc/cron.weekly
&lt;span class="m">42&lt;/span> &lt;span class="m">4&lt;/span> &lt;span class="m">1&lt;/span> * * root run-parts /etc/cron.monthly
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="é™„logrotate-é…ç½®æ–‡ä»¶ç¤ºä¾‹">é™„ï¼šlogrotate é…ç½®æ–‡ä»¶ç¤ºä¾‹&lt;/h3>
&lt;ul>
&lt;li>syslog&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">[root@gop-sg-192-168-56-103 logrotate.d]# cat syslog
/var/log/cron
/var/log/maillog
/var/log/messages
/var/log/secure
/var/log/spooler
{
missingok
sharedscripts
postrotate
/bin/kill -HUP `cat /var/run/syslogd.pid 2&amp;gt; /dev/null` 2&amp;gt; /dev/null || true
endscript
}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>zabbix-agent&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">[root@gop-sg-192-168-56-103 logrotate.d]# cat zabbix-agent
/var/log/zabbix/zabbix_agentd.log {
weekly
rotate 12
compress
delaycompress
missingok
notifempty
create 0664 zabbix zabbix
}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>nginx&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">[root@gop-sg-192-168-56-103 logrotate.d]# cat nginx
/var/log/nginx/*.log /var/log/nginx/*/*.log{
daily
missingok
rotate 14
compress
delaycompress
notifempty
create 640 root adm
sharedscripts
postrotate
[ ! -f /var/run/nginx.pid ] || kill -USR1 `cat /var/run/nginx.pid`
endscript
}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>influxdb&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">[root@gop-sg-192-168-56-103 logrotate.d]# cat influxdb
/var/log/influxdb/access.log {
daily
rotate 7
missingok
dateext
copytruncate
compress
}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Linux ç³»ç»Ÿèµ„æºç›‘æ§é¢æ¿</title><link>https://agou-ops.top/post/linux-%E7%B3%BB%E7%BB%9F%E8%B5%84%E6%BA%90%E7%9B%91%E6%8E%A7%E9%9D%A2%E6%9D%BF/</link><pubDate>Fri, 12 Jun 2020 19:40:55 +0800</pubDate><guid>https://agou-ops.top/post/linux-%E7%B3%BB%E7%BB%9F%E8%B5%84%E6%BA%90%E7%9B%91%E6%8E%A7%E9%9D%A2%E6%9D%BF/</guid><description>&lt;p>&lt;code>WTF&lt;/code>å’Œ&lt;code>bashtop&lt;/code>æ˜¯æˆ‘ä¸ªäººç›®å‰åœ¨ç”¨çš„ç³»ç»Ÿèµ„æºç®¡ç†é¢æ¿ï¼Œç•Œé¢éå¸¸çš„ç¾è§‚ï¼Œæå…·æå®¢é£èŒƒï¼Œåœ¨è¿™é‡Œæˆ‘åˆ†åˆ«åšç®€å•ä»‹ç»ã€‚&lt;/p>
&lt;h2 id="wtf">WTF&lt;/h2>
&lt;blockquote>
&lt;p>WTFï¼ˆåˆåâ€œwtfutilâ€ï¼‰æ˜¯ç»ˆç«¯çš„ä¸ªäººä¿¡æ¯ä»ªè¡¨æ¿ï¼Œå¯å¿«é€Ÿè®¿é—®æ‚¨éå¸¸é‡è¦ä½†ä¸å¸¸éœ€è¦çš„ç»Ÿè®¡ä¿¡æ¯å’Œæ•°æ®ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>é¡¹ç›®åœ°å€ï¼š&lt;a href="https://github.com/wtfutil/wtf">https://github.com/wtfutil/wtf&lt;/a>&lt;/p>
&lt;p>å®˜æ–¹ç«™ç‚¹ï¼š&lt;a href="https://wtfutil.com/">https://wtfutil.com/&lt;/a>&lt;/p>
&lt;p>å…ˆæ”¾ä¸€å¼ æˆªå›¾å§ï¼š&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/Linux%20%E7%9B%91%E6%8E%A7%E9%9D%A2%E6%9D%BF/WTF.png" alt="" title="WTFæˆªå›¾">&lt;/p>
&lt;p>é¢æ¿ä¸­æœ‰ä»¥ä¸‹å±•ç¤ºæ¨¡å—ï¼š&lt;/p>
&lt;ul>
&lt;li>ä¸–ç•Œæ—¶é—´&lt;/li>
&lt;li>æˆ‘çš„IPåœ°å€ä¿¡æ¯&lt;/li>
&lt;li>TODO Listï¼ˆå¾…åŠäº‹ä»¶ï¼‰&lt;/li>
&lt;li>ç³»ç»Ÿå®‰å…¨çŠ¶æ€&lt;/li>
&lt;li>å½“å‰åŸå¸‚å¤©æ°”&lt;/li>
&lt;li>ç”µæºä½¿ç”¨æƒ…å†µ&lt;/li>
&lt;li>docker è¿è¡ŒçŠ¶æ€&lt;/li>
&lt;li>èµ„æºä½¿ç”¨æƒ…å†µ&lt;/li>
&lt;li>ç¡¬ç›˜å ç”¨æƒ…å†µ&lt;/li>
&lt;li>å¼€æœºæ—¶é•¿&lt;/li>
&lt;/ul>
&lt;p>å¥½äº†ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥å¼€å§‹å§ã€‚&lt;/p>
&lt;h3 id="å®‰è£…ä¸ä½¿ç”¨">å®‰è£…ä¸ä½¿ç”¨&lt;/h3>
&lt;p>é¦–å…ˆæ‰“å¼€é¡¹ç›®çš„ &lt;a href="https://github.com/wtfutil/wtf/releases">releaseä»“åº“&lt;/a> ä¸‹è½½å¯ç›´æ¥ä½¿ç”¨çš„äºŒè¿›åˆ¶åŒ….&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">wget https://github.com/wtfutil/wtf/releases/download/v0.30.0/wtf_0.30.0_linux_amd64.tar.gz
tar xf wtf_0.30.0_linux_amd64.tar.gz
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è§£å‹å®Œæˆä¹‹åï¼Œç›´æ¥è¿è¡Œ&lt;code>./wtfutil&lt;/code>å³å¯ï¼Œä¸ºäº†æ—¥åæ–¹ä¾¿ä½¿ç”¨ï¼Œå¯ä»¥å°†è¯¥ç¨‹åºè½¯è¿æ¥åˆ°ç”¨æˆ·&lt;code>bin&lt;/code>ç›®å½•è¿›è¡Œä½¿ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">ln -sv /root/wtfutil /usr/bin/
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="é…ç½®æ–‡ä»¶">é…ç½®æ–‡ä»¶&lt;/h3>
&lt;p>ä¸‹é¢æ˜¯æˆ‘çš„é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶çš„ç›®å½•æ˜¯&lt;code>$HOME/.config/wtf/config.yml&lt;/code>ï¼Œå¯ä»¥æ‹¿æ¥å‚è€ƒå‚è€ƒï¼š&lt;/p>
&lt;p>â„¹ï¸æ–‡ä»¶æ¯”è¾ƒé•¿ï¼Œå•å‡»&lt;a href="#%E5%AE%98%E6%96%B9%E6%94%AF%E6%8C%81%E6%A8%A1%E5%9D%97">&amp;raquo;&amp;gt; è¿™é‡Œ &amp;laquo;&amp;lt;&lt;/a>å¯ç›´æ¥è·³åˆ°ä¸‹ä¸€èŠ‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="k">wtf&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">colors&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">background&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>black&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">border&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">focusable&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>darkslateblue&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">focused&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>orange&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">normal&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>gray&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">checked&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>yellow&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">highlight&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">fore&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>black&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">back&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>gray&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">rows&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">even&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>yellow&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">odd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>white&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">grid&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">columns&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">40&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">35&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">35&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">55&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">rows&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">4&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">openFileUtil&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;open&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">mods&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">digitalclock&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">color&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>red&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">font&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>digitalfont&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">hourFormat&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">24&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;big clock&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;digitalclock&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">world_time&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;World Time&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>clocks&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">colors&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">rows&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">even&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;lightblue&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">odd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;white&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">locations&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">UTC&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;Etc/UTC&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">London&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;Europe/London&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Berlin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;Europe/Berlin&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">New_York&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;America/New_York&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">China&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;Asia/Shanghai&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">15&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">sort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;alphabetical&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">battery&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>power&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;âš¡ï¸&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">15&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">todolist&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>todo&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">checkedIcon&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;X&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">colors&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">checked&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>gray&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">highlight&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">fore&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;black&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">back&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;orange&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">filename&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;todo.yml&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3600&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ip&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>ipinfo&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;My IP&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">colors&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;lightblue&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">value&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;white&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">150&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">prettyweather&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">city&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ä¸´æ²‚&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">300&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">unit&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;m&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">view&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">language&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;en&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">security&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3600&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">docker&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>docker&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">labelColor&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>lightblue&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">resources&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>resourceusage&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">uptime&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>cmdrunner&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">cmd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;uptime&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">4&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">30&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">disks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>cmdrunner&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">cmd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;df&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;-h&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3600&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å®˜æ–¹æ”¯æŒæ¨¡å—">å®˜æ–¹æ”¯æŒæ¨¡å—&lt;/h3>
&lt;details>
&lt;summary style="background-color:#f5f5f5;border:1px solid #ccc;padding:5px;">
å•å‡»ä»¥å±•å¼€
&lt;/summary>
Azure DevOps
BambooHR
Buildkite
CDS
CircleCI
Clocks
CmdRunner
Crypto Currencies
Datadog
DEV (dev.to)
Digital Clock
DigitalOcean
Docker
Exchange Rates
Feed Reader
Gerrit
Git
GitHub
GitLab
Gitter
Google Apps
Hacker News
Have I Been Pwned (HIBP)
IP Addresses
Jenkins
Jira
Kubernetes
Logger
Mercurial
New Relic
OpsGenie
Pagerduty
Pi-hole
Power
Resource Usage
Rollbar
Security
Sports
Spotify
Subreddit
Textfile
Todo
Todoist
Transmission
TravisCI
Trello
Twitter
VictorOps OnCall
Weather Services
Zendesk
&lt;/details>
&lt;h2 id="bashtop">bashtop&lt;/h2>
&lt;p>å®˜æ–¹å¼€æºä»“åº“ï¼š&lt;a href="https://github.com/aristocratos/bashtos">https://github.com/aristocratos/bashtos&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/Linux%20%E7%9B%91%E6%8E%A7%E9%9D%A2%E6%9D%BF/bashtop.png" alt="" title="æˆªå›¾">&lt;/p>
&lt;p>ä¸»èœå•ï¼š
&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/Linux%20%E7%9B%91%E6%8E%A7%E9%9D%A2%E6%9D%BF/bashtop-1.png" alt="" title="ä¸»èœå•">&lt;/p>
&lt;p>é€‰é¡¹èœå•ï¼š
&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/Linux%20%E7%9B%91%E6%8E%A7%E9%9D%A2%E6%9D%BF/bashtop-1.png" alt="" title="é€‰é¡¹èœå•">&lt;/p>
&lt;h3 id="å®‰è£…ä¸ä½¿ç”¨-1">å®‰è£…ä¸ä½¿ç”¨&lt;/h3>
&lt;p>Add PPA repository and install bashtop&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash"> sudo add-apt-repository ppa:bashtop-monitor/bashtop
sudo apt update
sudo apt install bashtop
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®‰è£…å®Œæ¯•ä¹‹åï¼Œç›´æ¥åœ¨ç»ˆç«¯è¿è¡Œ&lt;code>bashtop&lt;/code>å³å¯ã€‚&lt;/p>
&lt;p>&lt;strong>ä½¿ç”¨&lt;code>ESC&lt;/code>é”®å¯ä»¥å‘¼å‡ºèœå•ï¼ŒæŒ‰ä¸‹&lt;code>q&lt;/code>é”®é€€å‡ºã€‚&lt;/strong>&lt;/p>
&lt;h3 id="é…ç½®æ–‡ä»¶-1">é…ç½®æ–‡ä»¶&lt;/h3>
&lt;p>All options changeable from within UI. Config files stored in &amp;ldquo;&lt;code>$HOME/.config/bashtop&lt;/code>&amp;rdquo; folder&lt;/p>
&lt;h4 id="bashtopcfg-auto-generated-if-not-found">bashtop.cfg: (auto generated if not found)&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1">#? Config file for bashtop v. 0.9.9&lt;/span>
&lt;span class="c1">#* Color theme, looks for a .theme file in &amp;#34;$HOME/.config/bashtop/themes&amp;#34; and &amp;#34;$HOME/.config/bashtop/user_themes&amp;#34;, &amp;#34;Default&amp;#34; for builtin default theme&lt;/span>
&lt;span class="nv">color_theme&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Default&amp;#34;&lt;/span>
&lt;span class="c1">#* Update time in milliseconds, increases automatically if set below internal loops processing time, recommended 2000 ms or above for better sample times for graphs&lt;/span>
&lt;span class="nv">update_ms&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2500&amp;#34;&lt;/span>
&lt;span class="c1">#* Processes sorting, &amp;#34;pid&amp;#34; &amp;#34;program&amp;#34; &amp;#34;arguments&amp;#34; &amp;#34;threads&amp;#34; &amp;#34;user&amp;#34; &amp;#34;memory&amp;#34; &amp;#34;cpu lazy&amp;#34; &amp;#34;cpu responsive&amp;#34; &amp;#34;tree&amp;#34;&lt;/span>
&lt;span class="c1">#* &amp;#34;cpu lazy&amp;#34; updates sorting over time, &amp;#34;cpu responsive&amp;#34; updates sorting directly at a cpu usage cost&lt;/span>
&lt;span class="nv">proc_sorting&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;cpu lazy&amp;#34;&lt;/span>
&lt;span class="c1">#* Reverse sorting order, &amp;#34;true&amp;#34; or &amp;#34;false&amp;#34;&lt;/span>
&lt;span class="nv">proc_reversed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;false&amp;#34;&lt;/span>
&lt;span class="c1">#* Check cpu temperature, only works if &amp;#34;sensors&amp;#34;, &amp;#34;vcgencmd&amp;#34; or &amp;#34;osx-cpu-temp&amp;#34; commands is available&lt;/span>
&lt;span class="nv">check_temp&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>
&lt;span class="c1">#* Draw a clock at top of screen, formatting according to strftime, empty string to disable&lt;/span>
&lt;span class="nv">draw_clock&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;%X&amp;#34;&lt;/span>
&lt;span class="c1">#* Update main ui when menus are showing, set this to false if the menus is flickering too much for comfort&lt;/span>
&lt;span class="nv">background_update&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>
&lt;span class="c1">#* Custom cpu model name, empty string to disable&lt;/span>
&lt;span class="nv">custom_cpu_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;span class="c1">#* Enable error logging to &amp;#34;$HOME/.config/bashtop/error.log&amp;#34;, &amp;#34;true&amp;#34; or &amp;#34;false&amp;#34;&lt;/span>
&lt;span class="nv">error_logging&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>
&lt;span class="c1">#* Show color gradient in process list, &amp;#34;true&amp;#34; or &amp;#34;false&amp;#34;&lt;/span>
&lt;span class="nv">proc_gradient&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>
&lt;span class="c1">#* If process cpu usage should be of the core it&amp;#39;s running on or usage of the total available cpu power&lt;/span>
&lt;span class="nv">proc_per_core&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;false&amp;#34;&lt;/span>
&lt;span class="c1">#* Optional filter for shown disks, should be names of mountpoints, &amp;#34;root&amp;#34; replaces &amp;#34;/&amp;#34;, separate multiple values with space&lt;/span>
&lt;span class="nv">disks_filter&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;span class="c1">#* Enable check for new version from github.com/aristocratos/bashtop at start&lt;/span>
&lt;span class="nv">update_check&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>
&lt;span class="c1">#* Enable graphs with double the horizontal resolution, increases cpu usage&lt;/span>
&lt;span class="nv">hires_graphs&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;false&amp;#34;&lt;/span>
&lt;span class="c1">#* Enable the use of psutil python3 module for data collection, default on OSX&lt;/span>
&lt;span class="nv">use_psutil&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Linux ç”Ÿæˆéšæœºæ•°</title><link>https://agou-ops.top/post/linux%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E6%95%B0/</link><pubDate>Mon, 01 Jun 2020 10:01:51 +0800</pubDate><guid>https://agou-ops.top/post/linux%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E6%95%B0/</guid><description>&lt;p>[TOC]&lt;/p>
&lt;h2 id="é€šè¿‡-openssl-ç”Ÿæˆ">é€šè¿‡ openssl ç”Ÿæˆ&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> openssl rand -base64 &lt;span class="m">3&lt;/span>
xsSp
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> openssl rand -base64 &lt;span class="m">8&lt;/span>
&lt;span class="nv">8SlHCsBAiYw&lt;/span>&lt;span class="o">=&lt;/span>
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> openssl rand -base64 &lt;span class="m">10&lt;/span>
&lt;span class="nv">nUzBw8ngKGGqWw&lt;/span>&lt;span class="o">==&lt;/span>
&lt;span class="sb">`&lt;/span>openssl rand -base64 32&lt;span class="p">|&lt;/span>tr A-Z a-z&lt;span class="p">|&lt;/span>cut -c 1-10&lt;span class="sb">`&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ä½¿ç”¨-date-å‘½ä»¤ç”Ÿæˆ">ä½¿ç”¨ date å‘½ä»¤ç”Ÿæˆ&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> date +%s
&lt;span class="m">1539071518&lt;/span>
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> date +%N
&lt;span class="m">801398716&lt;/span>
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> date +%s%N
&lt;span class="m">1539071555311467855&lt;/span>
&lt;span class="sb">`&lt;/span>date +%s &lt;span class="p">|&lt;/span>sha256sum &lt;span class="p">|&lt;/span>base64 &lt;span class="p">|&lt;/span>head -c &lt;span class="m">10&lt;/span> &lt;span class="p">;&lt;/span>&lt;span class="nb">echo&lt;/span>&lt;span class="sb">`&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ä½¿ç”¨-md5sum-ç”Ÿæˆéšæœºæ•°">ä½¿ç”¨ md5sum ç”Ÿæˆéšæœºæ•°&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">date &lt;span class="p">|&lt;/span> md5sum
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ä½¿ç”¨-dd-å‘½ä»¤ç”Ÿæˆéšæœºæ•°">ä½¿ç”¨ dd å‘½ä»¤ç”Ÿæˆéšæœºæ•°&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">dd &lt;span class="k">if&lt;/span>&lt;span class="o">=&lt;/span>/dev/urandom &lt;span class="nv">bs&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="nv">count&lt;/span>&lt;span class="o">=&lt;/span>15&lt;span class="p">|&lt;/span>base64 -w &lt;span class="m">0&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="é€šè¿‡devrandomè®¾å¤‡äº§ç”Ÿuuid">é€šè¿‡/dev/randomè®¾å¤‡äº§ç”Ÿuuid&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> cat /proc/sys/kernel/random/uuid
a3dfb0f2-f893-4e57-9d67-184a88d4cb5d
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> cat /proc/sys/kernel/random/uuid &lt;span class="p">|&lt;/span>cut -c 1-8
b80c60d8
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ä½¿ç”¨ç³»ç»Ÿç¯å¢ƒå˜é‡-random">ä½¿ç”¨ç³»ç»Ÿç¯å¢ƒå˜é‡ RANDOM&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$RANDOM&lt;/span>
&lt;span class="m">14535&lt;/span>
&lt;span class="c1">##è¯´æ˜ï¼šlinuxç³»ç»Ÿä¸‹çš„ç¯å¢ƒå˜é‡$RANDOMçš„å–å€¼èŒƒå›´æ˜¯ï¼š0â€“32767 ã€‚&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>äº§ç”Ÿ0-25èŒƒå›´å†…çš„æ•°ï¼Œç”¨è¿™ä¸ªç¯å¢ƒå˜é‡å¯¹26å–ä½™å³å¯ã€‚&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="k">$((&lt;/span>&lt;span class="nv">$RANDOM&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="m">26&lt;/span>&lt;span class="k">))&lt;/span>
&lt;span class="m">6&lt;/span>
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="k">$((&lt;/span>RANDOM%26&lt;span class="k">))&lt;/span>
&lt;span class="m">11&lt;/span>
&lt;span class="c1">##è¯´æ˜ï¼šç¬¬äºŒä¸ªè¡¨è¾¾å¼RANDOMå‰é¢æ— $ç¬¦å·å¥½åƒä¹Ÿå¯ä»¥ã€‚&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>äº§ç”Ÿ6ä½æ•°çš„æ•´æ•°ï¼Œç”¨è¿™ä¸ªç¯å¢ƒå˜é‡åŠ ä¸Š100000å³å¯ã€‚&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="k">$((&lt;/span>&lt;span class="nv">$RANDOM&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="m">100000&lt;/span>&lt;span class="k">))&lt;/span>
&lt;span class="m">117482&lt;/span>
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="k">$((&lt;/span>RANDOM+100000&lt;span class="k">))&lt;/span>
&lt;span class="m">126058&lt;/span>
&lt;span class="c1">##è¯´æ˜ï¼šç¬¬äºŒä¸ªè¡¨è¾¾å¼RANDOMå‰é¢æ— $ç¬¦å·å¥½åƒä¹Ÿå¯ä»¥ã€‚&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>äº§ç”ŸåŠ å¯†çš„éšæœºæ•°ç ï¼Œå°†éšæœºæ•°ç®¡é“ç»™å‘½ä»¤md5sumå‘½ä»¤å³å¯ã€‚&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$RANDOM&lt;/span> &lt;span class="p">|&lt;/span>md5sum
6ee8cd13547eb044ad13ba014573af6f -
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="4">
&lt;li>éœ€è¦å›ºå®šä½æ•°çš„éšæœºæ•°ç ï¼Œå°†éšæœºæ•°ç®¡é“ç»™å‘½ä»¤md5sumå‘½ä»¤å†ç®¡é“ç»™cutå‘½ä»¤å³å¯ã€‚&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$RANDOM&lt;/span> &lt;span class="p">|&lt;/span>md5sum&lt;span class="p">|&lt;/span>cut -c 1-8
de3cfe23
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·">ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·&lt;/h2>
&lt;ol>
&lt;li>expect éäº¤äº’å¼ç¨‹åºæ§åˆ¶ä¸‹ç”¨&lt;code>mkpasswd&lt;/code>å‘½ä»¤ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">yum install -y expect
mkpasswd -l 7 &lt;span class="c1"># ç”Ÿæˆä¸ƒä½å¯†ç åŒ…å«å¤§å°å†™åŠ ç‰¹æ®Šå­—ç¬¦&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>ä½¿ç”¨&lt;code>pwgen&lt;/code>ç”Ÿæˆéšæœºå¯è¯»çš„å¯†ç ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">yum install pwgen
&lt;span class="c1"># ç”Ÿæˆé•¿åº¦8ï¼Œå«æœ‰æ•°å­—ï¼Œå«æœ‰å¤§å°å†™å­—æ¯çš„å¯†ç 4ä¸ªï¼Œåˆ—æ‰“å°&lt;/span>
pwgen -ncC &lt;span class="m">8&lt;/span> &lt;span class="m">4&lt;/span>
&lt;span class="c1"># ç”Ÿæˆé•¿åº¦8ï¼Œå«æœ‰æ•°å­—ï¼Œå«æœ‰å°å†™å­—æ¯ï¼Œä¸åŒ…å«æ­§ä¹‰çš„å¯†ç 4ä¸ªï¼Œåˆ—æ‰“å°&lt;/span>
pwgen -nABC &lt;span class="m">8&lt;/span> &lt;span class="m">4&lt;/span>
&lt;span class="c1"># ç”Ÿæˆé•¿åº¦16ï¼Œå«æœ‰æ•°å­—ï¼Œå«æœ‰å¤§å°å†™å­—æ¯ï¼Œå«æœ‰ç‰¹æ®Šå­—ç¬¦çš„å¯†ç 8ä¸ªï¼Œè¡Œæ‰“å°&lt;/span>
pwgen -ncy1 &lt;span class="m">16&lt;/span> &lt;span class="m">8&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‚æ•°è¯´æ˜ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>-c or â€“capitalize&lt;/code>å¯†ç ä¸­è‡³å°‘åŒ…å«ä¸€ä¸ªå¤§å†™å­—æ¯&lt;/li>
&lt;li>&lt;code>-A or â€“no-capitalize&lt;/code>å¯†ç ä¸­ä¸åŒ…å«å¤§å†™å­—æ¯&lt;/li>
&lt;li>&lt;code>-n or â€“numerals&lt;/code>å¯†ç ä¸­è‡³å°‘åŒ…å«ä¸€ä¸ªæ•°å­—&lt;/li>
&lt;li>&lt;code>-0 or â€“no-numerals&lt;/code>å¯†ç ä¸­ä¸åŒ…å«æ•°å­—&lt;/li>
&lt;li>&lt;code>-y or â€“symbols&lt;/code>å¯†ç ä¸­è‡³å°‘åŒ…å«ä¸€ä¸ªç‰¹æ®Šç¬¦å·&lt;/li>
&lt;li>&lt;code>-s or â€“secure&lt;/code>ç”Ÿæˆå®Œå…¨éšæœºå¯†ç &lt;/li>
&lt;li>&lt;code>-B or â€“ambiguous&lt;/code>å¯†ç ä¸­ä¸åŒ…å«æ­§ä¹‰å­—ç¬¦ï¼ˆä¾‹å¦‚1,l,O,0ï¼‰&lt;/li>
&lt;li>&lt;code>-H or â€“sha1=path/to/file[#seed]&lt;/code>ä½¿ç”¨SHA1 hashç»™å®šçš„æ–‡ä»¶ä½œä¸ºä¸€ä¸ªéšæœºç§å­&lt;/li>
&lt;li>&lt;code>-C&lt;/code>åœ¨åˆ—ä¸­æ‰“å°ç”Ÿæˆçš„å¯†ç &lt;/li>
&lt;li>&lt;code>-1&lt;/code>ä¸è¦åœ¨åˆ—ä¸­æ‰“å°ç”Ÿæˆçš„å¯†ç ï¼Œå³ä¸€è¡Œä¸€ä¸ªå¯†ç &lt;/li>
&lt;li>&lt;code>-v or â€“no-vowels&lt;/code>ä¸è¦ä½¿ç”¨ä»»ä½•å…ƒéŸ³ï¼Œä»¥é¿å…å¶ç„¶çš„è„è¯&lt;/li>
&lt;/ul>
&lt;ol start="3">
&lt;li>å…¶ä»–ç¬¬ä¸‰æ–¹å·¥å…·ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">randpwã€spwã€gpgã€xkcdpass
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://blog.csdn.net/yuki5233/article/details/82997001">https://blog.csdn.net/yuki5233/article/details/82997001&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Scrcpy AndroidæŠ•å±ç¥å™¨</title><link>https://agou-ops.top/post/scrcpy-android%E6%8A%95%E5%B1%8F%E7%A5%9E%E5%99%A8/</link><pubDate>Thu, 28 May 2020 20:22:13 +0800</pubDate><guid>https://agou-ops.top/post/scrcpy-android%E6%8A%95%E5%B1%8F%E7%A5%9E%E5%99%A8/</guid><description>&lt;h2 id="scrcpy-ç®€ä»‹">Scrcpy ç®€ä»‹&lt;/h2>
&lt;p>åº”ç”¨ç¨‹åºå¯æ˜¾ç¤ºå’Œæ§åˆ¶é€šè¿‡USBï¼ˆæˆ–é€šè¿‡TCP / IPï¼‰è¿æ¥çš„Androidè®¾å¤‡ã€‚å®ƒä¸éœ€è¦ä»»ä½•æ ¹è®¿é—®æƒé™ã€‚å®ƒé€‚ç”¨äºGNU / Linuxï¼ŒWindowså’ŒmacOSã€‚&lt;/p>
&lt;p>githubåœ°å€ï¼š&lt;a href="https://github.com/Genymobile/scrcpy">https://github.com/Genymobile/scrcpy&lt;/a>&lt;/p>
&lt;h2 id="é…ç½®ç¯å¢ƒ">é…ç½®ç¯å¢ƒ&lt;/h2>
&lt;ol>
&lt;li>å®‰è£…&lt;code>adb&lt;/code>æœåŠ¡ï¼Œä½¿ç”¨æ•°æ®çº¿è¿æ¥è‡ªå·±çš„å®‰å“è®¾å¤‡ï¼Œå¹¶æŸ¥çœ‹è‡ªå·±çš„å®‰å“è®¾å¤‡ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo apt-get install android-tools-adb
adb start-server
$ lsusb
Bus &lt;span class="m">002&lt;/span> Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus &lt;span class="m">001&lt;/span> Device 005: ID 0bda:0821 Realtek Semiconductor Corp.
Bus &lt;span class="m">001&lt;/span> Device 004: ID 0bda:0129 Realtek Semiconductor Corp. RTS5129 Card Reader Controller
Bus &lt;span class="m">001&lt;/span> Device 003: ID 13d3:a745 IMC Networks
Bus &lt;span class="m">001&lt;/span> Device 054: ID &lt;span class="sb">`&lt;/span>24ae:1813&lt;span class="sb">`&lt;/span>
...
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰¾åˆ°è‡ªå·±çš„å®‰å“è®¾å¤‡å“ªä¸€è¡Œï¼Œ&lt;code>24ae&lt;/code>ã€&lt;code>1813&lt;/code>åœ¨ä¸‹é¢ä¼šç”¨åˆ°ã€‚&lt;/p>
&lt;ol start="2">
&lt;li>åˆ›å»ºè®¾å¤‡æ–‡ä»¶ï¼š&lt;/li>
&lt;/ol>
&lt;p>ä¸‹é¢å‘½ä»¤ä¸­çš„åç§°&lt;code>71-android&lt;/code>æ˜¯è‡ªå®šä¹‰çš„ï¼Œæˆ‘çš„è¿™ä¸ªä»£è¡¨å®‰å“7.1çš„æ„æ€ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">echo&lt;/span> 0x12d1 &amp;gt; ~/.android/adb_usb.ini
touch /etc/udev/rules.d/71-android.rules
gedit /etc/udev/rules.d/71-android.rules
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å°†ä»¥ä¸‹å†…å®¹å†™å…¥åˆšåˆšåˆ›å»ºçš„æ–‡ä»¶ï¼Œæ³¨æ„ï¼Œä¸‹é¢çš„&lt;code>24ae&lt;/code>ã€&lt;code>1813&lt;/code>è¦æ”¹æˆè‡ªå·±çš„å®‰å“è®¾å¤‡çš„idï¼ˆè§ä¸Šï¼‰ï¼š&lt;/p>
&lt;blockquote>
&lt;p>SUBSYSTEM&amp;quot;usb&amp;rdquo;, ATTRS{idVendor}&amp;ldquo;24ae&amp;rdquo;, ATTRS{idProduct}==&amp;quot;1813&amp;rdquo;, MODE=&amp;quot;0666&amp;rdquo;&lt;/p>
&lt;/blockquote>
&lt;p>æ›´æ”¹æ–‡ä»¶æƒé™ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">chmod &lt;span class="m">666&lt;/span> /etc/udev/rules.d/90-android.rules
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>é‡å¯ ADB æœåŠ¡ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">service udev restart
adb kill-server
adb start-server
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="scrcpy-å®‰è£…ä¸ä½¿ç”¨">Scrcpy å®‰è£…ä¸ä½¿ç”¨&lt;/h2>
&lt;p>å®‰è£…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># ä½¿ç”¨snapå®‰è£…&lt;/span>
sudo snap install scrcpy
&lt;span class="c1"># æˆ–è€…&lt;/span>
apt install scrcpy
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ—å‡ºè®¾å¤‡ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">scrcpy.adb devices
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¼€å§‹æŠ•å±ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">scrcpy
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="è®¾ç½®æ— çº¿è¿æ¥androidè®¾å¤‡">è®¾ç½®æ— çº¿è¿æ¥Androidè®¾å¤‡&lt;/h2>
&lt;p>â„¹ï¸å…ˆä½¿ç”¨æ•°æ®çº¿å°†æ‰‹æœºå’Œç”µè„‘è¿æ¥å¹¶åœ¨æ‰‹æœºç«¯å¼€å¯ã€Œå¼€å‘è€…é€‰é¡¹ã€åŠã€ŒUSB è°ƒè¯•ã€&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># å¼€å¯æ‰‹æœºç«¯å£&lt;/span>
adb tcpip &lt;span class="m">6666&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‹”å‡ºæ•°æ®çº¿ï¼Œå¼€å¯æ— çº¿è¿æ¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">adb connect 192.168.8.154:6666
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>192.168.8.154&lt;/code>ä¸ºä½ Androidè®¾å¤‡çš„IPåœ°å€ï¼Œå¯ä»¥é€šè¿‡è·¯ç”±å™¨åå°è·å–æˆ–è€…åœ¨æ‰‹æœºä¸Šä½¿ç”¨ç›¸å…³è½¯ä»¶è¿›è¡Œè·å–ã€‚&lt;/p>
&lt;p>å¯åŠ¨ scrcpy ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">scrcpy
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="scrcpy-å¿«æ·é”®">Scrcpy å¿«æ·é”®&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Action&lt;/th>
&lt;th>Shortcut&lt;/th>
&lt;th>Shortcut (macOS)&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Switch fullscreen mode&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>f&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>f&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Rotate display left&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>â†&lt;/code> &lt;em>(left)&lt;/em>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>â†&lt;/code> &lt;em>(left)&lt;/em>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Rotate display right&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>â†’&lt;/code> &lt;em>(right)&lt;/em>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>â†’&lt;/code> &lt;em>(right)&lt;/em>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Resize window to 1:1 (pixel-perfect)&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>g&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>g&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Resize window to remove black borders&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>x&lt;/code> | &lt;em>Double-clickÂ¹&lt;/em>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>x&lt;/code> | &lt;em>Double-clickÂ¹&lt;/em>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Click on &lt;code>HOME&lt;/code>&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>h&lt;/code> | &lt;em>Middle-click&lt;/em>&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>h&lt;/code> | &lt;em>Middle-click&lt;/em>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Click on &lt;code>BACK&lt;/code>&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>b&lt;/code> | &lt;em>Right-clickÂ²&lt;/em>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>b&lt;/code> | &lt;em>Right-clickÂ²&lt;/em>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Click on &lt;code>APP_SWITCH&lt;/code>&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>s&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>s&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Click on &lt;code>MENU&lt;/code>&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>m&lt;/code>&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>m&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Click on &lt;code>VOLUME_UP&lt;/code>&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>â†‘&lt;/code> &lt;em>(up)&lt;/em>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>â†‘&lt;/code> &lt;em>(up)&lt;/em>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Click on &lt;code>VOLUME_DOWN&lt;/code>&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>â†“&lt;/code> &lt;em>(down)&lt;/em>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>â†“&lt;/code> &lt;em>(down)&lt;/em>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Click on &lt;code>POWER&lt;/code>&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>p&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>p&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Power on&lt;/td>
&lt;td>&lt;em>Right-clickÂ²&lt;/em>&lt;/td>
&lt;td>&lt;em>Right-clickÂ²&lt;/em>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Turn device screen off (keep mirroring)&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>o&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>o&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Turn device screen on&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>Shift&lt;/code>+&lt;code>o&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>Shift&lt;/code>+&lt;code>o&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Rotate device screen&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>r&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>r&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Expand notification panel&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>n&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>n&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Collapse notification panel&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>Shift&lt;/code>+&lt;code>n&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>Shift&lt;/code>+&lt;code>n&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Copy device clipboard to computer&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>c&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>c&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Paste computer clipboard to device&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>v&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>v&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Copy computer clipboard to device and paste&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>Shift&lt;/code>+&lt;code>v&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>Shift&lt;/code>+&lt;code>v&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Enable/disable FPS counter (on stdout)&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>i&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>i&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;em>Â¹Double-click on black borders to remove them.&lt;/em>
&lt;em>Â²Right-click turns the screen on if it was off, presses BACK otherwise.&lt;/em>&lt;/p>
&lt;h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥&lt;/h2>
&lt;ul>
&lt;li>Scrcpy Documentation: &lt;a href="https://github.com/Genymobile/scrcpy">https://github.com/Genymobile/scrcpy&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>OpenVPN for CentOS</title><link>https://agou-ops.top/post/openvpn-for-centos/</link><pubDate>Thu, 21 May 2020 19:42:06 +0800</pubDate><guid>https://agou-ops.top/post/openvpn-for-centos/</guid><description>&lt;h2 id="openvpn-ç®€ä»‹">OpenVPN ç®€ä»‹&lt;/h2>
&lt;p>OpenVPN æ˜¯ä¸€ä¸ªåŸºäº OpenSSL åº“çš„åº”ç”¨å±‚ VPN å®ç°ã€‚å’Œä¼ ç»Ÿ VPN ç›¸æ¯”ï¼Œå®ƒçš„ä¼˜ç‚¹æ˜¯ç®€å•æ˜“ç”¨ã€‚ [1]&lt;/p>
&lt;p>OpenVPNå…è®¸å‚ä¸å»ºç«‹VPNçš„å•ç‚¹ä½¿ç”¨å…±äº«é‡‘é’¥ï¼Œç”µå­è¯ä¹¦ï¼Œæˆ–è€…ç”¨æˆ·å/å¯†ç æ¥è¿›è¡Œèº«ä»½éªŒè¯ã€‚å®ƒå¤§é‡ä½¿ç”¨äº†OpenSSLåŠ å¯†åº“ä¸­çš„SSLv3/TLSv1 åè®®å‡½å¼åº“ã€‚OpenVPNèƒ½åœ¨Solarisã€Linuxã€OpenBSDã€FreeBSDã€NetBSDã€Mac OS Xä¸Windows 2000/XP/Vistaä¸Šè¿è¡Œï¼Œå¹¶åŒ…å«äº†è®¸å¤šå®‰å…¨æ€§çš„åŠŸèƒ½ã€‚å®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªåŸºäºWebçš„VPNè½¯ä»¶ï¼Œä¹Ÿä¸ä¸IPsecåŠå…¶ä»–VPNè½¯ä»¶åŒ…å…¼å®¹ã€‚&lt;/p>
&lt;h2 id="openvpn-å®‰è£…">OpenVPN å®‰è£…&lt;/h2>
&lt;h3 id="ä½¿ç”¨easyrsaæ„å»º-ca">ä½¿ç”¨&lt;code>EasyRSA&lt;/code>æ„å»º CA&lt;/h3>
&lt;ol>
&lt;li>é¦–å…ˆä»é¡¹ç›®&lt;a href="https://github.com/OpenVPN/easy-rsa">Githubå­˜å‚¨åº“&lt;/a>ä¸‹è½½EasyRSAçš„æœ€æ–°ç‰ˆæœ¬å¹¶è§£å‹ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">cd&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> wget https://github.com/OpenVPN/easy-rsa/releases/download/v3.0.5/EasyRSA-nix-3.0.7.tgz
tar xzf EasyRSA-3.0.7.tgz
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>å¤åˆ¶æ¨¡æ¿æ–‡ä»¶ï¼Œå¹¶è¿›è¡Œé€‚å½“ä¿®æ”¹ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">mv EasyRSA-3.0.7 EasyRSA-CA&lt;span class="p">;&lt;/span> &lt;span class="nb">cd&lt;/span> EasyRSA-CA
cp vars.example vars
&lt;span class="c1"># ---------- ç¼–è¾‘ vars æ–‡ä»¶å†…å®¹`95`è¡Œå·¦å³ ----------&lt;/span>
set_var EASYRSA_REQ_COUNTRY &lt;span class="s2">&amp;#34;CN&amp;#34;&lt;/span>
set_var EASYRSA_REQ_PROVINCE &lt;span class="s2">&amp;#34;Shandong&amp;#34;&lt;/span>
set_var EASYRSA_REQ_CITY &lt;span class="s2">&amp;#34;Jinan&amp;#34;&lt;/span>
set_var EASYRSA_REQ_ORG &lt;span class="s2">&amp;#34;AGou&amp;#34;&lt;/span>
set_var EASYRSA_REQ_EMAIL &lt;span class="s2">&amp;#34;AGou-ops@foxmail.com&amp;#34;&lt;/span>
set_var EASYRSA_REQ_OU &lt;span class="s2">&amp;#34;Community&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¿®æ”¹å®Œæˆä¹‹åä¿å­˜é€€å‡ºã€‚&lt;/p>
&lt;ol start="3">
&lt;li>åˆå§‹åŒ–&lt;code>PKI&lt;/code>ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@test EasyRSA-CA&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> ./easyrsa init-pki
Note: using Easy-RSA configuration from: /root/EasyRSA-3.0.7/vars
init-pki complete&lt;span class="p">;&lt;/span> you may now create a CA or requests.
Your newly created PKI dir is: /root/EasyRSA-3.0.7/pki
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="4">
&lt;li>æ¥ä¸‹æ¥å»ºç«‹&lt;code>CA&lt;/code>ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@test EasyRSA-CA&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> ./easyrsa build-ca nopass
Note: using Easy-RSA configuration from: /root/EasyRSA-3.0.7/vars
Using SSL: openssl OpenSSL 1.0.2k-fips &lt;span class="m">26&lt;/span> Jan &lt;span class="m">2017&lt;/span>
Generating RSA private key, &lt;span class="m">2048&lt;/span> bit long modulus
...............+++
............................................................................................................................+++
e is &lt;span class="m">65537&lt;/span> &lt;span class="o">(&lt;/span>0x10001&lt;span class="o">)&lt;/span>
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter &lt;span class="s1">&amp;#39;.&amp;#39;&lt;/span>, the field will be left blank.
-----
Common Name &lt;span class="o">(&lt;/span>eg: your user, host, or server name&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Easy-RSA CA&lt;span class="o">]&lt;/span>:
CA creation &lt;span class="nb">complete&lt;/span> and you may now import and sign cert requests.
Your new CA certificate file &lt;span class="k">for&lt;/span> publishing is at:
/root/EasyRSA-3.0.7/pki/ca.crt
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®Œæˆåï¼Œè¯¥è„šæœ¬å°†åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶-CAå…¬å…±è¯ä¹¦&lt;code>PKI/ca.crt&lt;/code>å’ŒCAç§é’¥&lt;code>PKI/private/ca.key&lt;/code>&lt;/p>
&lt;h3 id="å®‰è£…-openvpn-å’Œ-easyrsa">å®‰è£… OpenVPN å’Œ EasyRSA&lt;/h3>
&lt;ol>
&lt;li>å¯ä»¥åœ¨ OpenVPN çš„å®˜æ–¹ github ä»“åº“ ä¸‹è½½æœ€æ–°æºç åŒ…è¿›è¡Œç¼–è¯‘å®‰è£…ï¼Œåœ¨è¿™é‡Œä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä½¿ç”¨&lt;code>epel&lt;/code>ä»“åº“è¿›è¡Œå®‰è£…ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">yum install epel-release -y
yum install openvpn -y
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>è·å–æœ€æ–°ç‰ˆæœ¬çš„&lt;code>EasyRSA&lt;/code>ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">cd&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> wget https://github.com/OpenVPN/easy-rsa/releases/download/v3.0.5/EasyRSA-nix-3.0.7.tgz
tar xzf EasyRSA-3.0.7.tgz
mv EasyRSA-3.0.7 EasyRSA-Sever1
&lt;span class="nb">cd&lt;/span> EasyRSA-Sever1
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>å°½ç®¡æˆ‘ä»¬å·²ç»åœ¨ CA ä¸»æœºä¸Šåˆå§‹åŒ–äº†PKIï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜éœ€è¦åœ¨ &lt;code>OpenVPN æœåŠ¡å™¨&lt;/code>ä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„ PKI ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@test EasyRSA-Server1&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> ./easyrsa init-pki
Note: using Easy-RSA configuration from: /root/EasyRSA-Server1/vars
init-pki complete&lt;span class="p">;&lt;/span> you may now create a CA or requests.
Your newly created PKI dir is: /root/EasyRSA-Server1/pki
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="åˆ›å»ºdiffie-hellmanå’Œhmacå¯†é’¥">åˆ›å»º&lt;code>Diffie-Hellman&lt;/code>å’Œ&lt;code>HMAC&lt;/code>å¯†é’¥&lt;/h3>
&lt;p>ç”Ÿæˆä¸€ä¸ª&lt;code>Diffie-Hellman&lt;/code>å¯†é’¥ï¼Œè¯¥å¯†é’¥å°†åœ¨å¯†é’¥äº¤æ¢æœŸé—´ä½¿ç”¨ï¼Œå¹¶ä½¿ç”¨&lt;code>HMAC&lt;/code>ç­¾åæ–‡ä»¶ä¸ºè¿æ¥æ·»åŠ é™„åŠ çš„å®‰å…¨å±‚ã€‚&lt;/p>
&lt;ol>
&lt;li>åœ¨&lt;code>OpenVPN&lt;/code>æœåŠ¡å™¨ä¸Šï¼Œç”Ÿæˆ&lt;code>Diffie-Hellman&lt;/code>å¯†é’¥ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">cd&lt;/span> ~/EasyRSA-Server1
./easyrsa gen-dh
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>å¤åˆ¶è¯¥æ–‡ä»¶åˆ°&lt;code>/etc/openvpn&lt;/code>ç›®å½•ä¸­å»ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp /root/EasyRSA-Server1/pki/dh.pem /etc/openvpn
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>æ¥ä¸‹æ¥ï¼Œä½¿ç”¨&lt;code>openvpn&lt;/code>äºŒè¿›åˆ¶æ–‡ä»¶ç”Ÿæˆ&lt;code>HMAC&lt;/code>ç­¾åï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">openvpn --genkey --secret ta.key
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åå°†ç”Ÿæˆçš„&lt;code>ta.key&lt;/code>å¤åˆ¶åˆ°&lt;code>/etc/openvpn&lt;/code>ç›®å½•ä¸­å»ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp ta.key /etc/openvpn
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="åˆ›å»ºæœåŠ¡å™¨è¯ä¹¦å’Œç§é’¥">åˆ›å»ºæœåŠ¡å™¨è¯ä¹¦å’Œç§é’¥&lt;/h3>
&lt;ol>
&lt;li>è¿›å…¥&lt;code>OpenVPNæœåŠ¡å™¨&lt;/code>ä¸Šçš„EasyRSAç›®å½•ï¼Œå¹¶ä¸ºæœåŠ¡å™¨å’Œè¯ä¹¦è¯·æ±‚æ–‡ä»¶ç”Ÿæˆä¸€ä¸ªæ–°çš„ç§é’¥ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">cd&lt;/span> ~/EasyRSA-Server1
./easyrsa gen-req server1 nopass
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯¥å‘½ä»¤å°†åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªç§é’¥ï¼ˆ&lt;code>server1.key&lt;/code>ï¼‰å’Œä¸€ä¸ªè¯ä¹¦è¯·æ±‚æ–‡ä»¶ï¼ˆ&lt;code>server1.req&lt;/code>ï¼‰&lt;/p>
&lt;ol start="2">
&lt;li>å°†ç”Ÿæˆçš„ç§é’¥å¤åˆ¶åˆ°&lt;code>/etc/openvpn&lt;/code>ç›®å½•ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp /root/EasyRSA-Server1/pki/private/server1.key /etc/openvpn/
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>å°†è¯ä¹¦è¯·æ±‚å‘é€åˆ°&lt;code>CA&lt;/code>ä¸»æœºï¼ˆè¿™é‡Œæˆ‘CAä¸»æœºä¸OpenVPNä¸ºåŒä¸€ä¸»æœºï¼‰ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp ~/EasyRSA-Server1/pki/reqs/server1.req /tmp
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="4">
&lt;li>ç™»å½•&lt;code>CAä¸»æœº&lt;/code>ï¼Œåˆ‡æ¢åˆ° EasyRSA ç›®å½•å¹¶å¯¼å…¥è¯ä¹¦è¯·æ±‚æ–‡ä»¶ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">cd&lt;/span> ~/EasyRSA-CA
./easyrsa import-req /tmp/server1.req server1
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ­¤å‘½ä»¤åªæ˜¯å°†è¯·æ±‚æ–‡ä»¶å¤åˆ¶åˆ°&lt;code>pki/reqs&lt;/code>ç›®å½•ä¸­ã€‚&lt;/p>
&lt;ol start="5">
&lt;li>åœ¨&lt;code>CAä¸»æœº&lt;/code>ä¸Šï¼Œç­¾ç½²è¯ä¹¦ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">./easyrsa sign-req server server1
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¡®è®¤ä¿¡æ¯æ— è¯¯ä¹‹åï¼Œè¾“å…¥ yes ç„¶åç‚¹å‡»å›è½¦å³å¯ã€‚&lt;/p>
&lt;ol start="6">
&lt;li>åœ¨&lt;code>CAä¸»æœº&lt;/code>ä¸Šï¼Œå°†ç­¾åçš„è¯ä¹¦&lt;code>server1.crt&lt;/code>å’Œ&lt;code>ca.crt&lt;/code>æ–‡ä»¶ä¼ å‘é€å›&lt;code>OpenVPNä¸»æœº&lt;/code>ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp ~/EasyRSA-CA/pki/issued/server1.crt /etc/openvpn/
cp ~/EasyRSA-CA/pki/ca.crt /etc/openvpn/
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>âš ï¸ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šæˆ‘çš„&lt;code>CAä¸»æœº&lt;/code>å’Œ&lt;code>OpenVPN&lt;/code>ä¸»æœºæ˜¯åŒä¸€ä¸»æœºï¼Œæ‰€ä»¥ä¸Šé¢çš„&lt;code>/etc/openvpn&lt;/code>ç›®å½•æ˜¯&lt;code>OpenVPNä¸»æœº&lt;/code>çš„ã€‚&lt;/p>
&lt;p>æ‰€æœ‰æ­¥éª¤éƒ½å®Œæˆä¹‹åï¼Œåœ¨&lt;code>/etc/openvpn&lt;/code>ç›®å½•ä¸‹åº”å½“æœ‰è¿™äº›æ–‡ä»¶å­˜åœ¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@test EasyRSA-CA&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> ls /etc/openvpn/
ca.crt client dh.pem server server1.crt server1.key ta.key
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="é…ç½®openvpnæœåŠ¡">é…ç½®&lt;code>OpenVPN&lt;/code>æœåŠ¡&lt;/h3>
&lt;ol>
&lt;li>å°† OpenVPN çš„æ¨¡æ¿é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°&lt;code>/etc/openvpn&lt;/code>ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp /usr/share/doc/openvpn-2.4.9/sample/sample-config-files/server.conf /etc/openvpn/server1.conf
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>ä¿®æ”¹&lt;code>server1.conf&lt;/code>ï¼Œæ‰¾åˆ°è¯ä¹¦ï¼Œå¯†é’¥å’ŒDHå‚æ•°æŒ‡ä»¤å¹¶æ›´æ”¹æ–‡ä»¶åï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">user nobody
group nogroup
&lt;span class="c1"># ---------- å¤§çº¦åœ¨78è¡Œå·¦å³ ----------&lt;/span>
cert server1.crt
key server1.key
dh dh.pem
&lt;span class="c1"># åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹è¡Œã€‚è¯¥æŒ‡ä»¤ä¼šå°†æ¶ˆæ¯èº«ä»½éªŒè¯ç®—æ³•ï¼ˆHMACï¼‰ä»SHA1æ›´æ”¹ä¸ºSHA256&lt;/span>
auth SHA256
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>â„¹ï¸å¯é€‰ï¼š è¦é€šè¿‡VPNé‡å®šå‘å®¢æˆ·ç«¯æµé‡ï¼Œè¯·æ‰¾åˆ°å¹¶å–æ¶ˆæ³¨é‡Š&lt;code>redirect-gateway&lt;/code>å’Œ&lt;code>dhcp-option&lt;/code>é€‰é¡¹ï¼š&lt;/p>
&lt;p>&lt;code>/etc/openvpn/server1.conf&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="na">push &amp;#34;redirect-gateway def1 bypass-dhcp&amp;#34;&lt;/span>
&lt;span class="na">push &amp;#34;dhcp-option DNS 208.67.222.222&amp;#34;&lt;/span>
&lt;span class="na">push &amp;#34;dhcp-option DNS 208.67.220.220&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨OpenDNSè§£æå™¨ã€‚æ‚¨å¯ä»¥æ›´æ”¹å®ƒå¹¶ä½¿ç”¨CloudFlareï¼ŒGoogleæˆ–æ‚¨æƒ³è¦çš„ä»»ä½•å…¶ä»–DNSè§£æå™¨ã€‚&lt;/p>
&lt;p>å®Œæ•´é…ç½®æ–‡ä»¶å‚è€ƒï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">port 1194
proto udp
dev tun
ca ca.crt
cert server1.crt
key server1.key # This file should be kept secret
dh dh.pem
server 10.8.0.0 255.255.255.0
ifconfig-pool-persist ipp.txt
push &amp;#34;redirect-gateway def1 bypass-dhcp&amp;#34;
push &amp;#34;dhcp-option DNS 208.67.222.222&amp;#34;
push &amp;#34;dhcp-option DNS 208.67.220.220&amp;#34;
keepalive 10 120
tls-auth ta.key 0 # This file is secret
cipher AES-256-CBC
user nobody
group nobody
persist-key
persist-tun
status openvpn-status.log
verb 3
explicit-exit-notify 1
auth SHA256
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å¯åŠ¨-openvpn-æœåŠ¡">å¯åŠ¨ OpenVPN æœåŠ¡&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">systemctl start openvpn@server1
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆåŠŸå¯åŠ¨ä¹‹åï¼ŒOpenVPN Server ä¼šåˆ›å»ºä¸€ä¸ª tun è®¾å¤‡ï¼Œå³&lt;code>tun0&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@test openvpn&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> ip a show tun0
3: tun0: &amp;lt;POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP&amp;gt; mtu &lt;span class="m">1500&lt;/span> qdisc pfifo_fast state UNKNOWN group default qlen &lt;span class="m">100&lt;/span>
link/none
inet 10.8.0.1 peer 10.8.0.2/32 scope global tun0
valid_lft forever preferred_lft forever
inet6 fe80::afaa:c6f7:7ae8:3a76/64 scope link flags &lt;span class="m">800&lt;/span>
valid_lft forever preferred_lft forever
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸ºäº†æ­£ç¡®è½¬å‘ç½‘ç»œæ•°æ®åŒ…ï¼Œæˆ‘ä»¬éœ€è¦å¯ç”¨IPè½¬å‘ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;net.ipv4.ip_forward = 1&amp;#34;&lt;/span> &amp;gt;&amp;gt; /etc/sysctl.conf
sysctl -p
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="é…ç½®å®¢æˆ·ç«¯æ¥å£">é…ç½®å®¢æˆ·ç«¯æ¥å£&lt;/h2>
&lt;p>åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„SSLè¯ä¹¦ï¼Œå¹¶ä¸ºæ¯ä¸ªVPNå®¢æˆ·ç«¯ç”Ÿæˆä¸€ä¸ªä¸åŒçš„é…ç½®æ–‡ä»¶ã€‚&lt;/p>
&lt;p>å®¢æˆ·ç«¯ç§é’¥å’Œè¯ä¹¦è¯·æ±‚å¯ä»¥åœ¨å®¢æˆ·ç«¯è®¡ç®—æœºæˆ–æœåŠ¡å™¨ä¸Šç”Ÿæˆã€‚ä¸ºç®€å•èµ·è§ï¼Œæˆ‘ä»¬å°†åœ¨æœåŠ¡å™¨ä¸Šç”Ÿæˆè¯ä¹¦è¯·æ±‚ï¼Œç„¶åå°†å…¶å‘é€åˆ°CAè¿›è¡Œç­¾åã€‚&lt;/p>
&lt;p>ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦å’Œé…ç½®æ–‡ä»¶çš„æ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>åœ¨OpenVPNæœåŠ¡å™¨ä¸Šç”Ÿæˆç§é’¥å’Œè¯ä¹¦è¯·æ±‚ï¼›&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å°†è¯·æ±‚å‘é€åˆ°è¦ç­¾åçš„CAè®¡ç®—æœºï¼›&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å°†ç­¾åçš„SSLè¯ä¹¦å¤åˆ¶åˆ°OpenVPNæœåŠ¡å™¨å¹¶ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼›&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å°†é…ç½®æ–‡ä»¶å‘é€åˆ°VPNå®¢æˆ·ç«¯çš„è®¡ç®—æœºã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é¦–å…ˆï¼Œåœ¨&lt;code>OpenVPNä¸»æœº&lt;/code>ä¸Šåˆ›å»ºä¸€ç»„ç›®å½•æ¥å­˜æ”¾å®¢æˆ·ç«¯æ–‡ä»¶ï¼š&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">mkdir -p ~/openvpn-clients/&lt;span class="o">{&lt;/span>configs,base,files&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;code>base&lt;/code> ç›®å½•å°†å­˜å‚¨å°†åœ¨æ‰€æœ‰å®¢æˆ·ç«¯æ–‡ä»¶ä¹‹é—´å…±äº«çš„åŸºæœ¬æ–‡ä»¶å’Œé…ç½®ï¼›&lt;/li>
&lt;li>&lt;code>configs&lt;/code> ç›®å½•å°†å­˜å‚¨ç”Ÿæˆçš„å®¢æˆ·ç«¯é…ç½®ï¼›&lt;/li>
&lt;li>&lt;code>files&lt;/code> ç›®å½•å°†å­˜å‚¨ç‰¹å®šäºå®¢æˆ·ç«¯çš„è¯ä¹¦/å¯†é’¥å¯¹ã€‚&lt;/li>
&lt;/ul>
&lt;ol start="2">
&lt;li>å¤åˆ¶&lt;code>ca.crt&lt;/code>å’Œ&lt;code>ta.key&lt;/code>æ–‡ä»¶åˆ°&lt;code>~/openvpn-clients/base&lt;/code>ç›®å½•ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp ~/EasyRSA-Server1/ta.key ~/openvpn-clients/base/
cp /etc/openvpn/ca.crt ~/openvpn-clients/base/
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>å°†ç¤ºä¾‹å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°&lt;code>~/openvpn-clients/base/&lt;/code>ç›®å½•ä¸‹ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp /usr/share/doc/openvpn-2.4.9/sample/sample-config-files/client.conf ~/openvpn-clients/base/
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="4">
&lt;li>ç¼–è¾‘&lt;code>client.conf&lt;/code>æ–‡ä»¶ä»¥åŒ¹é…æˆ‘ä»¬çš„æœåŠ¡å™¨é…ç½®ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">remote 172.16.1.131 &lt;span class="m">1194&lt;/span>
&lt;span class="c1"># åœ¨æ–‡ä»¶ç»“å°¾æ·»åŠ ä»¥ä¸‹å†…å®¹&lt;/span>
auth SHA256
key-direction &lt;span class="m">1&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®Œæ•´é…ç½®æ–‡ä»¶å‚è€ƒå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">client
dev tun
proto udp
remote 172.16.1.131 1194
resolv-retry infinite
nobind
persist-key
persist-tun
remote-cert-tls server
cipher AES-256-CBC
verb 3
auth SHA256
key-direction 1
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="5">
&lt;li>æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ªç®€å•çš„bashè„šæœ¬ï¼Œå®ƒå°†åŸºæœ¬é…ç½®å’Œæ–‡ä»¶ä¸å®¢æˆ·ç«¯è¯ä¹¦å’Œå¯†é’¥åˆå¹¶ï¼Œå¹¶å°†ç”Ÿæˆçš„é…ç½®å­˜å‚¨åœ¨&lt;code>~/openvpn-clients/configs&lt;/code>ç›®å½•ä¸­ï¼š&lt;/li>
&lt;/ol>
&lt;p>&lt;code>vim ~/openvpn-clients/gen_config.sh&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="nv">FILES_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$HOME&lt;/span>/openvpn-clients/files
&lt;span class="nv">BASE_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$HOME&lt;/span>/openvpn-clients/base
&lt;span class="nv">CONFIGS_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$HOME&lt;/span>/openvpn-clients/configs
&lt;span class="nv">BASE_CONF&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">BASE_DIR&lt;/span>&lt;span class="si">}&lt;/span>/client.conf
&lt;span class="nv">CA_FILE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">BASE_DIR&lt;/span>&lt;span class="si">}&lt;/span>/ca.crt
&lt;span class="nv">TA_FILE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">BASE_DIR&lt;/span>&lt;span class="si">}&lt;/span>/ta.key
&lt;span class="nv">CLIENT_CERT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">FILES_DIR&lt;/span>&lt;span class="si">}&lt;/span>/&lt;span class="si">${&lt;/span>&lt;span class="nv">1&lt;/span>&lt;span class="si">}&lt;/span>.crt
&lt;span class="nv">CLIENT_KEY&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">FILES_DIR&lt;/span>&lt;span class="si">}&lt;/span>/&lt;span class="si">${&lt;/span>&lt;span class="nv">1&lt;/span>&lt;span class="si">}&lt;/span>.key
&lt;span class="c1"># Test for files&lt;/span>
&lt;span class="k">for&lt;/span> i in &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$BASE_CONF&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$CA_FILE&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$TA_FILE&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$CLIENT_CERT&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$CLIENT_KEY&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> ! -f &lt;span class="nv">$i&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34; The file &lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2"> does not exist&amp;#34;&lt;/span>
&lt;span class="nb">exit&lt;/span> &lt;span class="m">1&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> ! -r &lt;span class="nv">$i&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34; The file &lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2"> is not readable.&amp;#34;&lt;/span>
&lt;span class="nb">exit&lt;/span> &lt;span class="m">1&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;span class="c1"># Generate client config&lt;/span>
cat &amp;gt; &lt;span class="si">${&lt;/span>&lt;span class="nv">CONFIGS_DIR&lt;/span>&lt;span class="si">}&lt;/span>/&lt;span class="si">${&lt;/span>&lt;span class="nv">1&lt;/span>&lt;span class="si">}&lt;/span>.ovpn &lt;span class="s">&amp;lt;&amp;lt;EOF
&lt;/span>&lt;span class="s">$(cat ${BASE_CONF})
&lt;/span>&lt;span class="s">&amp;lt;key&amp;gt;
&lt;/span>&lt;span class="s">$(cat ${CLIENT_KEY})
&lt;/span>&lt;span class="s">&amp;lt;/key&amp;gt;
&lt;/span>&lt;span class="s">&amp;lt;cert&amp;gt;
&lt;/span>&lt;span class="s">$(cat ${CLIENT_CERT})
&lt;/span>&lt;span class="s">&amp;lt;/cert&amp;gt;
&lt;/span>&lt;span class="s">&amp;lt;ca&amp;gt;
&lt;/span>&lt;span class="s">$(cat ${CA_FILE})
&lt;/span>&lt;span class="s">&amp;lt;/ca&amp;gt;
&lt;/span>&lt;span class="s">&amp;lt;tls-auth&amp;gt;
&lt;/span>&lt;span class="s">$(cat ${TA_FILE})
&lt;/span>&lt;span class="s">&amp;lt;/tls-auth&amp;gt;
&lt;/span>&lt;span class="s">EOF&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>èµ‹äºˆæ‰§è¡Œæƒé™ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">chmod +x ~/openvpn-clients/gen_config.sh
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="åˆ›å»ºå®¢æˆ·ç«¯è¯ä¹¦ç§é’¥å’Œé…ç½®">åˆ›å»ºå®¢æˆ·ç«¯è¯ä¹¦ç§é’¥å’Œé…ç½®&lt;/h2>
&lt;p>ç”Ÿæˆå®¢æˆ·ç«¯ç§é’¥å’Œè¯ä¹¦è¯·æ±‚çš„è¿‡ç¨‹ä¸ç”ŸæˆæœåŠ¡å™¨å¯†é’¥å’Œè¯ä¹¦è¯·æ±‚çš„è¿‡ç¨‹ç›¸åŒã€‚&lt;/p>
&lt;ol>
&lt;li>ç™»å½•&lt;code>OpenVPNä¸»æœº&lt;/code>ä¸ºå®¢æˆ·ç«¯ç”Ÿæˆä¸€ä¸ªæ–°çš„ç§é’¥å’Œä¸€ä¸ªè¯ä¹¦è¯·æ±‚ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">cd&lt;/span> ~/EasyRSA-Server1
./easyrsa gen-req client1 nopass
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>å°†ç§é’¥&lt;code>client1.key&lt;/code>å¤åˆ¶åˆ°&lt;code>~/openvpn-clients/files&lt;/code>ä¸­ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp ~/EasyRSA-Server1/pki/private/client1.key ~/openvpn-clients/files/
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>å°†è¯ä¹¦è¯·æ±‚æ–‡ä»¶ä¼ è¾“åˆ°&lt;code>CAä¸»æœº&lt;/code>ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp ~/EasyRSA-Server1/pki/reqs/client1.req /tmp
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="4">
&lt;li>è¿›å…¥&lt;code>CAä¸»æœº&lt;/code>ï¼Œå¯¼å…¥è¯ä¹¦è¯·æ±‚å¹¶è¿›è¡Œç­¾ç½²ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">cd&lt;/span> ~/EasyRSA-CA
./easyrsa import-req /tmp/client1.req client1
./easyrsa sign-req client client1
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="5">
&lt;li>æ¥ä¸‹æ¥ï¼Œå°†ç­¾å¥½åçš„è¯ä¹¦&lt;code>client1.crt&lt;/code>æ–‡ä»¶å‘é€å›&lt;code>OpenVPNä¸»æœº&lt;/code>ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp ~/EasyRSA-CA/pki/issued/client1.crt ~/openvpn-clients/files
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="6">
&lt;li>æœ€åä¸€æ­¥æ˜¯ä½¿ç”¨&lt;code>gen_config.sh&lt;/code>è„šæœ¬ç”Ÿæˆå®¢æˆ·ç«¯é…ç½®ï¼Œåˆ‡æ¢åˆ°&lt;code>~/openvpn-clients&lt;/code>ç›®å½•å¹¶ä½¿ç”¨å®¢æˆ·ç«¯åç§°ä½œä¸ºå‚æ•°è¿è¡Œè„šæœ¬ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">cd&lt;/span> ~/openvpn-clients
./gen_config.sh client1
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯¥è„šæœ¬å°†åœ¨&lt;code>~/client-configs/configs&lt;/code>ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸º&lt;code>client1.ovpn&lt;/code>çš„æ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@test openvpn-clients&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> ls ~/openvpn-clients/configs
client1.ovpn
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ­¤æ—¶ï¼Œå®¢æˆ·ç«¯é…ç½®å·²åˆ›å»ºï¼Œå¯ä»¥ç›´æ¥å°†é…ç½®æ–‡ä»¶ä¼ è¾“åˆ°è¦ç”¨ä½œå®¢æˆ·ç«¯çš„è®¾å¤‡ä¸Šã€‚&lt;/p>
&lt;p>å¦‚æœæƒ³è¦æ·»åŠ å…¶ä»–çš„å®¢æˆ·ç«¯ï¼Œé‡å¤è¿™äº›æ­¥éª¤å³å¯ã€‚&lt;/p>
&lt;h2 id="ä½¿ç”¨-openvpn">ä½¿ç”¨ OpenVPN&lt;/h2>
&lt;p>åœ¨&lt;code>Debian&lt;/code>ç³»ç³»ç»Ÿä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo apt update -y &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> sudo apt instal openvpn
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®‰è£…å®Œè½¯ä»¶åŒ…ä¹‹åï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿æ¥åˆ°&lt;code>OpenVPN&lt;/code>æœåŠ¡å™¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo openvpn --config client1.ovpn
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å¿«é€Ÿå®‰è£…-openvpn">å¿«é€Ÿå®‰è£… OpenVPN&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo apt update -y
sudo apt install -y openvpn
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä» github è·å–ä¸€é”®å®‰è£…è„šæœ¬:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">git clone https://github.com/angristan/openvpn-install.git
&lt;span class="nb">cd&lt;/span> openvpn-install
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>èµ‹äºˆè„šæœ¬å¯æ‰§è¡Œæƒé™:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">chmod +x openvpn-install
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œè„šæœ¬:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nv">AUTO_INSTALL&lt;/span>&lt;span class="o">=&lt;/span>y ./openvpn-install.sh
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>âš ï¸ æ³¨æ„: åœ¨å®¢æˆ·ç«¯ä½¿ç”¨ OpenVPN æ—¶, è¦ç¡®ä¿æœåŠ¡å™¨ç«¯çš„ OpenVPN ç›‘å¬çš„ç«¯å£å¤„äºæ”¾è¡ŒçŠ¶æ€.&lt;/p>
&lt;p>Linux å®¢æˆ·ç«¯ä½¿ç”¨:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo apt install network-manager-openvpn
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo openvpn ./client.ovpn
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Windows å®¢æˆ·ç«¯ä½¿ç”¨:&lt;/p>
&lt;p>ç›´æ¥å»&lt;a href="https://openvpn.net/community-downloads/"> OpenVPN å®˜æ–¹ä¸‹è½½ç«™ç‚¹&lt;/a>ä¸‹è½½ç„¶åå¯¼å…¥å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ &lt;code>client.ovpn&lt;/code>, ç„¶åå¯åŠ¨æœåŠ¡å³å¯.&lt;/p></description></item><item><title>WireGuard VPN for Ubuntu</title><link>https://agou-ops.top/post/wireguard-vpn-for-ubuntu/</link><pubDate>Tue, 19 May 2020 12:14:24 +0800</pubDate><guid>https://agou-ops.top/post/wireguard-vpn-for-ubuntu/</guid><description>&lt;h2 id="wireguard-ç®€ä»‹">WireGuard ç®€ä»‹&lt;/h2>
&lt;p>â€‹ WireGuardæ˜¯å…·æœ‰æœ€æ–°åŠ å¯†æŠ€æœ¯çš„ç°ä»£VPNï¼ˆè™šæ‹Ÿä¸“ç”¨ç½‘ï¼‰æŠ€æœ¯ã€‚ä¸IPsecå’ŒOpenVPNç­‰å…¶ä»–ç±»ä¼¼è§£å†³æ–¹æ¡ˆç›¸æ¯”ï¼ŒWireGuardæ›´å¿«ï¼Œæ›´æ˜“äºé…ç½®ä¸”æ€§èƒ½æ›´é«˜ã€‚å®ƒæ˜¯ä¸€ä¸ªè·¨å¹³å°ï¼Œå‡ ä¹å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¿è¡Œï¼ŒåŒ…æ‹¬Linuxï¼ŒWindowsï¼ŒAndroidå’ŒmacOSã€‚ Wireguardæ˜¯å¯¹ç­‰VPNã€‚å®ƒä¸ä½¿ç”¨å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å‹ã€‚æ ¹æ®å…¶é…ç½®ï¼Œå¯¹ç­‰æ–¹å¯ä»¥å……å½“ä¼ ç»Ÿçš„æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯ã€‚ WireGuardé€šè¿‡åœ¨å……å½“éš§é“çš„æ¯ä¸ªå¯¹ç­‰è®¾å¤‡ä¸Šåˆ›å»ºç½‘ç»œæ¥å£æ¥å·¥ä½œã€‚å¯¹ç­‰ä½“é€šè¿‡äº¤æ¢å’ŒéªŒè¯å…¬å…±å¯†é’¥ï¼ˆç±»ä¼¼äºSSHæ¨¡å‹ï¼‰æ¥ç›¸äº’è®¤è¯ã€‚å…¬é’¥ä¸éš§é“ä¸­å…è®¸çš„IPåœ°å€åˆ—è¡¨è¿›è¡Œæ˜ å°„ã€‚ VPNæµé‡å°è£…åœ¨UDPä¸­ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨å……å½“VPNæœåŠ¡å™¨çš„Ubuntu 18.04è®¡ç®—æœºä¸Šè®¾ç½®WireGuardã€‚æˆ‘ä»¬è¿˜å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•å°†WireGuardé…ç½®ä¸ºå®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯çš„æµé‡å°†é€šè¿‡Ubuntu 18.04æœåŠ¡å™¨è¿›è¡Œè·¯ç”±ã€‚æ­¤è®¾ç½®å¯ç”¨äºé˜²å¾¡ä¸­é—´äººæ”»å‡»ï¼ŒåŒ¿åæµè§ˆç½‘ç»œï¼Œç»•è¿‡å—åœ°åŸŸé™åˆ¶çš„å†…å®¹ï¼Œæˆ–å…è®¸æ‚¨çš„åŒäº‹åœ¨è¿œç¨‹å·¥ä½œæ—¶å®‰å…¨åœ°è¿æ¥åˆ°å…¬å¸ç½‘ç»œã€‚&lt;/p>
&lt;h2 id="wgå®‰è£…">WGå®‰è£…&lt;/h2>
&lt;ol>
&lt;li>æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨ï¼Œå¹¶å®‰è£…ç®¡ç†ç³»ç»Ÿå­˜å‚¨åº“æ‰€éœ€çš„å·¥å…·ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo apt update
sudo apt install software-properties-common
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>æ·»åŠ  WireGuard ä»“åº“ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo add-apt-repository ppa:wireguard/wireguard
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‡ºç°æç¤ºæ—¶ï¼ŒæŒ‰Enteré”®ç»§ç»­ã€‚ add-apt-repositoryä¹Ÿå°†è‡ªåŠ¨æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨ã€‚&lt;/p>
&lt;ol start="3">
&lt;li>å®‰è£…WireGuardè½¯ä»¶åŒ…ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo apt install wireguard
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>WireGuardä½œä¸ºå†…æ ¸æ¨¡å—è¿è¡Œï¼Œè¯¥æ¨¡å—è¢«ç¼–è¯‘ä¸º&lt;code>DKMS&lt;/code>æ¨¡å—ã€‚æˆåŠŸå®Œæˆåï¼Œæ‚¨å°†çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">wireguard:
Running module version sanity check.
- Original module
- No original module exists within this kernel
- Installation
- Installing to /lib/modules/4.15.0-88-generic/updates/dkms/
depmod...
DKMS: install completed.
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ›´æ–°å†…æ ¸æ—¶ï¼Œéœ€è¦å°†é’ˆå¯¹æ–°å†…æ ¸ç¼–è¯‘WireGuardæ¨¡å—ã€‚&lt;/p>
&lt;h2 id="é…ç½®wg">é…ç½®WG&lt;/h2>
&lt;p>WireGuard ç¨‹åºåŒ…é™„å¸¦äº†ä¸¤ä¸ªåä¸º&lt;code>wg&lt;/code>å’Œ&lt;code>wg-quick&lt;/code>çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ç”¨äºé…ç½®å’Œç®¡ç†WireGuardæ¥å£ã€‚&lt;/p>
&lt;p>è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥ç”Ÿæˆå…¬é’¥å’Œç§é’¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">wg genkey &lt;span class="p">|&lt;/span> sudo tee /etc/wireguard/privatekey &lt;span class="p">|&lt;/span> wg pubkey &lt;span class="p">|&lt;/span> sudo tee /etc/wireguard/publickey
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>â„¹ï¸ å…¬ç§é’¥æ”¾ç½®äº&lt;code>/etc/wireguard&lt;/code>ç›®å½•,å…¶ä¸­ç§é’¥ç»å¯¹ä¸èƒ½ä¸ä»»ä½•äººå…±äº«&lt;/p>
&lt;p>ç”Ÿæˆå¯†é’¥åï¼Œæˆ‘ä»¬éœ€è¦é…ç½®è·¯ç”±VPNçš„éš§é“è®¾å¤‡&lt;/p>
&lt;p>å¯ä»¥ä½¿ç”¨ipå’Œwgä»å‘½ä»¤è¡Œè®¾ç½®è®¾å¤‡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨åˆ›å»ºé…ç½®æ–‡ä»¶ã€‚&lt;/p>
&lt;p>åˆ›å»ºä¸€ä¸ªåä¸º&lt;code>wg0.conf&lt;/code>(æ–‡ä»¶åå¯ä»¥éšæ„)çš„æ–°æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cat &amp;gt;&amp;gt; /etc/wireguard/wg0.conf &lt;span class="s">&amp;lt;&amp;lt; EOF
&lt;/span>&lt;span class="s">[Interface]
&lt;/span>&lt;span class="s">Address = 192.168.159.0/24 # å¡«å†™ç½‘ç»œåœ°å€æ®µ
&lt;/span>&lt;span class="s">SaveConfig = true # å…³é—­æ—¶ï¼Œæ¥å£çš„å½“å‰çŠ¶æ€å°†ä¿å­˜åˆ°é…ç½®æ–‡ä»¶ä¸­
&lt;/span>&lt;span class="s">ListenPort = 51820 # ç›‘å¬ç«¯å£
&lt;/span>&lt;span class="s">PrivateKey = QNKQCtPo2E5saDnXORaIORhZH6NtcvIJPHqF9EdEL1o= # ç§é’¥æ–‡ä»¶,å³/etc/wireguard/privatekey
&lt;/span>&lt;span class="s">PostUp = iptables -A FORWARD -i %i -j ACCEPT; iptables -t nat -A POSTROUTING -o ens33 -j MASQUERADE # åœ¨å¯åŠ¨ä¹‹å‰æ‰§è¡Œçš„å‘½ä»¤æˆ–è„šæœ¬,ä½¿ç”¨iptableså¯ç”¨ä¼ªè£…,å…è®¸æµé‡ç¦»å¼€æœåŠ¡å™¨ï¼Œä»è€Œä½¿VPNå®¢æˆ·ç«¯å¯ä»¥è®¿é—®Internetã€‚
&lt;/span>&lt;span class="s">PostDown = iptables -D FORWARD -i %i -j ACCEPT; iptables -t nat -D POSTROUTING -o ens33 -j MASQUERADE # åœ¨å¯åŠ¨ä¹‹åæ‰§è¡Œçš„å‘½ä»¤æˆ–è„šæœ¬,æ¥å£å…³é—­åï¼Œiptablesè§„åˆ™å°†è¢«åˆ é™¤
&lt;/span>&lt;span class="s">EOF&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¿®æ”¹&lt;code>privatekey&lt;/code>å’Œ&lt;code>wg0.conf&lt;/code>çš„æƒé™, ä¿è¯å…¶å®‰å…¨æ€§ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo chmod &lt;span class="m">600&lt;/span> /etc/wireguard/&lt;span class="o">{&lt;/span>privatekey,wg0.conf&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®Œæˆåï¼Œä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„å±æ€§å¯åŠ¨&lt;code>wg0&lt;/code>æ¥å£ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ sudo wg-quick up wg0
* è¾“å‡ºå†…å®¹å¦‚ä¸‹æ‰€ç¤º:
&lt;span class="o">[&lt;/span>&lt;span class="c1">#] ip link add wg0 type wireguard&lt;/span>
&lt;span class="o">[&lt;/span>&lt;span class="c1">#] wg setconf wg0 /dev/fd/63&lt;/span>
&lt;span class="o">[&lt;/span>&lt;span class="c1">#] ip -4 address add 192.168.159.0/24 dev wg0&lt;/span>
&lt;span class="o">[&lt;/span>&lt;span class="c1">#] ip link set mtu 1420 up dev wg0&lt;/span>
&lt;span class="o">[&lt;/span>&lt;span class="c1">#] iptables -A FORWARD -i wg0 -j ACCEPT; iptables -t nat -A POSTROUTING -o ens33 -j MASQUERADE&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œ&lt;code>wg show wg0&lt;/code>æ£€æŸ¥æ¥å£çŠ¶æ€å’Œé…ç½®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ sudo wg show wg0
* è¾“å‡ºå†…å®¹å¦‚ä¸‹æ‰€ç¤º:
interface: wg0
public key: &lt;span class="nv">uD6Xex2eP5CEUVcVP3EZB5csh2JReWXthoVZMzURwCQ&lt;/span>&lt;span class="o">=&lt;/span>
private key: &lt;span class="o">(&lt;/span>hidden&lt;span class="o">)&lt;/span>
listening port: &lt;span class="m">51820&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¹Ÿå¯ä»¥è¿è¡Œ&lt;code>ip a show wg0&lt;/code>æ¥éªŒè¯æ¥å£çŠ¶æ€ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ ip a show wg0
* è¾“å‡ºå†…å®¹å¦‚ä¸‹æ‰€ç¤º:
4: wg0: &amp;lt;POINTOPOINT,NOARP,UP,LOWER_UP&amp;gt; mtu &lt;span class="m">1420&lt;/span> qdisc noqueue state UNKNOWN group default qlen &lt;span class="m">1000&lt;/span>
link/none
inet 192.168.159.0/24 scope global wg0
valid_lft forever preferred_lft forever
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è®¾ç½®wireguard å¼€æœºè‡ªå¯:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo systemctl &lt;span class="nb">enable&lt;/span> wg-quick@wg0
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æœåŠ¡å™¨ç½‘ç»œå’Œé˜²ç«å¢™é…ç½®">æœåŠ¡å™¨ç½‘ç»œå’Œé˜²ç«å¢™é…ç½®&lt;/h2>
&lt;p>ä¸ºäº†ä½¿&lt;code>NAT&lt;/code>æ­£å¸¸å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦å¯ç”¨IPè½¬å‘ï¼Œæ‰“å¼€&lt;code>/etc/sysctl.conf&lt;/code>æ–‡ä»¶ï¼Œå¹¶æ·»åŠ æˆ–å–æ¶ˆæ³¨é‡Šä»¥ä¸‹è¡Œï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">...
net.ipv4.ip_forward&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
...
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¿®æ”¹å®Œæˆä¹‹å, æ‰§è¡Œ&lt;code>sudo sysctl -p&lt;/code>ä½¿é…ç½®æ°¸ä¹…ç”Ÿæ•ˆ&lt;/p>
&lt;p>å¦‚æœä½ ä½¿ç”¨&lt;code>UFW&lt;/code>æ¥ç®¡ç†é˜²ç«å¢™ï¼Œåˆ™éœ€è¦åœ¨ç«¯å£51820ä¸Šæ‰“å¼€UDPé€šä¿¡ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo ufw allow 51820/udp
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è‡³æ­¤,WG SERVER å·²å®Œæˆé…ç½®&lt;/p>
&lt;h2 id="å®¢æˆ·ç«¯é…ç½®">å®¢æˆ·ç«¯é…ç½®&lt;/h2>
&lt;h3 id="linux--macos">Linux &amp;amp; macOS&lt;/h3>
&lt;p>å»å¾€å®˜æ–¹ä¸‹è½½ç«™ç‚¹(&lt;a href="https://wireguard.com/install/),">https://wireguard.com/install/),&lt;/a> æŸ¥çœ‹å¦‚ä½•å®‰è£…WireGuard&lt;/p>
&lt;ul>
&lt;li>
&lt;p>macOS App Store: &lt;a href="https://apps.apple.com/us/app/wireguard/id1441195209?ls=1">https://apps.apple.com/us/app/wireguard/id1441195209?ls=1&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;h4 id="ubuntu--1904-modulehttpslaunchpadnetwireguardarchiveubuntuwireguard--v1020200413--toolshttpslaunchpadnetwireguardarchiveubuntuwireguard--v1020200319">Ubuntu â‰¤ 19.04 [&lt;a href="https://launchpad.net/~wireguard/+archive/ubuntu/wireguard">module&lt;/a> â€“ v1.0.20200413 &amp;amp; &lt;a href="https://launchpad.net/~wireguard/+archive/ubuntu/wireguard">tools&lt;/a> â€“ v1.0.20200319]&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">$ sudo add-apt-repository ppa:wireguard/wireguard
$ sudo apt-get update
$ sudo apt-get install wireguard
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;p>è®¾ç½®Linuxå’ŒmacOSå®¢æˆ·ç«¯è¿‡ç¨‹åŸºæœ¬ç›¸åŒ, é¦–å…ˆç”Ÿæˆå…¬é’¥ä¸ç§é’¥&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">wg genkey &lt;span class="p">|&lt;/span> sudo tee /etc/wireguard/privatekey &lt;span class="p">|&lt;/span> wg pubkey &lt;span class="p">|&lt;/span> sudo tee /etc/wireguard/publickey
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ›å»º&lt;code>/etc/wireguard/wg0.conf&lt;/code>å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>Interface&lt;span class="o">]&lt;/span>
&lt;span class="nv">PrivateKey&lt;/span> &lt;span class="o">=&lt;/span> CLIENT_PRIVATE_KEY &lt;span class="c1"># /etc/wireguard/privatekey&lt;/span>
&lt;span class="nv">Address&lt;/span> &lt;span class="o">=&lt;/span> 192.168.43.0/24
&lt;span class="o">[&lt;/span>Peer&lt;span class="o">]&lt;/span>
&lt;span class="nv">PublicKey&lt;/span> &lt;span class="o">=&lt;/span> SERVER_PUBLIC_KEY &lt;span class="c1"># /etc/wireguard/publickey&lt;/span>
&lt;span class="nv">Endpoint&lt;/span> &lt;span class="o">=&lt;/span> SERVER_IP_ADDRESS:51820 &lt;span class="c1"># å¯¹æ–¹wireguard serverçš„ipå’Œç«¯å£&lt;/span>
&lt;span class="nv">AllowedIPs&lt;/span> &lt;span class="o">=&lt;/span> 0.0.0.0/0
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="windows">Windows&lt;/h3>
&lt;p>ç›´æ¥ä¸‹è½½å®¢æˆ·ç«¯å·¥å…·: &lt;a href="https://download.wireguard.com/windows-client/wireguard-amd64-0.1.0.msi">https://download.wireguard.com/windows-client/wireguard-amd64-0.1.0.msi&lt;/a>&lt;/p>
&lt;p>å®‰è£…å¥½è½¯ä»¶ä¹‹å, ç‚¹å‡»å·¦ä¸‹è§’çš„&lt;code>Add Tunnel&lt;/code>, åˆ›å»ºä¸€ä¸ªæ–°çš„éš§é“&lt;code>Create new tunnel&lt;/code>&lt;/p>
&lt;p>&lt;code>name&lt;/code>éšä¾¿èµ·å–½, å†…å®¹å¦‚ä¸‹:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>Interface&lt;span class="o">]&lt;/span>
&lt;span class="nv">PrivateKey&lt;/span> &lt;span class="o">=&lt;/span> MOeXEby5OG1xQBCP9AJEJEsxmxYDG1FHHzlcOgi/ClI&lt;span class="o">=&lt;/span>
&lt;span class="nv">Address&lt;/span> &lt;span class="o">=&lt;/span> 192.168.43.0/24
&lt;span class="o">[&lt;/span>Peer&lt;span class="o">]&lt;/span>
&lt;span class="nv">PublicKey&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">uD6Xex2eP5CEUVcVP3EZB5csh2JReWXthoVZMzURwCQ&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="c1"># æœåŠ¡å™¨ç«¯å…¬é’¥&lt;/span>
&lt;span class="nv">Endpoint&lt;/span> &lt;span class="o">=&lt;/span> 192.168.159.132:51820 &lt;span class="c1"># æœåŠ¡å™¨ipä»¥åŠç«¯å£&lt;/span>
&lt;span class="nv">AllowedIPs&lt;/span> &lt;span class="o">=&lt;/span> 0.0.0.0/0
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://s1.ax1x.com/2020/04/20/JQBW4K.png" alt="wg">&lt;/p>
&lt;h2 id="å°†å®¢æˆ·ç«¯å¯¹ç­‰æ–¹æ·»åŠ åˆ°æœåŠ¡å™¨">å°†å®¢æˆ·ç«¯å¯¹ç­‰æ–¹æ·»åŠ åˆ°æœåŠ¡å™¨&lt;/h2>
&lt;p>æœ€åä¸€æ­¥æ˜¯å°†å®¢æˆ·ç«¯å…¬é’¥å’ŒIPåœ°å€æ·»åŠ åˆ°æœåŠ¡å™¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># sudo wg set wg0 peer CLIENT_PUBLIC_KEY allowed-ips 10.0.0.2&lt;/span>
sudo wg &lt;span class="nb">set&lt;/span> wg0 peer T5ZTibLaWh9/3EzA1ZfCdiojM0HfXvh99mfVlqHpaU0&lt;span class="o">=&lt;/span> allowed-ips 192.168.43.0/24
sudo wg &lt;span class="nb">set&lt;/span> wg0 peer UqF/BDwShHFulAUN4yx0latMIiIW0Cbb+IuNHEYEBj0&lt;span class="o">=&lt;/span> allowed-ips 192.168.43.0/24
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¡®ä¿ä½¿ç”¨åœ¨å®¢æˆ·ç«¯è®¡ç®—æœºä¸Šç”Ÿæˆçš„å…¬ç”¨å¯†é’¥Â·ï¼ˆ&lt;code>sudo cat /etc/wireguard/publickey&lt;/code>ï¼‰Â·æ›´æ”¹&lt;code>CLIENT_PUBLIC_KEY&lt;/code>å¹¶è°ƒæ•´å®¢æˆ·ç«¯IPåœ°å€ï¼ˆå¦‚æœä¸åŒçš„è¯ï¼‰ï¼ŒWindowsç”¨æˆ·å¯ä»¥ä»WireGuardè½¯ä»¶å½“ä¸­å¤åˆ¶å…¬é’¥&lt;/p>
&lt;h3 id="linux-å’Œ-macos-å®¢æˆ·ç«¯">Linux å’Œ macos å®¢æˆ·ç«¯&lt;/h3>
&lt;p>åœ¨Linuxå®¢æˆ·ç«¯ä¸Šï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥æ‰“å¼€ç•Œé¢ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo wg-quick up wg0
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ï¼Œåº”è¯¥å·²è¿æ¥åˆ°UbuntuæœåŠ¡å™¨ï¼Œå¹¶ä¸”æ¥è‡ªå®¢æˆ·ç«¯è®¡ç®—æœºçš„æµé‡åº”é€šè¿‡è¯¥æœåŠ¡å™¨è¿›è¡Œè·¯ç”±ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•æ£€æŸ¥è¿æ¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ sudo wg
* è¾“å‡ºå†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š
interface: wg0
public key: sZThYo/0oECwzUsIKTa6LYXLhk+Jb/nqK4kCCP2pyFg&lt;span class="o">=&lt;/span>
private key: &lt;span class="o">(&lt;/span>hidden&lt;span class="o">)&lt;/span>
listening port: &lt;span class="m">48052&lt;/span>
fwmark: 0xca6c
peer: r3imyh3MCYggaZACmkx+CxlD6uAmICI8pe/PGq8+qCg&lt;span class="o">=&lt;/span>
endpoint: XXX.XXX.XXX.XXX:51820
allowed ips: 0.0.0.0/0
latest handshake: &lt;span class="m">1&lt;/span> minute, &lt;span class="m">22&lt;/span> seconds ago
transfer: 58.43 KiB received, 70.82 KiB sent
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœæ­¢å’Œå…³é—­éš§é“ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo wg-quick down wg0
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="windows-å®¢æˆ·ç«¯">Windows å®¢æˆ·ç«¯&lt;/h3>
&lt;p>ç‚¹å‡»è½¯ä»¶ä¸Šçš„&lt;code>Activate&lt;/code> å³å¯&lt;/p>
&lt;p>&lt;img src="https://s1.ax1x.com/2020/04/20/JQBuAP.png" alt="wg-2">&lt;/p>
&lt;h2 id="ä¸€é”®å®‰è£…-wireguard">ä¸€é”®å®‰è£… wireguard&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://github.com/angristan/wireguard-install">https://github.com/angristan/wireguard-install&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/l-n-s/wireguard-install">https://github.com/l-n-s/wireguard-install&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥&lt;/h2>
&lt;ul>
&lt;li>wireguard Quick Start : &lt;a href="https://www.wireguard.com/quickstart/">https://www.wireguard.com/quickstart/&lt;/a>&lt;/li>
&lt;li>wireguard Install : &lt;a href="https://www.wireguard.com/install/">https://www.wireguard.com/install/&lt;/a>&lt;/li>
&lt;/ul></description></item></channel></rss>