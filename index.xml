<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>AGou's blog</title><link>https://agou-ops.top/</link><description>Recent content on AGou's blog</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Thu, 16 Apr 2020 14:01:47 +0800</lastBuildDate><atom:link href="https://agou-ops.top/index.xml" rel="self" type="application/rss+xml"/><item><title>关于</title><link>https://agou-ops.top/aboutme/</link><pubDate>Thu, 16 Apr 2020 14:01:47 +0800</pubDate><guid>https://agou-ops.top/aboutme/</guid><description>&lt;p>这个人一点也不神秘,只是有点懒罢了.&lt;/p></description></item><item><title>Linux生成随机数</title><link>https://agou-ops.top/post/linux%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E6%95%B0/</link><pubDate>Mon, 01 Jun 2020 10:01:51 +0800</pubDate><guid>https://agou-ops.top/post/linux%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E6%95%B0/</guid><description>&lt;p>[TOC]&lt;/p>
&lt;h2 id="通过-openssl-生成">通过 openssl 生成&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> openssl rand -base64 &lt;span class="m">3&lt;/span>
xsSp
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> openssl rand -base64 &lt;span class="m">8&lt;/span>
&lt;span class="nv">8SlHCsBAiYw&lt;/span>&lt;span class="o">=&lt;/span>
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> openssl rand -base64 &lt;span class="m">10&lt;/span>
&lt;span class="nv">nUzBw8ngKGGqWw&lt;/span>&lt;span class="o">==&lt;/span>
&lt;span class="sb">`&lt;/span>openssl rand -base64 32&lt;span class="p">|&lt;/span>tr A-Z a-z&lt;span class="p">|&lt;/span>cut -c 1-10&lt;span class="sb">`&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="使用-date-命令生成">使用 date 命令生成&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> date +%s
&lt;span class="m">1539071518&lt;/span>
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> date +%N
&lt;span class="m">801398716&lt;/span>
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> date +%s%N
&lt;span class="m">1539071555311467855&lt;/span>
&lt;span class="sb">`&lt;/span>date +%s &lt;span class="p">|&lt;/span>sha256sum &lt;span class="p">|&lt;/span>base64 &lt;span class="p">|&lt;/span>head -c &lt;span class="m">10&lt;/span> &lt;span class="p">;&lt;/span>&lt;span class="nb">echo&lt;/span>&lt;span class="sb">`&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="使用-md5sum-生成随机数">使用 md5sum 生成随机数&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">date &lt;span class="p">|&lt;/span> md5sum
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="使用-dd-命令生成随机数">使用 dd 命令生成随机数&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">dd &lt;span class="k">if&lt;/span>&lt;span class="o">=&lt;/span>/dev/urandom &lt;span class="nv">bs&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="nv">count&lt;/span>&lt;span class="o">=&lt;/span>15&lt;span class="p">|&lt;/span>base64 -w &lt;span class="m">0&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="通过devrandom设备产生uuid">通过/dev/random设备产生uuid&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> cat /proc/sys/kernel/random/uuid
a3dfb0f2-f893-4e57-9d67-184a88d4cb5d
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> cat /proc/sys/kernel/random/uuid &lt;span class="p">|&lt;/span>cut -c 1-8
b80c60d8
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="使用系统环境变量-random">使用系统环境变量 RANDOM&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$RANDOM&lt;/span>
&lt;span class="m">14535&lt;/span>
&lt;span class="c1">##说明：linux系统下的环境变量$RANDOM的取值范围是：0–32767 。&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>产生0-25范围内的数，用这个环境变量对26取余即可。&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="k">$((&lt;/span>&lt;span class="nv">$RANDOM&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="m">26&lt;/span>&lt;span class="k">))&lt;/span>
&lt;span class="m">6&lt;/span>
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="k">$((&lt;/span>RANDOM%26&lt;span class="k">))&lt;/span>
&lt;span class="m">11&lt;/span>
&lt;span class="c1">##说明：第二个表达式RANDOM前面无$符号好像也可以。&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>产生6位数的整数，用这个环境变量加上100000即可。&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="k">$((&lt;/span>&lt;span class="nv">$RANDOM&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="m">100000&lt;/span>&lt;span class="k">))&lt;/span>
&lt;span class="m">117482&lt;/span>
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="k">$((&lt;/span>RANDOM+100000&lt;span class="k">))&lt;/span>
&lt;span class="m">126058&lt;/span>
&lt;span class="c1">##说明：第二个表达式RANDOM前面无$符号好像也可以。&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>产生加密的随机数码，将随机数管道给命令md5sum命令即可。&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$RANDOM&lt;/span> &lt;span class="p">|&lt;/span>md5sum
6ee8cd13547eb044ad13ba014573af6f -
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="4">
&lt;li>需要固定位数的随机数码，将随机数管道给命令md5sum命令再管道给cut命令即可。&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$RANDOM&lt;/span> &lt;span class="p">|&lt;/span>md5sum&lt;span class="p">|&lt;/span>cut -c 1-8
de3cfe23
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="使用第三方工具">使用第三方工具&lt;/h2>
&lt;ol>
&lt;li>expect 非交互式程序控制下用&lt;code>mkpasswd&lt;/code>命令：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">yum install -y expect
mkpasswd -l 7 &lt;span class="c1"># 生成七位密码包含大小写加特殊字符&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>使用&lt;code>pwgen&lt;/code>生成随机可读的密码：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">yum install pwgen
&lt;span class="c1"># 生成长度8，含有数字，含有大小写字母的密码4个，列打印&lt;/span>
pwgen -ncC &lt;span class="m">8&lt;/span> &lt;span class="m">4&lt;/span>
&lt;span class="c1"># 生成长度8，含有数字，含有小写字母，不包含歧义的密码4个，列打印&lt;/span>
pwgen -nABC &lt;span class="m">8&lt;/span> &lt;span class="m">4&lt;/span>
&lt;span class="c1"># 生成长度16，含有数字，含有大小写字母，含有特殊字符的密码8个，行打印&lt;/span>
pwgen -ncy1 &lt;span class="m">16&lt;/span> &lt;span class="m">8&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>参数说明：&lt;/p>
&lt;ul>
&lt;li>&lt;code>-c or –capitalize&lt;/code>密码中至少包含一个大写字母&lt;/li>
&lt;li>&lt;code>-A or –no-capitalize&lt;/code>密码中不包含大写字母&lt;/li>
&lt;li>&lt;code>-n or –numerals&lt;/code>密码中至少包含一个数字&lt;/li>
&lt;li>&lt;code>-0 or –no-numerals&lt;/code>密码中不包含数字&lt;/li>
&lt;li>&lt;code>-y or –symbols&lt;/code>密码中至少包含一个特殊符号&lt;/li>
&lt;li>&lt;code>-s or –secure&lt;/code>生成完全随机密码&lt;/li>
&lt;li>&lt;code>-B or –ambiguous&lt;/code>密码中不包含歧义字符（例如1,l,O,0）&lt;/li>
&lt;li>&lt;code>-H or –sha1=path/to/file[#seed]&lt;/code>使用SHA1 hash给定的文件作为一个随机种子&lt;/li>
&lt;li>&lt;code>-C&lt;/code>在列中打印生成的密码&lt;/li>
&lt;li>&lt;code>-1&lt;/code>不要在列中打印生成的密码，即一行一个密码&lt;/li>
&lt;li>&lt;code>-v or –no-vowels&lt;/code>不要使用任何元音，以避免偶然的脏话&lt;/li>
&lt;/ul>
&lt;ol start="3">
&lt;li>其他第三方工具：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">randpw、spw、gpg、xkcdpass
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="参考链接">参考链接&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://blog.csdn.net/yuki5233/article/details/82997001">https://blog.csdn.net/yuki5233/article/details/82997001&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Scrcpy Android投屏神器</title><link>https://agou-ops.top/post/scrcpy-android%E6%8A%95%E5%B1%8F%E7%A5%9E%E5%99%A8/</link><pubDate>Thu, 28 May 2020 20:22:13 +0800</pubDate><guid>https://agou-ops.top/post/scrcpy-android%E6%8A%95%E5%B1%8F%E7%A5%9E%E5%99%A8/</guid><description>&lt;h2 id="scrcpy-简介">Scrcpy 简介&lt;/h2>
&lt;p>应用程序可显示和控制通过USB（或通过TCP / IP）连接的Android设备。它不需要任何根访问权限。它适用于GNU / Linux，Windows和macOS。&lt;/p>
&lt;p>github地址：&lt;a href="https://github.com/Genymobile/scrcpy">https://github.com/Genymobile/scrcpy&lt;/a>&lt;/p>
&lt;h2 id="配置环境">配置环境&lt;/h2>
&lt;ol>
&lt;li>安装&lt;code>adb&lt;/code>服务，使用数据线连接自己的安卓设备，并查看自己的安卓设备：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo apt-get install android-tools-adb
adb start-server
$ lsusb
Bus &lt;span class="m">002&lt;/span> Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus &lt;span class="m">001&lt;/span> Device 005: ID 0bda:0821 Realtek Semiconductor Corp.
Bus &lt;span class="m">001&lt;/span> Device 004: ID 0bda:0129 Realtek Semiconductor Corp. RTS5129 Card Reader Controller
Bus &lt;span class="m">001&lt;/span> Device 003: ID 13d3:a745 IMC Networks
Bus &lt;span class="m">001&lt;/span> Device 054: ID &lt;span class="sb">`&lt;/span>24ae:1813&lt;span class="sb">`&lt;/span>
...
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>找到自己的安卓设备哪一行，&lt;code>24ae&lt;/code>、&lt;code>1813&lt;/code>在下面会用到。&lt;/p>
&lt;ol start="2">
&lt;li>创建设备文件：&lt;/li>
&lt;/ol>
&lt;p>下面命令中的名称&lt;code>71-android&lt;/code>是自定义的，我的这个代表安卓7.1的意思。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">echo&lt;/span> 0x12d1 &amp;gt; ~/.android/adb_usb.ini
touch /etc/udev/rules.d/71-android.rules
gedit /etc/udev/rules.d/71-android.rules
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将以下内容写入刚刚创建的文件，注意，下面的&lt;code>24ae&lt;/code>、&lt;code>1813&lt;/code>要改成自己的安卓设备的id（见上）：&lt;/p>
&lt;blockquote>
&lt;p>SUBSYSTEM&amp;quot;usb&amp;rdquo;, ATTRS{idVendor}&amp;ldquo;24ae&amp;rdquo;, ATTRS{idProduct}==&amp;quot;1813&amp;rdquo;, MODE=&amp;quot;0666&amp;rdquo;&lt;/p>
&lt;/blockquote>
&lt;p>更改文件权限：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">chmod &lt;span class="m">666&lt;/span> /etc/udev/rules.d/90-android.rules
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>重启 ADB 服务：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">service udev restart
adb kill-server
adb start-server
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="scrcpy-安装与使用">Scrcpy 安装与使用&lt;/h2>
&lt;p>安装：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># 使用snap安装&lt;/span>
sudo snap install scrcpy
&lt;span class="c1"># 或者&lt;/span>
apt install scrcpy
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>列出设备：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">scrcpy.adb devices
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>开始投屏：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">scrcpy
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="设置无线连接android设备">设置无线连接Android设备&lt;/h2>
&lt;p>ℹ️先使用数据线将手机和电脑连接并在手机端开启「开发者选项」及「USB 调试」&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># 开启手机端口&lt;/span>
adb tcpip &lt;span class="m">6666&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>拔出数据线，开启无线连接：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">adb connect 192.168.8.154:6666
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>192.168.8.154&lt;/code>为你Android设备的IP地址，可以通过路由器后台获取或者在手机上使用相关软件进行获取。&lt;/p>
&lt;p>启动 scrcpy ：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">scrcpy
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="scrcpy-快捷键">Scrcpy 快捷键&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Action&lt;/th>
&lt;th>Shortcut&lt;/th>
&lt;th>Shortcut (macOS)&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Switch fullscreen mode&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>f&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>f&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Rotate display left&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>←&lt;/code> &lt;em>(left)&lt;/em>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>←&lt;/code> &lt;em>(left)&lt;/em>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Rotate display right&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>→&lt;/code> &lt;em>(right)&lt;/em>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>→&lt;/code> &lt;em>(right)&lt;/em>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Resize window to 1:1 (pixel-perfect)&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>g&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>g&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Resize window to remove black borders&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>x&lt;/code> | &lt;em>Double-click¹&lt;/em>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>x&lt;/code> | &lt;em>Double-click¹&lt;/em>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Click on &lt;code>HOME&lt;/code>&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>h&lt;/code> | &lt;em>Middle-click&lt;/em>&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>h&lt;/code> | &lt;em>Middle-click&lt;/em>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Click on &lt;code>BACK&lt;/code>&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>b&lt;/code> | &lt;em>Right-click²&lt;/em>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>b&lt;/code> | &lt;em>Right-click²&lt;/em>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Click on &lt;code>APP_SWITCH&lt;/code>&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>s&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>s&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Click on &lt;code>MENU&lt;/code>&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>m&lt;/code>&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>m&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Click on &lt;code>VOLUME_UP&lt;/code>&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>↑&lt;/code> &lt;em>(up)&lt;/em>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>↑&lt;/code> &lt;em>(up)&lt;/em>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Click on &lt;code>VOLUME_DOWN&lt;/code>&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>↓&lt;/code> &lt;em>(down)&lt;/em>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>↓&lt;/code> &lt;em>(down)&lt;/em>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Click on &lt;code>POWER&lt;/code>&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>p&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>p&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Power on&lt;/td>
&lt;td>&lt;em>Right-click²&lt;/em>&lt;/td>
&lt;td>&lt;em>Right-click²&lt;/em>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Turn device screen off (keep mirroring)&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>o&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>o&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Turn device screen on&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>Shift&lt;/code>+&lt;code>o&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>Shift&lt;/code>+&lt;code>o&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Rotate device screen&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>r&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>r&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Expand notification panel&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>n&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>n&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Collapse notification panel&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>Shift&lt;/code>+&lt;code>n&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>Shift&lt;/code>+&lt;code>n&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Copy device clipboard to computer&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>c&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>c&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Paste computer clipboard to device&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>v&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>v&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Copy computer clipboard to device and paste&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>Shift&lt;/code>+&lt;code>v&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>Shift&lt;/code>+&lt;code>v&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Enable/disable FPS counter (on stdout)&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code>+&lt;code>i&lt;/code>&lt;/td>
&lt;td>&lt;code>Cmd&lt;/code>+&lt;code>i&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;em>¹Double-click on black borders to remove them.&lt;/em>
&lt;em>²Right-click turns the screen on if it was off, presses BACK otherwise.&lt;/em>&lt;/p>
&lt;h2 id="参考链接">参考链接&lt;/h2>
&lt;ul>
&lt;li>Scrcpy Documentation: &lt;a href="https://github.com/Genymobile/scrcpy">https://github.com/Genymobile/scrcpy&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>OpenVPN for CentOS</title><link>https://agou-ops.top/post/openvpn-for-centos/</link><pubDate>Thu, 21 May 2020 19:42:06 +0800</pubDate><guid>https://agou-ops.top/post/openvpn-for-centos/</guid><description>&lt;h2 id="openvpn-简介">OpenVPN 简介&lt;/h2>
&lt;p>OpenVPN 是一个基于 OpenSSL 库的应用层 VPN 实现。和传统 VPN 相比，它的优点是简单易用。 [1]&lt;/p>
&lt;p>OpenVPN允许参与建立VPN的单点使用共享金钥，电子证书，或者用户名/密码来进行身份验证。它大量使用了OpenSSL加密库中的SSLv3/TLSv1 协议函式库。OpenVPN能在Solaris、Linux、OpenBSD、FreeBSD、NetBSD、Mac OS X与Windows 2000/XP/Vista上运行，并包含了许多安全性的功能。它并不是一个基于Web的VPN软件，也不与IPsec及其他VPN软件包兼容。&lt;/p>
&lt;h2 id="openvpn-安装">OpenVPN 安装&lt;/h2>
&lt;h3 id="使用easyrsa构建-ca">使用&lt;code>EasyRSA&lt;/code>构建 CA&lt;/h3>
&lt;ol>
&lt;li>首先从项目&lt;a href="https://github.com/OpenVPN/easy-rsa">Github存储库&lt;/a>下载EasyRSA的最新版本并解压：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">cd&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> wget https://github.com/OpenVPN/easy-rsa/releases/download/v3.0.5/EasyRSA-nix-3.0.7.tgz
tar xzf EasyRSA-3.0.7.tgz
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>复制模板文件，并进行适当修改：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">mv EasyRSA-3.0.7 EasyRSA-CA&lt;span class="p">;&lt;/span> &lt;span class="nb">cd&lt;/span> EasyRSA-CA
cp vars.example vars
&lt;span class="c1"># ---------- 编辑 vars 文件内容`95`行左右 ----------&lt;/span>
set_var EASYRSA_REQ_COUNTRY &lt;span class="s2">&amp;#34;CN&amp;#34;&lt;/span>
set_var EASYRSA_REQ_PROVINCE &lt;span class="s2">&amp;#34;Shandong&amp;#34;&lt;/span>
set_var EASYRSA_REQ_CITY &lt;span class="s2">&amp;#34;Jinan&amp;#34;&lt;/span>
set_var EASYRSA_REQ_ORG &lt;span class="s2">&amp;#34;AGou&amp;#34;&lt;/span>
set_var EASYRSA_REQ_EMAIL &lt;span class="s2">&amp;#34;AGou-ops@foxmail.com&amp;#34;&lt;/span>
set_var EASYRSA_REQ_OU &lt;span class="s2">&amp;#34;Community&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>修改完成之后保存退出。&lt;/p>
&lt;ol start="3">
&lt;li>初始化&lt;code>PKI&lt;/code>：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@test EasyRSA-CA&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> ./easyrsa init-pki
Note: using Easy-RSA configuration from: /root/EasyRSA-3.0.7/vars
init-pki complete&lt;span class="p">;&lt;/span> you may now create a CA or requests.
Your newly created PKI dir is: /root/EasyRSA-3.0.7/pki
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="4">
&lt;li>接下来建立&lt;code>CA&lt;/code>：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@test EasyRSA-CA&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> ./easyrsa build-ca nopass
Note: using Easy-RSA configuration from: /root/EasyRSA-3.0.7/vars
Using SSL: openssl OpenSSL 1.0.2k-fips &lt;span class="m">26&lt;/span> Jan &lt;span class="m">2017&lt;/span>
Generating RSA private key, &lt;span class="m">2048&lt;/span> bit long modulus
...............+++
............................................................................................................................+++
e is &lt;span class="m">65537&lt;/span> &lt;span class="o">(&lt;/span>0x10001&lt;span class="o">)&lt;/span>
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter &lt;span class="s1">&amp;#39;.&amp;#39;&lt;/span>, the field will be left blank.
-----
Common Name &lt;span class="o">(&lt;/span>eg: your user, host, or server name&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Easy-RSA CA&lt;span class="o">]&lt;/span>:
CA creation &lt;span class="nb">complete&lt;/span> and you may now import and sign cert requests.
Your new CA certificate file &lt;span class="k">for&lt;/span> publishing is at:
/root/EasyRSA-3.0.7/pki/ca.crt
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>完成后，该脚本将创建两个文件-CA公共证书&lt;code>PKI/ca.crt&lt;/code>和CA私钥&lt;code>PKI/private/ca.key&lt;/code>&lt;/p>
&lt;h3 id="安装-openvpn-和-easyrsa">安装 OpenVPN 和 EasyRSA&lt;/h3>
&lt;ol>
&lt;li>可以在 OpenVPN 的官方 github 仓库 下载最新源码包进行编译安装，在这里为了方便，我使用&lt;code>epel&lt;/code>仓库进行安装：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">yum install epel-release -y
yum install openvpn -y
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>获取最新版本的&lt;code>EasyRSA&lt;/code>：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">cd&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> wget https://github.com/OpenVPN/easy-rsa/releases/download/v3.0.5/EasyRSA-nix-3.0.7.tgz
tar xzf EasyRSA-3.0.7.tgz
mv EasyRSA-3.0.7 EasyRSA-Sever1
&lt;span class="nb">cd&lt;/span> EasyRSA-Sever1
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>尽管我们已经在 CA 主机上初始化了PKI，但是我们还需要在 &lt;code>OpenVPN 服务器&lt;/code>上创建一个新的 PKI ：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@test EasyRSA-Server1&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> ./easyrsa init-pki
Note: using Easy-RSA configuration from: /root/EasyRSA-Server1/vars
init-pki complete&lt;span class="p">;&lt;/span> you may now create a CA or requests.
Your newly created PKI dir is: /root/EasyRSA-Server1/pki
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="创建diffie-hellman和hmac密钥">创建&lt;code>Diffie-Hellman&lt;/code>和&lt;code>HMAC&lt;/code>密钥&lt;/h3>
&lt;p>生成一个&lt;code>Diffie-Hellman&lt;/code>密钥，该密钥将在密钥交换期间使用，并使用&lt;code>HMAC&lt;/code>签名文件为连接添加附加的安全层。&lt;/p>
&lt;ol>
&lt;li>在&lt;code>OpenVPN&lt;/code>服务器上，生成&lt;code>Diffie-Hellman&lt;/code>密钥：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">cd&lt;/span> ~/EasyRSA-Server1
./easyrsa gen-dh
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>复制该文件到&lt;code>/etc/openvpn&lt;/code>目录中去：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp /root/EasyRSA-Server1/pki/dh.pem /etc/openvpn
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>接下来，使用&lt;code>openvpn&lt;/code>二进制文件生成&lt;code>HMAC&lt;/code>签名：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">openvpn --genkey --secret ta.key
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后将生成的&lt;code>ta.key&lt;/code>复制到&lt;code>/etc/openvpn&lt;/code>目录中去：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp ta.key /etc/openvpn
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="创建服务器证书和私钥">创建服务器证书和私钥&lt;/h3>
&lt;ol>
&lt;li>进入&lt;code>OpenVPN服务器&lt;/code>上的EasyRSA目录，并为服务器和证书请求文件生成一个新的私钥：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">cd&lt;/span> ~/EasyRSA-Server1
./easyrsa gen-req server1 nopass
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>该命令将创建两个文件，一个私钥（&lt;code>server1.key&lt;/code>）和一个证书请求文件（&lt;code>server1.req&lt;/code>）&lt;/p>
&lt;ol start="2">
&lt;li>将生成的私钥复制到&lt;code>/etc/openvpn&lt;/code>目录：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp /root/EasyRSA-Server1/pki/private/server1.key /etc/openvpn/
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>将证书请求发送到&lt;code>CA&lt;/code>主机（这里我CA主机与OpenVPN为同一主机）：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp ~/EasyRSA-Server1/pki/reqs/server1.req /tmp
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="4">
&lt;li>登录&lt;code>CA主机&lt;/code>，切换到 EasyRSA 目录并导入证书请求文件：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">cd&lt;/span> ~/EasyRSA-CA
./easyrsa import-req /tmp/server1.req server1
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>此命令只是将请求文件复制到&lt;code>pki/reqs&lt;/code>目录中。&lt;/p>
&lt;ol start="5">
&lt;li>在&lt;code>CA主机&lt;/code>上，签署证书：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">./easyrsa sign-req server server1
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>确认信息无误之后，输入 yes 然后点击回车即可。&lt;/p>
&lt;ol start="6">
&lt;li>在&lt;code>CA主机&lt;/code>上，将签名的证书&lt;code>server1.crt&lt;/code>和&lt;code>ca.crt&lt;/code>文件传发送回&lt;code>OpenVPN主机&lt;/code>：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp ~/EasyRSA-CA/pki/issued/server1.crt /etc/openvpn/
cp ~/EasyRSA-CA/pki/ca.crt /etc/openvpn/
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>⚠️ 这里需要注意的是：我的&lt;code>CA主机&lt;/code>和&lt;code>OpenVPN&lt;/code>主机是同一主机，所以上面的&lt;code>/etc/openvpn&lt;/code>目录是&lt;code>OpenVPN主机&lt;/code>的。&lt;/p>
&lt;p>所有步骤都完成之后，在&lt;code>/etc/openvpn&lt;/code>目录下应当有这些文件存在：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@test EasyRSA-CA&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> ls /etc/openvpn/
ca.crt client dh.pem server server1.crt server1.key ta.key
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="配置openvpn服务">配置&lt;code>OpenVPN&lt;/code>服务&lt;/h3>
&lt;ol>
&lt;li>将 OpenVPN 的模板配置文件复制到&lt;code>/etc/openvpn&lt;/code>：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp /usr/share/doc/openvpn-2.4.9/sample/sample-config-files/server.conf /etc/openvpn/server1.conf
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>修改&lt;code>server1.conf&lt;/code>，找到证书，密钥和DH参数指令并更改文件名：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">user nobody
group nogroup
&lt;span class="c1"># ---------- 大约在78行左右 ----------&lt;/span>
cert server1.crt
key server1.key
dh dh.pem
&lt;span class="c1"># 在文件末尾添加以下行。该指令会将消息身份验证算法（HMAC）从SHA1更改为SHA256&lt;/span>
auth SHA256
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ℹ️可选： 要通过VPN重定向客户端流量，请找到并取消注释&lt;code>redirect-gateway&lt;/code>和&lt;code>dhcp-option&lt;/code>选项：&lt;/p>
&lt;p>&lt;code>/etc/openvpn/server1.conf&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="na">push &amp;#34;redirect-gateway def1 bypass-dhcp&amp;#34;&lt;/span>
&lt;span class="na">push &amp;#34;dhcp-option DNS 208.67.222.222&amp;#34;&lt;/span>
&lt;span class="na">push &amp;#34;dhcp-option DNS 208.67.220.220&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>默认情况下，使用OpenDNS解析器。您可以更改它并使用CloudFlare，Google或您想要的任何其他DNS解析器。&lt;/p>
&lt;p>完整配置文件参考：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">port 1194
proto udp
dev tun
ca ca.crt
cert server1.crt
key server1.key # This file should be kept secret
dh dh.pem
server 10.8.0.0 255.255.255.0
ifconfig-pool-persist ipp.txt
push &amp;#34;redirect-gateway def1 bypass-dhcp&amp;#34;
push &amp;#34;dhcp-option DNS 208.67.222.222&amp;#34;
push &amp;#34;dhcp-option DNS 208.67.220.220&amp;#34;
keepalive 10 120
tls-auth ta.key 0 # This file is secret
cipher AES-256-CBC
user nobody
group nobody
persist-key
persist-tun
status openvpn-status.log
verb 3
explicit-exit-notify 1
auth SHA256
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="启动-openvpn-服务">启动 OpenVPN 服务&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">systemctl start openvpn@server1
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>成功启动之后，OpenVPN Server 会创建一个 tun 设备，即&lt;code>tun0&lt;/code>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@test openvpn&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> ip a show tun0
3: tun0: &amp;lt;POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP&amp;gt; mtu &lt;span class="m">1500&lt;/span> qdisc pfifo_fast state UNKNOWN group default qlen &lt;span class="m">100&lt;/span>
link/none
inet 10.8.0.1 peer 10.8.0.2/32 scope global tun0
valid_lft forever preferred_lft forever
inet6 fe80::afaa:c6f7:7ae8:3a76/64 scope link flags &lt;span class="m">800&lt;/span>
valid_lft forever preferred_lft forever
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>为了正确转发网络数据包，我们需要启用IP转发：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;net.ipv4.ip_forward = 1&amp;#34;&lt;/span> &amp;gt;&amp;gt; /etc/sysctl.conf
sysctl -p
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="配置客户端接口">配置客户端接口&lt;/h2>
&lt;p>创建一个单独的SSL证书，并为每个VPN客户端生成一个不同的配置文件。&lt;/p>
&lt;p>客户端私钥和证书请求可以在客户端计算机或服务器上生成。为简单起见，我们将在服务器上生成证书请求，然后将其发送到CA进行签名。&lt;/p>
&lt;p>生成客户端证书和配置文件的整个过程如下：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>在OpenVPN服务器上生成私钥和证书请求；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>将请求发送到要签名的CA计算机；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>将签名的SSL证书复制到OpenVPN服务器并生成配置文件；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>将配置文件发送到VPN客户端的计算机。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>首先，在&lt;code>OpenVPN主机&lt;/code>上创建一组目录来存放客户端文件：&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">mkdir -p ~/openvpn-clients/&lt;span class="o">{&lt;/span>configs,base,files&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;code>base&lt;/code> 目录将存储将在所有客户端文件之间共享的基本文件和配置；&lt;/li>
&lt;li>&lt;code>configs&lt;/code> 目录将存储生成的客户端配置；&lt;/li>
&lt;li>&lt;code>files&lt;/code> 目录将存储特定于客户端的证书/密钥对。&lt;/li>
&lt;/ul>
&lt;ol start="2">
&lt;li>复制&lt;code>ca.crt&lt;/code>和&lt;code>ta.key&lt;/code>文件到&lt;code>~/openvpn-clients/base&lt;/code>目录：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp ~/EasyRSA-Server1/ta.key ~/openvpn-clients/base/
cp /etc/openvpn/ca.crt ~/openvpn-clients/base/
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>将示例客户端配置文件复制到&lt;code>~/openvpn-clients/base/&lt;/code>目录下：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp /usr/share/doc/openvpn-2.4.9/sample/sample-config-files/client.conf ~/openvpn-clients/base/
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="4">
&lt;li>编辑&lt;code>client.conf&lt;/code>文件以匹配我们的服务器配置：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">remote 172.16.1.131 &lt;span class="m">1194&lt;/span>
&lt;span class="c1"># 在文件结尾添加以下内容&lt;/span>
auth SHA256
key-direction &lt;span class="m">1&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>完整配置文件参考如下所示：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">client
dev tun
proto udp
remote 172.16.1.131 1194
resolv-retry infinite
nobind
persist-key
persist-tun
remote-cert-tls server
cipher AES-256-CBC
verb 3
auth SHA256
key-direction 1
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="5">
&lt;li>接下来，创建一个简单的bash脚本，它将基本配置和文件与客户端证书和密钥合并，并将生成的配置存储在&lt;code>~/openvpn-clients/configs&lt;/code>目录中：&lt;/li>
&lt;/ol>
&lt;p>&lt;code>vim ~/openvpn-clients/gen_config.sh&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="nv">FILES_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$HOME&lt;/span>/openvpn-clients/files
&lt;span class="nv">BASE_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$HOME&lt;/span>/openvpn-clients/base
&lt;span class="nv">CONFIGS_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$HOME&lt;/span>/openvpn-clients/configs
&lt;span class="nv">BASE_CONF&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">BASE_DIR&lt;/span>&lt;span class="si">}&lt;/span>/client.conf
&lt;span class="nv">CA_FILE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">BASE_DIR&lt;/span>&lt;span class="si">}&lt;/span>/ca.crt
&lt;span class="nv">TA_FILE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">BASE_DIR&lt;/span>&lt;span class="si">}&lt;/span>/ta.key
&lt;span class="nv">CLIENT_CERT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">FILES_DIR&lt;/span>&lt;span class="si">}&lt;/span>/&lt;span class="si">${&lt;/span>&lt;span class="nv">1&lt;/span>&lt;span class="si">}&lt;/span>.crt
&lt;span class="nv">CLIENT_KEY&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">FILES_DIR&lt;/span>&lt;span class="si">}&lt;/span>/&lt;span class="si">${&lt;/span>&lt;span class="nv">1&lt;/span>&lt;span class="si">}&lt;/span>.key
&lt;span class="c1"># Test for files&lt;/span>
&lt;span class="k">for&lt;/span> i in &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$BASE_CONF&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$CA_FILE&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$TA_FILE&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$CLIENT_CERT&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$CLIENT_KEY&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> ! -f &lt;span class="nv">$i&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34; The file &lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2"> does not exist&amp;#34;&lt;/span>
&lt;span class="nb">exit&lt;/span> &lt;span class="m">1&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> ! -r &lt;span class="nv">$i&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34; The file &lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2"> is not readable.&amp;#34;&lt;/span>
&lt;span class="nb">exit&lt;/span> &lt;span class="m">1&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;span class="c1"># Generate client config&lt;/span>
cat &amp;gt; &lt;span class="si">${&lt;/span>&lt;span class="nv">CONFIGS_DIR&lt;/span>&lt;span class="si">}&lt;/span>/&lt;span class="si">${&lt;/span>&lt;span class="nv">1&lt;/span>&lt;span class="si">}&lt;/span>.ovpn &lt;span class="s">&amp;lt;&amp;lt;EOF
&lt;/span>&lt;span class="s">$(cat ${BASE_CONF})
&lt;/span>&lt;span class="s">&amp;lt;key&amp;gt;
&lt;/span>&lt;span class="s">$(cat ${CLIENT_KEY})
&lt;/span>&lt;span class="s">&amp;lt;/key&amp;gt;
&lt;/span>&lt;span class="s">&amp;lt;cert&amp;gt;
&lt;/span>&lt;span class="s">$(cat ${CLIENT_CERT})
&lt;/span>&lt;span class="s">&amp;lt;/cert&amp;gt;
&lt;/span>&lt;span class="s">&amp;lt;ca&amp;gt;
&lt;/span>&lt;span class="s">$(cat ${CA_FILE})
&lt;/span>&lt;span class="s">&amp;lt;/ca&amp;gt;
&lt;/span>&lt;span class="s">&amp;lt;tls-auth&amp;gt;
&lt;/span>&lt;span class="s">$(cat ${TA_FILE})
&lt;/span>&lt;span class="s">&amp;lt;/tls-auth&amp;gt;
&lt;/span>&lt;span class="s">EOF&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>赋予执行权限：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">chmod +x ~/openvpn-clients/gen_config.sh
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="创建客户端证书私钥和配置">创建客户端证书私钥和配置&lt;/h2>
&lt;p>生成客户端私钥和证书请求的过程与生成服务器密钥和证书请求的过程相同。&lt;/p>
&lt;ol>
&lt;li>登录&lt;code>OpenVPN主机&lt;/code>为客户端生成一个新的私钥和一个证书请求：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">cd&lt;/span> ~/EasyRSA-Server1
./easyrsa gen-req client1 nopass
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>将私钥&lt;code>client1.key&lt;/code>复制到&lt;code>~/openvpn-clients/files&lt;/code>中：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp ~/EasyRSA-Server1/pki/private/client1.key ~/openvpn-clients/files/
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>将证书请求文件传输到&lt;code>CA主机&lt;/code>：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp ~/EasyRSA-Server1/pki/reqs/client1.req /tmp
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="4">
&lt;li>进入&lt;code>CA主机&lt;/code>，导入证书请求并进行签署：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">cd&lt;/span> ~/EasyRSA-CA
./easyrsa import-req /tmp/client1.req client1
./easyrsa sign-req client client1
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="5">
&lt;li>接下来，将签好名的证书&lt;code>client1.crt&lt;/code>文件发送回&lt;code>OpenVPN主机&lt;/code>：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cp ~/EasyRSA-CA/pki/issued/client1.crt ~/openvpn-clients/files
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="6">
&lt;li>最后一步是使用&lt;code>gen_config.sh&lt;/code>脚本生成客户端配置，切换到&lt;code>~/openvpn-clients&lt;/code>目录并使用客户端名称作为参数运行脚本：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">cd&lt;/span> ~/openvpn-clients
./gen_config.sh client1
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>该脚本将在&lt;code>~/client-configs/configs&lt;/code>目录中创建一个名为&lt;code>client1.ovpn&lt;/code>的文件：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@test openvpn-clients&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> ls ~/openvpn-clients/configs
client1.ovpn
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>此时，客户端配置已创建，可以直接将配置文件传输到要用作客户端的设备上。&lt;/p>
&lt;p>如果想要添加其他的客户端，重复这些步骤即可。&lt;/p>
&lt;h2 id="使用-openvpn">使用 OpenVPN&lt;/h2>
&lt;p>在&lt;code>Debian&lt;/code>系系统下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo apt update -y &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> sudo apt instal openvpn
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装完软件包之后，使用以下命令连接到&lt;code>OpenVPN&lt;/code>服务器：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo openvpn --config client1.ovpn
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="快速安装-openvpn">快速安装 OpenVPN&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo apt update -y
sudo apt install -y openvpn
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>从 github 获取一键安装脚本:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">git clone https://github.com/angristan/openvpn-install.git
&lt;span class="nb">cd&lt;/span> openvpn-install
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>赋予脚本可执行权限:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">chmod +x openvpn-install
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>执行脚本:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nv">AUTO_INSTALL&lt;/span>&lt;span class="o">=&lt;/span>y ./openvpn-install.sh
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>⚠️ 注意: 在客户端使用 OpenVPN 时, 要确保服务器端的 OpenVPN 监听的端口处于放行状态.&lt;/p>
&lt;p>Linux 客户端使用:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo apt install network-manager-openvpn
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo openvpn ./client.ovpn
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Windows 客户端使用:&lt;/p>
&lt;p>直接去&lt;a href="https://openvpn.net/community-downloads/"> OpenVPN 官方下载站点&lt;/a>下载然后导入客户端配置文件 &lt;code>client.ovpn&lt;/code>, 然后启动服务即可.&lt;/p></description></item><item><title>WireGuard VPN for Ubuntu</title><link>https://agou-ops.top/post/wireguard-vpn-for-ubuntu/</link><pubDate>Tue, 19 May 2020 12:14:24 +0800</pubDate><guid>https://agou-ops.top/post/wireguard-vpn-for-ubuntu/</guid><description>&lt;h2 id="wireguard-简介">WireGuard 简介&lt;/h2>
&lt;p>​ WireGuard是具有最新加密技术的现代VPN（虚拟专用网）技术。与IPsec和OpenVPN等其他类似解决方案相比，WireGuard更快，更易于配置且性能更高。它是一个跨平台，几乎可以在任何地方运行，包括Linux，Windows，Android和macOS。 Wireguard是对等VPN。它不使用客户端-服务器模型。根据其配置，对等方可以充当传统的服务器或客户端。 WireGuard通过在充当隧道的每个对等设备上创建网络接口来工作。对等体通过交换和验证公共密钥（类似于SSH模型）来相互认证。公钥与隧道中允许的IP地址列表进行映射。 VPN流量封装在UDP中。在本教程中，我们将在充当VPN服务器的Ubuntu 18.04计算机上设置WireGuard。我们还将向您展示如何将WireGuard配置为客户端。客户端的流量将通过Ubuntu 18.04服务器进行路由。此设置可用于防御中间人攻击，匿名浏览网络，绕过受地域限制的内容，或允许您的同事在远程工作时安全地连接到公司网络。&lt;/p>
&lt;h2 id="wg安装">WG安装&lt;/h2>
&lt;ol>
&lt;li>更新软件包列表，并安装管理系统存储库所需的工具：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo apt update
sudo apt install software-properties-common
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>添加 WireGuard 仓库：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo add-apt-repository ppa:wireguard/wireguard
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>出现提示时，按Enter键继续。 add-apt-repository也将自动更新软件包列表。&lt;/p>
&lt;ol start="3">
&lt;li>安装WireGuard软件包：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo apt install wireguard
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>WireGuard作为内核模块运行，该模块被编译为&lt;code>DKMS&lt;/code>模块。成功完成后，您将看到以下输出：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">wireguard:
Running module version sanity check.
- Original module
- No original module exists within this kernel
- Installation
- Installing to /lib/modules/4.15.0-88-generic/updates/dkms/
depmod...
DKMS: install completed.
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>更新内核时，需要将针对新内核编译WireGuard模块。&lt;/p>
&lt;h2 id="配置wg">配置WG&lt;/h2>
&lt;p>WireGuard 程序包附带了两个名为&lt;code>wg&lt;/code>和&lt;code>wg-quick&lt;/code>的命令行工具，可用于配置和管理WireGuard接口。&lt;/p>
&lt;p>运行以下命令以生成公钥和私钥：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">wg genkey &lt;span class="p">|&lt;/span> sudo tee /etc/wireguard/privatekey &lt;span class="p">|&lt;/span> wg pubkey &lt;span class="p">|&lt;/span> sudo tee /etc/wireguard/publickey
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ℹ️ 公私钥放置于&lt;code>/etc/wireguard&lt;/code>目录,其中私钥绝对不能与任何人共享&lt;/p>
&lt;p>生成密钥后，我们需要配置路由VPN的隧道设备&lt;/p>
&lt;p>可以使用ip和wg从命令行设置设备，也可以使用文本编辑器创建配置文件。&lt;/p>
&lt;p>创建一个名为&lt;code>wg0.conf&lt;/code>(文件名可以随意)的新文件，并添加以下内容：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">cat &amp;gt;&amp;gt; /etc/wireguard/wg0.conf &lt;span class="s">&amp;lt;&amp;lt; EOF
&lt;/span>&lt;span class="s">[Interface]
&lt;/span>&lt;span class="s">Address = 192.168.159.0/24 # 填写网络地址段
&lt;/span>&lt;span class="s">SaveConfig = true # 关闭时，接口的当前状态将保存到配置文件中
&lt;/span>&lt;span class="s">ListenPort = 51820 # 监听端口
&lt;/span>&lt;span class="s">PrivateKey = QNKQCtPo2E5saDnXORaIORhZH6NtcvIJPHqF9EdEL1o= # 私钥文件,即/etc/wireguard/privatekey
&lt;/span>&lt;span class="s">PostUp = iptables -A FORWARD -i %i -j ACCEPT; iptables -t nat -A POSTROUTING -o ens33 -j MASQUERADE # 在启动之前执行的命令或脚本,使用iptables启用伪装,允许流量离开服务器，从而使VPN客户端可以访问Internet。
&lt;/span>&lt;span class="s">PostDown = iptables -D FORWARD -i %i -j ACCEPT; iptables -t nat -D POSTROUTING -o ens33 -j MASQUERADE # 在启动之后执行的命令或脚本,接口关闭后，iptables规则将被删除
&lt;/span>&lt;span class="s">EOF&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>修改&lt;code>privatekey&lt;/code>和&lt;code>wg0.conf&lt;/code>的权限, 保证其安全性：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo chmod &lt;span class="m">600&lt;/span> /etc/wireguard/&lt;span class="o">{&lt;/span>privatekey,wg0.conf&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>完成后，使用配置文件中指定的属性启动&lt;code>wg0&lt;/code>接口：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ sudo wg-quick up wg0
* 输出内容如下所示:
&lt;span class="o">[&lt;/span>&lt;span class="c1">#] ip link add wg0 type wireguard&lt;/span>
&lt;span class="o">[&lt;/span>&lt;span class="c1">#] wg setconf wg0 /dev/fd/63&lt;/span>
&lt;span class="o">[&lt;/span>&lt;span class="c1">#] ip -4 address add 192.168.159.0/24 dev wg0&lt;/span>
&lt;span class="o">[&lt;/span>&lt;span class="c1">#] ip link set mtu 1420 up dev wg0&lt;/span>
&lt;span class="o">[&lt;/span>&lt;span class="c1">#] iptables -A FORWARD -i wg0 -j ACCEPT; iptables -t nat -A POSTROUTING -o ens33 -j MASQUERADE&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>运行&lt;code>wg show wg0&lt;/code>检查接口状态和配置：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ sudo wg show wg0
* 输出内容如下所示:
interface: wg0
public key: &lt;span class="nv">uD6Xex2eP5CEUVcVP3EZB5csh2JReWXthoVZMzURwCQ&lt;/span>&lt;span class="o">=&lt;/span>
private key: &lt;span class="o">(&lt;/span>hidden&lt;span class="o">)&lt;/span>
listening port: &lt;span class="m">51820&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>也可以运行&lt;code>ip a show wg0&lt;/code>来验证接口状态：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ ip a show wg0
* 输出内容如下所示:
4: wg0: &amp;lt;POINTOPOINT,NOARP,UP,LOWER_UP&amp;gt; mtu &lt;span class="m">1420&lt;/span> qdisc noqueue state UNKNOWN group default qlen &lt;span class="m">1000&lt;/span>
link/none
inet 192.168.159.0/24 scope global wg0
valid_lft forever preferred_lft forever
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>设置wireguard 开机自启:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo systemctl &lt;span class="nb">enable&lt;/span> wg-quick@wg0
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="服务器网络和防火墙配置">服务器网络和防火墙配置&lt;/h2>
&lt;p>为了使&lt;code>NAT&lt;/code>正常工作，我们需要启用IP转发，打开&lt;code>/etc/sysctl.conf&lt;/code>文件，并添加或取消注释以下行：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">...
net.ipv4.ip_forward&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
...
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>修改完成之后, 执行&lt;code>sudo sysctl -p&lt;/code>使配置永久生效&lt;/p>
&lt;p>如果你使用&lt;code>UFW&lt;/code>来管理防火墙，则需要在端口51820上打开UDP通信：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo ufw allow 51820/udp
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>至此,WG SERVER 已完成配置&lt;/p>
&lt;h2 id="客户端配置">客户端配置&lt;/h2>
&lt;h3 id="linux--macos">Linux &amp;amp; macOS&lt;/h3>
&lt;p>去往官方下载站点(&lt;a href="https://wireguard.com/install/),">https://wireguard.com/install/),&lt;/a> 查看如何安装WireGuard&lt;/p>
&lt;ul>
&lt;li>
&lt;p>macOS App Store: &lt;a href="https://apps.apple.com/us/app/wireguard/id1441195209?ls=1">https://apps.apple.com/us/app/wireguard/id1441195209?ls=1&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;h4 id="ubuntu--1904-modulehttpslaunchpadnetwireguardarchiveubuntuwireguard--v1020200413--toolshttpslaunchpadnetwireguardarchiveubuntuwireguard--v1020200319">Ubuntu ≤ 19.04 [&lt;a href="https://launchpad.net/~wireguard/+archive/ubuntu/wireguard">module&lt;/a> – v1.0.20200413 &amp;amp; &lt;a href="https://launchpad.net/~wireguard/+archive/ubuntu/wireguard">tools&lt;/a> – v1.0.20200319]&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">$ sudo add-apt-repository ppa:wireguard/wireguard
$ sudo apt-get update
$ sudo apt-get install wireguard
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;p>设置Linux和macOS客户端过程基本相同, 首先生成公钥与私钥&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">wg genkey &lt;span class="p">|&lt;/span> sudo tee /etc/wireguard/privatekey &lt;span class="p">|&lt;/span> wg pubkey &lt;span class="p">|&lt;/span> sudo tee /etc/wireguard/publickey
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>创建&lt;code>/etc/wireguard/wg0.conf&lt;/code>并添加以下内容:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>Interface&lt;span class="o">]&lt;/span>
&lt;span class="nv">PrivateKey&lt;/span> &lt;span class="o">=&lt;/span> CLIENT_PRIVATE_KEY &lt;span class="c1"># /etc/wireguard/privatekey&lt;/span>
&lt;span class="nv">Address&lt;/span> &lt;span class="o">=&lt;/span> 192.168.43.0/24
&lt;span class="o">[&lt;/span>Peer&lt;span class="o">]&lt;/span>
&lt;span class="nv">PublicKey&lt;/span> &lt;span class="o">=&lt;/span> SERVER_PUBLIC_KEY &lt;span class="c1"># /etc/wireguard/publickey&lt;/span>
&lt;span class="nv">Endpoint&lt;/span> &lt;span class="o">=&lt;/span> SERVER_IP_ADDRESS:51820 &lt;span class="c1"># 对方wireguard server的ip和端口&lt;/span>
&lt;span class="nv">AllowedIPs&lt;/span> &lt;span class="o">=&lt;/span> 0.0.0.0/0
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="windows">Windows&lt;/h3>
&lt;p>直接下载客户端工具: &lt;a href="https://download.wireguard.com/windows-client/wireguard-amd64-0.1.0.msi">https://download.wireguard.com/windows-client/wireguard-amd64-0.1.0.msi&lt;/a>&lt;/p>
&lt;p>安装好软件之后, 点击左下角的&lt;code>Add Tunnel&lt;/code>, 创建一个新的隧道&lt;code>Create new tunnel&lt;/code>&lt;/p>
&lt;p>&lt;code>name&lt;/code>随便起喽, 内容如下:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>Interface&lt;span class="o">]&lt;/span>
&lt;span class="nv">PrivateKey&lt;/span> &lt;span class="o">=&lt;/span> MOeXEby5OG1xQBCP9AJEJEsxmxYDG1FHHzlcOgi/ClI&lt;span class="o">=&lt;/span>
&lt;span class="nv">Address&lt;/span> &lt;span class="o">=&lt;/span> 192.168.43.0/24
&lt;span class="o">[&lt;/span>Peer&lt;span class="o">]&lt;/span>
&lt;span class="nv">PublicKey&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">uD6Xex2eP5CEUVcVP3EZB5csh2JReWXthoVZMzURwCQ&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="c1"># 服务器端公钥&lt;/span>
&lt;span class="nv">Endpoint&lt;/span> &lt;span class="o">=&lt;/span> 192.168.159.132:51820 &lt;span class="c1"># 服务器ip以及端口&lt;/span>
&lt;span class="nv">AllowedIPs&lt;/span> &lt;span class="o">=&lt;/span> 0.0.0.0/0
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://s1.ax1x.com/2020/04/20/JQBW4K.png" alt="wg">&lt;/p>
&lt;h2 id="将客户端对等方添加到服务器">将客户端对等方添加到服务器&lt;/h2>
&lt;p>最后一步是将客户端公钥和IP地址添加到服务器：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># sudo wg set wg0 peer CLIENT_PUBLIC_KEY allowed-ips 10.0.0.2&lt;/span>
sudo wg &lt;span class="nb">set&lt;/span> wg0 peer T5ZTibLaWh9/3EzA1ZfCdiojM0HfXvh99mfVlqHpaU0&lt;span class="o">=&lt;/span> allowed-ips 192.168.43.0/24
sudo wg &lt;span class="nb">set&lt;/span> wg0 peer UqF/BDwShHFulAUN4yx0latMIiIW0Cbb+IuNHEYEBj0&lt;span class="o">=&lt;/span> allowed-ips 192.168.43.0/24
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>确保使用在客户端计算机上生成的公用密钥·（&lt;code>sudo cat /etc/wireguard/publickey&lt;/code>）·更改&lt;code>CLIENT_PUBLIC_KEY&lt;/code>并调整客户端IP地址（如果不同的话），Windows用户可以从WireGuard软件当中复制公钥&lt;/p>
&lt;h3 id="linux-和-macos-客户端">Linux 和 macos 客户端&lt;/h3>
&lt;p>在Linux客户端上，运行以下命令以打开界面：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo wg-quick up wg0
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>现在，应该已连接到Ubuntu服务器，并且来自客户端计算机的流量应通过该服务器进行路由，可以使用以下方法检查连接：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ sudo wg
* 输出内容如下所示：
interface: wg0
public key: sZThYo/0oECwzUsIKTa6LYXLhk+Jb/nqK4kCCP2pyFg&lt;span class="o">=&lt;/span>
private key: &lt;span class="o">(&lt;/span>hidden&lt;span class="o">)&lt;/span>
listening port: &lt;span class="m">48052&lt;/span>
fwmark: 0xca6c
peer: r3imyh3MCYggaZACmkx+CxlD6uAmICI8pe/PGq8+qCg&lt;span class="o">=&lt;/span>
endpoint: XXX.XXX.XXX.XXX:51820
allowed ips: 0.0.0.0/0
latest handshake: &lt;span class="m">1&lt;/span> minute, &lt;span class="m">22&lt;/span> seconds ago
transfer: 58.43 KiB received, 70.82 KiB sent
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>停止和关闭隧道：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo wg-quick down wg0
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="windows-客户端">Windows 客户端&lt;/h3>
&lt;p>点击软件上的&lt;code>Activate&lt;/code> 即可&lt;/p>
&lt;p>&lt;img src="https://s1.ax1x.com/2020/04/20/JQBuAP.png" alt="wg-2">&lt;/p>
&lt;h2 id="一键安装-wireguard">一键安装 wireguard&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://github.com/angristan/wireguard-install">https://github.com/angristan/wireguard-install&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/l-n-s/wireguard-install">https://github.com/l-n-s/wireguard-install&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="参考链接">参考链接&lt;/h2>
&lt;ul>
&lt;li>wireguard Quick Start : &lt;a href="https://www.wireguard.com/quickstart/">https://www.wireguard.com/quickstart/&lt;/a>&lt;/li>
&lt;li>wireguard Install : &lt;a href="https://www.wireguard.com/install/">https://www.wireguard.com/install/&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Hello World</title><link>https://agou-ops.top/post/hello-world/</link><pubDate>Thu, 16 Apr 2020 14:11:22 +0800</pubDate><guid>https://agou-ops.top/post/hello-world/</guid><description>&lt;p>&lt;strong>Markdown&lt;/strong> is created by &lt;a href="http://daringfireball.net/">Daring Fireball&lt;/a>, the original guideline is &lt;a href="http://daringfireball.net/projects/markdown/syntax">here&lt;/a>. Its syntax, however, varies between different parsers or editors.&lt;/p>
&lt;p>Please note that HTML fragments in markdown source will be recognized but not parsed or rendered. Also, there may be small reformatting on the original markdown source code after saving.&lt;/p>
&lt;h2 id="paragraph-and-line-breaks段落与换行">Paragraph and line breaks(段落与换行)&lt;/h2>
&lt;p>A paragraph is simply one or more consecutive lines of text. In markdown source code, paragraphs are separated by more than one blank lines. In Typora, you only need to press &lt;code>Return&lt;/code> to create a new paragraph.&lt;/p>
&lt;p>Press &lt;code>Shift&lt;/code> + &lt;code>Return&lt;/code> to create a single line break. However, most markdown parser will ignore single line break, to make other markdown parsers recognize your line break, you can leave two whitespace at the end of the line, or insert &lt;code>&amp;lt;br/&amp;gt;&lt;/code>.&lt;/p>
&lt;h2 id="headers标题">Headers(标题)&lt;/h2>
&lt;p>Headers use 1-6 hash characters at the start of the line, corresponding to header levels 1-6. For example:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-markdown" data-lang="markdown">&lt;span class="gh"># This is an H1
&lt;/span>&lt;span class="gh">&lt;/span>
&lt;span class="gu">## This is an H2
&lt;/span>&lt;span class="gu">&lt;/span>
&lt;span class="gu">###### This is an H6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>In typora, input ‘#’s followed by title content, and press &lt;code>Return&lt;/code> key will create a header.&lt;/p>
&lt;h2 id="blockquotes引言">Blockquotes(引言)&lt;/h2>
&lt;p>Markdown uses email-style &amp;gt; characters for block quoting. They are presented as:&lt;/p>
&lt;blockquote>
&lt;p>This is a blockquote with two paragraphs. This is first paragraph.&lt;/p>
&lt;p>This is second pragraph.Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.&lt;/p>
&lt;p>This is another blockquote with one paragraph. There is three empty line to seperate two blockquote.&lt;/p>
&lt;p>这是一段中文测试。&lt;/p>
&lt;/blockquote>
&lt;p>In typora, just input ‘&amp;gt;’ followed by quote contents a block quote is generated. Typora will insert proper ‘&amp;gt;’ or line break for you. Block quote inside anther block quote is allowed by adding additional levels of ‘&amp;gt;’.&lt;/p>
&lt;h2 id="lists有序无序列表">Lists(有序无序列表)&lt;/h2>
&lt;p>Input &lt;code>* list item 1&lt;/code> will create an un-ordered list, the &lt;code>*&lt;/code> symbol can be replace with &lt;code>+&lt;/code> or &lt;code>-&lt;/code>.&lt;/p>
&lt;p>Input &lt;code>1. list item 1&lt;/code> will create an ordered list, their markdown source code is like:&lt;/p>
&lt;ul>
&lt;li>Red&lt;/li>
&lt;li>Green&lt;/li>
&lt;li>Blue&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>Red&lt;/li>
&lt;li>Green&lt;/li>
&lt;li>Blue&lt;/li>
&lt;/ol>
&lt;h2 id="task-list任务列表">Task List(任务列表)&lt;/h2>
&lt;p>Task lists are lists with items marked as either &lt;code>[ ]&lt;/code> or &lt;code>[x]&lt;/code> (incomplete or complete). For example:&lt;/p>
&lt;ul>
&lt;li>&lt;input disabled="" type="checkbox"> a task list item&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> list syntax required&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> normal &lt;strong>formatting&lt;/strong>, @mentions, #1234 refs&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> incomplete&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> completed&lt;/li>
&lt;/ul>
&lt;p>You can change the complete/incomplete state by click the checkbox before the item.&lt;/p>
&lt;h2 id="syntax-highlighting代码高亮">Syntax Highlighting(代码高亮)&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">function&lt;/span> &lt;span class="nx">helloWorld&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">alert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Hello, World!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">HelloWorld&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">[]&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;Hello, World!&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="math-blocks数学块">Math Blocks(数学块)&lt;/h2>
&lt;p>You can render &lt;em>LaTeX&lt;/em> mathematical expressions using &lt;strong>MathJax&lt;/strong>.&lt;/p>
&lt;p>Input &lt;code>$$&lt;/code>, then press &amp;lsquo;Return&amp;rsquo; key will trigger an input field which accept &lt;em>Tex/LaTex&lt;/em> source. Following is an example:
$$
\mathbf{V}_1 \times \mathbf{V}_2 = \begin{vmatrix}
\mathbf{i} &amp;amp; \mathbf{j} &amp;amp; \mathbf{k} \&lt;br>
\frac{\partial X}{\partial u} &amp;amp; \frac{\partial Y}{\partial u} &amp;amp; 0 \&lt;br>
\frac{\partial X}{\partial v} &amp;amp; \frac{\partial Y}{\partial v} &amp;amp; 0 \&lt;br>
\end{vmatrix}
$$&lt;/p>
&lt;p>In markdown source file, math block is &lt;em>LaTeX&lt;/em> expression wrapped by ‘$$’ mark:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-markdown" data-lang="markdown">$$
\mathbf{V}_1 \times \mathbf{V}_2 = \begin{vmatrix}
\mathbf{i} &amp;amp; \mathbf{j} &amp;amp; \mathbf{k} \\
\frac{\partial X}{\partial u} &amp;amp; \frac{\partial Y}{\partial u} &amp;amp; 0 \\
\frac{\partial X}{\partial v} &amp;amp; \frac{\partial Y}{\partial v} &amp;amp; 0 \\
\end{vmatrix}
$$
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="tables表格">Tables(表格)&lt;/h2>
&lt;p>Input &lt;code>| First Header | Second Header |&lt;/code> and press &lt;code>return&lt;/code> key will create a table with two column.&lt;/p>
&lt;p>After table is created, focus on that table will pop up a toolbar for table, where you can resize, align, or delete table. You can also use context menu to copy and add/delete column/row.&lt;/p>
&lt;p>Following descriptions can be skipped, as markdown source code for tables are generated by typora automatically.&lt;/p>
&lt;p>In markdown source code, they look like:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-markdown" data-lang="markdown">| Name | Markdown | HTML tag |
| ----------------- | ------------------- | -------------------- |
| &lt;span class="ge">*Emphasis*&lt;/span> | &lt;span class="sb">`*Emphasis*`&lt;/span> | &lt;span class="sb">`&amp;lt;em&amp;gt;&amp;lt;/em&amp;gt;`&lt;/span> |
| &lt;span class="gs">**Strong**&lt;/span> | &lt;span class="sb">`**Strong**`&lt;/span> | &lt;span class="sb">`&amp;lt;strong&amp;gt;&amp;lt;/strong&amp;gt;`&lt;/span> |
| &lt;span class="sb">`code`&lt;/span> | ``code`` | &lt;span class="sb">`&amp;lt;code&amp;gt;&amp;lt;/code&amp;gt;`&lt;/span> |
| &lt;span class="gd">~~Strikethrough~~&lt;/span> | &lt;span class="sb">`~~Strikethrough~~`&lt;/span> | &lt;span class="sb">`&amp;lt;del&amp;gt;&amp;lt;/del`&lt;/span> |
| &amp;lt;u&amp;gt;Underline&amp;lt;/u&amp;gt; | &lt;span class="sb">`&amp;lt;u&amp;gt;underline&amp;lt;/u&amp;gt;`&lt;/span> | &lt;span class="sb">`&amp;lt;u&amp;gt;&amp;lt;/u&amp;gt;`&lt;/span> |
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Name&lt;/th>
&lt;th>Markdown&lt;/th>
&lt;th>HTML tag&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;em>Emphasis&lt;/em>&lt;/td>
&lt;td>&lt;code>*Emphasis*&lt;/code>&lt;/td>
&lt;td>&lt;code>&amp;lt;em&amp;gt;&amp;lt;/em&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Strong&lt;/strong>&lt;/td>
&lt;td>&lt;code>**Strong**&lt;/code>&lt;/td>
&lt;td>&lt;code> &amp;lt;strong&amp;gt;&amp;lt;/strong&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>code&lt;/code>&lt;/td>
&lt;td>&lt;code>`code`&lt;/code>&lt;/td>
&lt;td>&lt;code>&amp;lt;code&amp;gt;&amp;lt;/code&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;del>Strikethrough&lt;/del>&lt;/td>
&lt;td>&lt;code>~~Strikethrough~~&lt;/code>&lt;/td>
&lt;td>&lt;code>&amp;lt;del&amp;gt;&amp;lt;/del&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;!-- raw HTML omitted -->Underline&lt;!-- raw HTML omitted -->&lt;/td>
&lt;td>&lt;code>&amp;lt;u&amp;gt;underline&amp;lt;/u&amp;gt;&lt;/code>&lt;/td>
&lt;td>&lt;code>&amp;lt;u&amp;gt;&amp;lt;/u&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="footnotes注释">&lt;strong>Footnotes(注释)&lt;/strong>&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-markdown" data-lang="markdown">You can create footnotes like this[^footnote].
[^footnote]: Here is the &lt;span class="ge">*text*&lt;/span> of the &lt;span class="gs">**footnote**&lt;/span>.
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>will produce:&lt;/p>
&lt;p>You can create footnotes like this&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>.&lt;/p>
&lt;p>Mouse on the ‘footnote’ superscript to see content of the footnote.&lt;/p>
&lt;h2 id="horizontal-rules水平线">Horizontal Rules(水平线)&lt;/h2>
&lt;p>Input &lt;code>***&lt;/code> or &lt;code>---&lt;/code> on a blank line and press &lt;code>return&lt;/code> will draw a horizontal line.&lt;/p>
&lt;hr>
&lt;h2 id="links超链接">Links(超链接)&lt;/h2>
&lt;p>Markdown supports two style of links: inline and reference.&lt;/p>
&lt;p>In both styles, the link text is delimited by [square brackets].&lt;/p>
&lt;p>To create an inline link, use a set of regular parentheses immediately after the link text’s closing square bracket. Inside the parentheses, put the URL where you want the link to point, along with an optional title for the link, surrounded in quotes. For example:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-markdown" data-lang="markdown">This is [&lt;span class="nt">an example&lt;/span>](&lt;span class="na">http://example.com/ &amp;#34;Title&amp;#34;&lt;/span>) inline link.
[&lt;span class="nt">This link&lt;/span>](&lt;span class="na">http://example.net/&lt;/span>) has no title attribute.
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>will produce:&lt;/p>
&lt;p>This is &lt;a href="http://example.com/%22Title%22">an example&lt;/a> inline link. (&lt;code>&amp;lt;p&amp;gt;This is &amp;lt;a href=&amp;quot;http://example.com/&amp;quot; title=&amp;quot;Title&amp;quot;&amp;gt;&lt;/code>)&lt;/p>
&lt;p>&lt;a href="http://example.net/">This link&lt;/a> has no title attribute. (&lt;code>&amp;lt;p&amp;gt;&amp;lt;a href=&amp;quot;http://example.net/&amp;quot;&amp;gt;This link&amp;lt;/a&amp;gt; has no&lt;/code>)&lt;/p>
&lt;h3 id="internal-links页内链接">Internal Links(页内链接)&lt;/h3>
&lt;p>&lt;strong>You can set the href to headers&lt;/strong>, which will create a bookmark that allow you to jump to that section after clicking. For example:&lt;/p>
&lt;p>Command(on Windows: Ctrl) + Click &lt;a href="#block-elements">This link&lt;/a> will jump to header &lt;code>Block Elements&lt;/code>. To see how to write that, please move cursor or click that link with &lt;code>⌘&lt;/code> key pressed to expand the element into markdown source.&lt;/p>
&lt;h3 id="reference-links参考链接">Reference Links(参考链接)&lt;/h3>
&lt;p>Reference-style links use a second set of square brackets, inside which you place a label of your choosing to identify the link:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-markdown" data-lang="markdown">This is [an example][id] reference-style link.
Then, anywhere in the document, you define your link label like this, on a line by itself:
[id]: http://example.com/ &amp;#34;Optional Title Here&amp;#34;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>In typora, they will be rendered like:&lt;/p>
&lt;p>This is &lt;a href="http://example.com/" title="Optional Title Here">an example&lt;/a> reference-style link.&lt;/p>
&lt;p>The implicit link name shortcut allows you to omit the name of the link, in which case the link text itself is used as the name. Just use an empty set of square brackets — e.g., to link the word “Google” to the google.com web site, you could simply write:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-markdown" data-lang="markdown">[Google][]
And then define the link:
[Google]: http://google.com/
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>In typora click link will expand it for editing, command+click will open the hyperlink in web browser.&lt;/p>
&lt;h2 id="urls">URLs&lt;/h2>
&lt;p>Typora allows you to insert urls as links, wrapped by &lt;code>&amp;lt;&lt;/code>brackets&lt;code>&amp;gt;&lt;/code>.&lt;/p>
&lt;p>&lt;code>&amp;lt;i@typora.io&amp;gt;&lt;/code> becomes &lt;a href="mailto:i@typora.io">i@typora.io&lt;/a>.&lt;/p>
&lt;p>Typora will aslo auto link standard URLs. e.g: &lt;a href="http://www.google.com">www.google.com&lt;/a>.&lt;/p>
&lt;h2 id="images图片">Images(图片)&lt;/h2>
&lt;p>Image looks similar with links, but it requires an additional &lt;code>!&lt;/code> char before the start of link. Image syntax looks like this:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-markdown" data-lang="markdown">![&lt;span class="nt">Alt text&lt;/span>](&lt;span class="na">/path/to/img.jpg&lt;/span>)
![&lt;span class="nt">Alt text&lt;/span>](&lt;span class="na">/path/to/img.jpg &amp;#34;Optional title&amp;#34;&lt;/span>)
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>You are able to use drag &amp;amp; drop to insert image from image file or we browser. And modify the markdown source code by clicking on the image. Relative path will be used if image is in same directory or sub-directory with current editing document when drag &amp;amp; drop.&lt;/p>
&lt;p>For more tips on images, please read &lt;a href="http://support.typora.io//Images/">http://support.typora.io//Images/&lt;/a>&lt;/p>
&lt;h2 id="emphasis突出强调">Emphasis(突出强调)&lt;/h2>
&lt;p>Markdown treats asterisks (&lt;code>*&lt;/code>) and underscores (&lt;code>_&lt;/code>) as indicators of emphasis. Text wrapped with one &lt;code>*&lt;/code> or &lt;code>_&lt;/code> will be wrapped with an HTML &lt;code>&amp;lt;em&amp;gt;&lt;/code> tag. E.g:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-markdown" data-lang="markdown">*single asterisks*
&lt;span class="ge">_single underscores_&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>output:&lt;/p>
&lt;p>&lt;em>single asterisks&lt;/em>&lt;/p>
&lt;p>&lt;em>single underscores&lt;/em>&lt;/p>
&lt;p>GFM will ignores underscores in words, which is commonly used in code and names, like this:&lt;/p>
&lt;blockquote>
&lt;p>wow_great_stuff&lt;/p>
&lt;p>do_this_and_do_that_and_another_thing.&lt;/p>
&lt;/blockquote>
&lt;p>To produce a literal asterisk or underscore at a position where it would otherwise be used as an emphasis delimiter, you can backslash escape it:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-markdown" data-lang="markdown">\*this text is surrounded by literal asterisks\*
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Typora recommends to use &lt;code>*&lt;/code> symbol.&lt;/p>
&lt;h2 id="strong加粗">Strong(加粗)&lt;/h2>
&lt;p>double *’s or _’s will be wrapped with an HTML &lt;code>&amp;lt;strong&amp;gt;&lt;/code> tag, e.g:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-markdown" data-lang="markdown">**double asterisks**
&lt;span class="gs">__double underscores__&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>output:&lt;/p>
&lt;p>&lt;strong>double asterisks&lt;/strong>&lt;/p>
&lt;p>&lt;strong>double underscores&lt;/strong>&lt;/p>
&lt;p>Typora recommends to use &lt;code>**&lt;/code> symbol.&lt;/p>
&lt;h2 id="code代码块">Code(代码块)&lt;/h2>
&lt;p>To indicate a span of code, wrap it with backtick quotes (`). Unlike a pre-formatted code block, a code span indicates code within a normal paragraph. For example:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-markdown" data-lang="markdown">Use the &lt;span class="sb">`printf()`&lt;/span> function.
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>will produce:&lt;/p>
&lt;p>Use the &lt;code>printf()&lt;/code> function.&lt;/p>
&lt;h2 id="highlight-shortcode高亮代码块">highlight shortcode(高亮代码块)&lt;/h2>
&lt;p>example:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">{{&amp;lt; highlight go &amp;#34;linenos=table,hl_lines=8 15-17,linenostart=199&amp;#34; &amp;gt;}}
// ... code
{{&amp;lt; /highlight &amp;gt;}}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>result:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">199
&lt;/span>&lt;span class="lnt">200
&lt;/span>&lt;span class="lnt">201
&lt;/span>&lt;span class="lnt">202
&lt;/span>&lt;span class="lnt">203
&lt;/span>&lt;span class="lnt">204
&lt;/span>&lt;span class="lnt">205
&lt;/span>&lt;span class="hl">&lt;span class="lnt">206
&lt;/span>&lt;/span>&lt;span class="lnt">207
&lt;/span>&lt;span class="lnt">208
&lt;/span>&lt;span class="lnt">209
&lt;/span>&lt;span class="lnt">210
&lt;/span>&lt;span class="lnt">211
&lt;/span>&lt;span class="lnt">212
&lt;/span>&lt;span class="hl">&lt;span class="lnt">213
&lt;/span>&lt;/span>&lt;span class="hl">&lt;span class="lnt">214
&lt;/span>&lt;/span>&lt;span class="hl">&lt;span class="lnt">215
&lt;/span>&lt;/span>&lt;span class="lnt">216
&lt;/span>&lt;span class="lnt">217
&lt;/span>&lt;span class="lnt">218
&lt;/span>&lt;span class="lnt">219
&lt;/span>&lt;span class="lnt">220
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="c1">// GetTitleFunc returns a func that can be used to transform a string to
&lt;/span>&lt;span class="c1">// title case.
&lt;/span>&lt;span class="c1">//
&lt;/span>&lt;span class="c1">// The supported styles are
&lt;/span>&lt;span class="c1">//
&lt;/span>&lt;span class="c1">// - &amp;#34;Go&amp;#34; (strings.Title)
&lt;/span>&lt;span class="c1">// - &amp;#34;AP&amp;#34; (see https://www.apstylebook.com/)
&lt;/span>&lt;span class="hl">&lt;span class="c1">// - &amp;#34;Chicago&amp;#34; (see http://www.chicagomanualofstyle.org/home.html)
&lt;/span>&lt;/span>&lt;span class="c1">//
&lt;/span>&lt;span class="c1">// If an unknown or empty style is provided, AP style is what you get.
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">GetTitleFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">style&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">switch&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToLower&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">style&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">case&lt;/span> &lt;span class="s">&amp;#34;go&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Title&lt;/span>
&lt;span class="hl"> &lt;span class="k">case&lt;/span> &lt;span class="s">&amp;#34;chicago&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;span class="hl"> &lt;span class="nx">tc&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">transform&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewTitleConverter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">transform&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ChicagoStyle&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;span class="hl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">tc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Title&lt;/span>
&lt;/span> &lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="nx">tc&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">transform&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewTitleConverter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">transform&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">APStyle&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">tc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Title&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h2 id="strikethrough删除线">Strikethrough(删除线)&lt;/h2>
&lt;p>GFM adds syntax to create strikethrough text, which is missing from standard Markdown.&lt;/p>
&lt;p>&lt;code>~~Mistaken text.~~&lt;/code> becomes &lt;del>Mistaken text.&lt;/del>&lt;/p>
&lt;h2 id="underline下划线">Underline(下划线)&lt;/h2>
&lt;p>Underline is powered by raw HTML.&lt;/p>
&lt;p>&lt;code>&amp;lt;u&amp;gt;Underline&amp;lt;/u&amp;gt;&lt;/code> becomes &lt;!-- raw HTML omitted -->Underline&lt;!-- raw HTML omitted -->.&lt;/p>
&lt;h2 id="emoji-happy表情">Emoji :happy:(表情)&lt;/h2>
&lt;p>Input emoji with syntax &lt;code>😄&lt;/code>.&lt;/p>
&lt;p>User can trigger auto-complete suggestions for emoji by pressing &lt;code>ESC&lt;/code> key, or trigger it automatically after enable it on preference panel. Also, input UTF8 emoji char directly from &lt;code>Edit&lt;/code> -&amp;gt; &lt;code>Emoji &amp;amp; Symbols&lt;/code> from menu bar is also supported.&lt;/p>
&lt;h2 id="inline-math">Inline Math&lt;/h2>
&lt;p>To use this feature, first, please enable it in &lt;code>Preference&lt;/code> Panel -&amp;gt; &lt;code>Markdown&lt;/code> Tab. Then use &lt;code>$&lt;/code> to wrap TeX command, for example: &lt;code>$\lim_{x \to \infty} \exp(-x) = 0$&lt;/code> will be rendered as LaTeX command.&lt;/p>
&lt;p>To trigger inline preview for inline math: input “$”, then press &lt;code>ESC&lt;/code> key, then input TeX command, a preview tooltip will be visible like below:&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>Here is the &lt;em>text&lt;/em> of the &lt;strong>footnote&lt;/strong>. &lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></description></item><item><title>Shortcodes Preview</title><link>https://agou-ops.top/post/shortcodes-preview/</link><pubDate>Sun, 04 Mar 2018 16:01:23 +0800</pubDate><guid>https://agou-ops.top/post/shortcodes-preview/</guid><description>&lt;h2 id="what-a-shortcode-is">What a Shortcode is&lt;/h2>
&lt;p>Hugo loves Markdown because of its simple content format, but there are times when Markdown falls short. Often, content authors are forced to add raw HTML (e.g., video &lt;code>&amp;lt;iframes&amp;gt;&lt;/code>) to Markdown content. We think this contradicts the beautiful simplicity of Markdown&amp;rsquo;s syntax.&lt;/p>
&lt;p>Hugo created &lt;strong>shortcodes&lt;/strong> to circumvent these limitations.&lt;/p>
&lt;p>A shortcode is a simple snippet inside a content file that Hugo will render using a predefined template. Note that shortcodes will not work in template files. If you need the type of drop-in functionality that shortcodes provide but in a template, you most likely want a [partial template][partials] instead.&lt;/p>
&lt;p>In addition to cleaner Markdown, shortcodes can be updated any time to reflect new classes, techniques, or standards. At the point of site generation, Hugo shortcodes will easily merge in your changes. You avoid a possibly complicated search and replace operation.&lt;/p>
&lt;p>More details: &lt;a href="https://gohugo.io/content-management/shortcodes/">https://gohugo.io/content-management/shortcodes/&lt;/a>&lt;/p>
&lt;h2 id="blockquotes">blockquotes&lt;/h2>
&lt;p>Normal quote:
&lt;blockquote>
&lt;p>This is a simple quote.&lt;/p>
&lt;footer>
&lt;strong>&lt;/strong>
&lt;/footer>
&lt;/blockquote>
&lt;/p>
&lt;p>Quote with author:
&lt;blockquote>
&lt;p>This is a quote with only an Author named Author2.&lt;/p>
&lt;footer>
&lt;strong>Author2&lt;/strong>
&lt;/footer>
&lt;/blockquote>
&lt;/p>
&lt;p>Quote with author and source:
&lt;blockquote>
&lt;p>This is a quote from Author3 and source &amp;ldquo;source.&amp;rdquo;&lt;/p>
&lt;footer>
&lt;strong>Author3&lt;/strong>
&lt;cite>Source&lt;/cite>
&lt;/footer>
&lt;/blockquote>
&lt;/p>
&lt;p>Quote with author and link:
&lt;blockquote>
&lt;p>This is a quote from Author4 and links to &lt;a href="https://www.google.com">https://www.google.com&lt;/a>.&lt;/p>
&lt;footer>
&lt;strong>Author4&lt;/strong>
&lt;cite>
&lt;a href="https://www.google.com" title="https://www.google.com">google.com&lt;/a>
&lt;/cite>
&lt;/footer>
&lt;/blockquote>
&lt;/p>
&lt;p>Quote with author, link and title:
&lt;blockquote>
&lt;p>This is a quote from Author5 and links to &lt;a href="https://www.google.com">https://www.google.com&lt;/a> with title &amp;ldquo;Google.&amp;rdquo;&lt;/p>
&lt;footer>
&lt;strong>Author5&lt;/strong>
&lt;cite>
&lt;a href="https://www.google.com" title="https://www.google.com">Google&lt;/a>
&lt;/cite>
&lt;/footer>
&lt;/blockquote>
&lt;/p>
&lt;p>Quote with author and a link longer than 32 characters, string is first cut at 32 characters then everything after the last forward slash is removed
&lt;blockquote>
&lt;p>This is a quote from Author5 and links to &lt;a href="https://twitter.com/CryptoGangsta/status/716427930126196737">https://twitter.com/CryptoGangsta/status/716427930126196737&lt;/a> which is longer than 32 characters.
&lt;!-- raw HTML omitted -->And this is a new line in the quote with the HTML br tag.&lt;/p>
&lt;footer>
&lt;strong>Author6&lt;/strong>
&lt;cite>
&lt;a href="https://twitter.com/CryptoGangsta/status/716427930126196737" title="https://twitter.com/CryptoGangsta/status/716427930126196737">twitter.com/CryptoGangsta/...&lt;/a>
&lt;/cite>
&lt;/footer>
&lt;/blockquote>
&lt;/p>
&lt;p>Test from the Octopress blockquote page at: &lt;a href="http://octopress.org/docs/plugins/blockquote/">http://octopress.org/docs/plugins/blockquote/&lt;/a>
&lt;blockquote>
&lt;p>Over the past 24 hours I&amp;rsquo;ve been reflecting on my life &amp;amp; I&amp;rsquo;ve realized only one thing. I need a medieval battle axe.&lt;/p>
&lt;footer>
&lt;strong>@allanbranch&lt;/strong>
&lt;cite>
&lt;a href="https://twitter.com/allanbranch/status/90766146063712256" title="https://twitter.com/allanbranch/status/90766146063712256">twitter.com/allanbranch/status/...&lt;/a>
&lt;/cite>
&lt;/footer>
&lt;/blockquote>
&lt;/p>
&lt;h2 id="music">music&lt;/h2>
&lt;!-- raw HTML omitted -->
&lt;h2 id="gist1">gist(+1)&lt;/h2>
&lt;p>We can embed the gist in our content via username and gist ID pulled from the URL:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">{{&amp;lt; gist AGou-ops 5e0b2df2f0d23c65742a633ed0225cf6 &amp;gt;}}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Display:&lt;/p>
&lt;script type="application/javascript" src="https://gist.github.com/AGou-ops/5e0b2df2f0d23c65742a633ed0225cf6.js">&lt;/script>
&lt;h2 id="expand">expand&lt;/h2>
&lt;p>The Expand shortcode displays an expandable/collapsible section of text on your page. Here is an example&lt;/p>
&lt;details>
&lt;summary style="background-color:#f5f5f5;border:1px solid #ccc;padding:5px;">
Is this learn theme rocks ?
&lt;/summary>
Yes !.
&lt;/details>
&lt;h3 id="usage">Usage&lt;/h3>
&lt;p>this shortcode takes exactly one optional parameter to define the text that appears next to the expand/collapse icon. (default is “Click to expand”)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">{{&amp;lt; expand &amp;#34;Is this learn theme rocks ?&amp;#34; &amp;gt;}}
Yes !.
{{&amp;lt; /expand &amp;gt;}}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="youtube">youtube&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/w7Ft2ymGmfc" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="vimeo">vimeo&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://player.vimeo.com/video/146022717" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="vimeo video" webkitallowfullscreen mozallowfullscreen allowfullscreen>&lt;/iframe>
&lt;/div>
&lt;h2 id="youku">youku&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; padding-top: 30px; height: 0; overflow: hidden;">
&lt;iframe src="https://player.youku.com/embed/XMzQ0ODUxMjM2NA?autoplay=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" allowfullscreen frameborder="0" title="YouKu Video">
&lt;/iframe>
&lt;/div></description></item><item><title>Image Preview</title><link>https://agou-ops.top/post/image-preview/</link><pubDate>Sat, 03 Mar 2018 16:01:23 +0800</pubDate><guid>https://agou-ops.top/post/image-preview/</guid><description>&lt;p>Thanks for &lt;a href="https://github.com/liwenyip/hugo-easy-gallery">liwenyip/hugo-easy-gallery&lt;/a> &amp;amp; &lt;a href="https://github.com/xianmin/hugo-theme-jane/pull/48">Zebradil · Pull Request #48&lt;/a> .&lt;/p>
&lt;p>Now, we could use &lt;code>{{&amp;lt; gallery &amp;gt;}}&lt;/code> shortcode in hugo-theme-jane.&lt;/p>
&lt;h2 id="normal-image">Normal Image&lt;/h2>
&lt;p>This is an image in &lt;code>static/image&lt;/code> folder.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-markdown" data-lang="markdown">![&lt;span class="nt">This is an image in `static/image` folder.&lt;/span>](&lt;span class="na">https://agou-images.oss-cn-qingdao.aliyuncs.com/violet-evergarden/Screenshot_2020-03-29-21-40-19.png&lt;/span>)
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/violet-evergarden/Screenshot_2020-03-29-21-40-19.png" alt="This is an image in static/image folder.">&lt;/p>
&lt;h2 id="-figure--shortcode">&lt;code>{{&amp;lt; figure &amp;gt;}}&lt;/code> shortcode&lt;/h2>
&lt;h3 id="figure-image-with-title">figure image with title&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">{{&amp;lt; figure src=&amp;#34;/image/test.png&amp;#34; title=&amp;#34;figure image with title&amp;#34; &amp;gt;}}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="figure-image-with-caption">figure image with caption&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">{{&amp;lt; figure src=&amp;#34;/image/example.jpg&amp;#34; caption=&amp;#34;figure image with caption figure image with caption figure image with caption figure image with caption figure image with caption&amp;#34; &amp;gt;}}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="more--figure--shortcode-usage">more &lt;code>{{&amp;lt; figure &amp;gt;}}&lt;/code> shortcode usage&lt;/h3>
&lt;p>Specifying your image files:&lt;/p>
&lt;ul>
&lt;li>&lt;code>{{&amp;lt; figure src=&amp;quot;thumb.jpg&amp;quot; link=&amp;quot;image.jpg&amp;quot; &amp;gt;}}&lt;/code> will use &lt;code>thumb.jpg&lt;/code> for thumbnail and &lt;code>image.jpg&lt;/code> for lightbox&lt;/li>
&lt;li>&lt;code>{{&amp;lt; figure src=&amp;quot;image.jpg&amp;quot; &amp;gt;}}&lt;/code> or &lt;code>{{&amp;lt; figure link=&amp;quot;image.jpg&amp;quot; &amp;gt;}}&lt;/code> will use &lt;code>image.jpg&lt;/code> for both thumbnail and lightbox&lt;/li>
&lt;li>&lt;code>{{&amp;lt; figure link=&amp;quot;image.jpg&amp;quot; thumb=&amp;quot;-small&amp;quot; &amp;gt;}}&lt;/code> will use &lt;code>image-small.jpg&lt;/code> for thumbnail and &lt;code>image.jpg&lt;/code> for lightbox&lt;/li>
&lt;/ul>
&lt;p>Optional parameters:&lt;/p>
&lt;ul>
&lt;li>All the &lt;a href="https://gohugo.io/extras/shortcodes">features/parameters&lt;/a> of Hugo&amp;rsquo;s built-in &lt;code>figure&lt;/code> shortcode work as normal, i.e. src, link, title, caption, class, attr (attribution), attrlink, alt&lt;/li>
&lt;li>&lt;code>size&lt;/code> (e.g. &lt;code>size=&amp;quot;1024x768&amp;quot;&lt;/code>) pre-defines the image size for PhotoSwipe. Use this option if you don&amp;rsquo;t want to pre-load the linked image to determine its size.&lt;/li>
&lt;li>&lt;code>class&lt;/code> allows you to set any custom classes you want on the &lt;code>&amp;lt;figure&amp;gt;&lt;/code> tag.&lt;/li>
&lt;/ul>
&lt;p>Optional parameters for standalone &lt;code>{{&amp;lt; figure &amp;gt;}}&lt;/code> shortcodes only (i.e. don&amp;rsquo;t use on &lt;code>{{&amp;lt; figure &amp;gt;}}&lt;/code> inside &lt;code>{{&amp;lt; gallery &amp;gt;}}&lt;/code> - strange things may happen if you do):&lt;/p>
&lt;ul>
&lt;li>&lt;code>caption-position&lt;/code> and &lt;code>caption-effect&lt;/code> work the same as for the &lt;code>{{&amp;lt; gallery &amp;gt;}}&lt;/code> shortcode (see below).&lt;/li>
&lt;li>&lt;code>width&lt;/code> defines the &lt;a href="https://www.w3schools.com/cssref/pr_dim_max-width.asp">&lt;code>max-width&lt;/code>&lt;/a> of the image displayed on the page. If using a thumbnail for a standalone figure, set this equal to your thumbnail&amp;rsquo;s native width to make the captions behave properly (or feel free to come up with a better solution and submit a pull request :-)). Also use this option if you don&amp;rsquo;t have a thumbnail and you don&amp;rsquo;t want the hi-res image to take up the entire width of the screen/container.&lt;/li>
&lt;li>&lt;code>class=&amp;quot;no-photoswipe&amp;quot;&lt;/code> prevents a &lt;code>&amp;lt;figure&amp;gt;&lt;/code> from being loaded into PhotoSwipe. If you click on the figure you&amp;rsquo;ll instead a good ol&amp;rsquo; fashioned hyperlink to a bigger image (or - if you haven&amp;rsquo;t specified a bigger image - the same one).&lt;/li>
&lt;/ul>
&lt;h2 id="-gallery--shortcode">&lt;code>{{&amp;lt; gallery &amp;gt;}}&lt;/code> shortcode&lt;/h2>
&lt;h3 id="simple-gallery">simple gallery&lt;/h3>
&lt;p>To specify a directory of image files:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">{{&amp;lt; gallery dir=&amp;#34;/img/your-directory-of-images/&amp;#34; &amp;gt;}}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>The images are automatically captioned with the file name.&lt;/li>
&lt;li>&lt;code>[image].jpg&lt;/code> is used for the hi-res image, and &lt;code>[image]-thumb.jpg&lt;/code> is used for the thumbnails.&lt;/li>
&lt;li>If &lt;code>[image]-thumb.jpg&lt;/code> doesn&amp;rsquo;t exist, then &lt;code>[image].jpg&lt;/code> will be used for both hi-res and thumbnail images.&lt;/li>
&lt;li>The default thumbnail suffix is &lt;code>-thumb&lt;/code>, but you can specify a different one e.g. &lt;code>thumb=&amp;quot;-small&amp;quot;&lt;/code> or &lt;code>thumb=&amp;quot;_150x150&amp;quot;&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="to-specify-individual-image-files">To specify individual image files&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">{{&amp;lt; gallery &amp;gt;}}
{{&amp;lt; figure src=&amp;#34;image1.jpg&amp;#34; &amp;gt;}}
{{&amp;lt; figure src=&amp;#34;image2.jpg&amp;#34; &amp;gt;}}
{{&amp;lt; figure src=&amp;#34;image3.jpg&amp;#34; &amp;gt;}}
{{&amp;lt; /gallery &amp;gt;}}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>Optional parameters:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;code>caption-position&lt;/code> - determines the captions&amp;rsquo; position over the image. Options:
&lt;ul>
&lt;li>&lt;code>bottom&lt;/code> (default)&lt;/li>
&lt;li>&lt;code>center&lt;/code>&lt;/li>
&lt;li>&lt;code>none&lt;/code> hides captions on the page (they will only show in PhotoSwipe)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>caption-effect&lt;/code> - determines if/how captions appear upon hover. Options:
&lt;ul>
&lt;li>&lt;code>slide&lt;/code> (default)&lt;/li>
&lt;li>&lt;code>fade&lt;/code>&lt;/li>
&lt;li>&lt;code>none&lt;/code> (captions always visible)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>hover-effect&lt;/code> - determines if/how images change upon hover. Options:
&lt;ul>
&lt;li>&lt;code>zoom&lt;/code> (default)&lt;/li>
&lt;li>&lt;code>grow&lt;/code>&lt;/li>
&lt;li>&lt;code>shrink&lt;/code>&lt;/li>
&lt;li>&lt;code>slideup&lt;/code>&lt;/li>
&lt;li>&lt;code>slidedown&lt;/code>&lt;/li>
&lt;li>&lt;code>none&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>hover-transition&lt;/code> - determines if/how images change upon hover. Options:
&lt;ul>
&lt;li>not set - smooth transition (default)&lt;/li>
&lt;li>&lt;code>none&lt;/code> - hard transition&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item></channel></rss>