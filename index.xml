<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>AGou's blog</title><link>https://agou-ops.top/</link><description>Recent content on AGou's blog</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Wed, 30 Sep 2020 19:14:44 +0800</lastBuildDate><atom:link href="https://agou-ops.top/index.xml" rel="self" type="application/rss+xml"/><item><title>关于</title><link>https://agou-ops.top/aboutme/</link><pubDate>Tue, 16 Apr 2019 14:01:47 +0800</pubDate><guid>https://agou-ops.top/aboutme/</guid><description>&lt;p>&lt;strong>岂能尽如人意，但求无愧于心.&lt;/strong>&lt;/p>
&lt;hr>
&lt;ul>
&lt;li>本站地址：&lt;a href="https://agou-ops.top">https://agou-ops.top&lt;/a>&lt;/li>
&lt;li>备用地址：&lt;a href="http://x.agou-ops.top">http://x.agou-ops.top&lt;/a>&lt;/li>
&lt;li>my Docs：&lt;a href="https://agou-ops.top/beforeWork">https://agou-ops.top/beforeWork&lt;/a>&lt;/li>
&lt;li>Docs 备用站点：&lt;a href="https://d.agou-ops.top">https://d.agou-ops.top&lt;/a>&lt;/li>
&lt;li>myStudyNote:&lt;a href="https://agou-ops.top/myStudyNote">https://agou-ops.top/myStudyNote&lt;/a>&lt;/li>
&lt;li>发布站点：&lt;a href="http://fabu.agou-ops.top/">http://fabu.agou-ops.top/&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>在k8s上使用Prometheus监控MongoDB</title><link>https://agou-ops.top/post/%E5%9C%A8k8s%E4%B8%8A%E4%BD%BF%E7%94%A8prometheus%E7%9B%91%E6%8E%A7mongodb/</link><pubDate>Thu, 08 Oct 2020 14:04:30 +0800</pubDate><guid>https://agou-ops.top/post/%E5%9C%A8k8s%E4%B8%8A%E4%BD%BF%E7%94%A8prometheus%E7%9B%91%E6%8E%A7mongodb/</guid><description>&lt;h2 id="预先准备">预先准备&lt;/h2>
&lt;ul>
&lt;li>minikube For Windows(资源充足, 有集群更好不过);&lt;/li>
&lt;li>Helm;&lt;/li>
&lt;li>科学上网能力.&lt;/li>
&lt;/ul>
&lt;h2 id="整体框架">整体框架&lt;/h2>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/prometheus%2Bk8s/arch.png" alt="">&lt;/p>
&lt;p>&lt;del>随手在线画的, 不美观, qwq.&lt;/del>&lt;/p>
&lt;h2 id="操作步骤">操作步骤&lt;/h2>
&lt;h3 id="启用helm-tillerhelm服务器端">启用&lt;code>helm-tiller&lt;/code>(helm服务器端)&lt;/h3>
&lt;p>在&lt;code>minikube&lt;/code>中启用&lt;code>helm-tiller&lt;/code>插件, 很简单, 只需要一条命令即可:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ minikube addons &lt;span class="nb">enable&lt;/span> helm-tiller
&lt;span class="c1"># 或者在启动 minikube 的时候直接启用 helm-tiller&lt;/span>
$ minikube start --addons&lt;span class="o">=[&lt;/span>&lt;span class="s2">&amp;#34;helm-tiller&amp;#34;&lt;/span>&lt;span class="o">]&lt;/span> &amp;lt;Other_Options&amp;gt;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="安装prometheus-operator">安装&lt;code>Prometheus-operator&lt;/code>&lt;/h3>
&lt;p>首先添加所需仓库:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
&lt;span class="c1"># 更新仓库内容&lt;/span>
$ helm repo update
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装/下载&lt;code>chart&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ helm install prometheus-community/kube-prometheus-stack --version 9.4.10
&lt;span class="c1"># 或者先下载下来更改所需内容之后再进行安装(推荐使用方法)&lt;/span>
$ helm pull prometheus-community/kube-prometheus-stack --version 9.4.10 --untar
&lt;span class="c1"># 安装&lt;/span>
$ helm install prometheus kube-prometheus-stack/
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装完成之后, &lt;code>kubernetes&lt;/code>会自动接管后续工作, 如拉取镜像等:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># 观察部署进度&lt;/span>
$ kubectl get po -w
NAME READY STATUS RESTARTS AGE
alertmanager-prometheus-kube-prometheus-alertmanager-0 2/2 Running &lt;span class="m">0&lt;/span> 24m
prometheus-grafana-79b677fd4b-t9kr9 2/2 Running &lt;span class="m">0&lt;/span> 25m
prometheus-kube-prometheus-operator-69cd74c99f-wltf4 2/2 Running &lt;span class="m">0&lt;/span> 25m
prometheus-kube-state-metrics-95d956569-mlfwv 1/1 Running &lt;span class="m">0&lt;/span> 25m
prometheus-prometheus-kube-prometheus-prometheus-0 3/3 Running &lt;span class="m">1&lt;/span> 24m
prometheus-prometheus-node-exporter-tvwf5 1/1 Running &lt;span class="m">0&lt;/span> 25m
&lt;span class="c1"># 查看service&lt;/span>
$ kubectl get svc
NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span class="o">(&lt;/span>S&lt;span class="o">)&lt;/span> AGE
alertmanager-operated ClusterIP None &amp;lt;none&amp;gt; 9093/TCP,9094/TCP,9094/UDP 25m
kubernetes ClusterIP 10.96.0.1 &amp;lt;none&amp;gt; 443/TCP 44h
prometheus-grafana ClusterIP 10.108.199.68 &amp;lt;none&amp;gt; 80/TCP 26m
prometheus-kube-prometheus-alertmanager ClusterIP 10.96.81.7 &amp;lt;none&amp;gt; 9093/TCP 26m
prometheus-kube-prometheus-operator ClusterIP 10.109.9.111 &amp;lt;none&amp;gt; 8080/TCP,443/TCP 26m
prometheus-kube-prometheus-prometheus ClusterIP 10.98.173.241 &amp;lt;none&amp;gt; 9090/TCP 26m
prometheus-kube-state-metrics ClusterIP 10.109.121.40 &amp;lt;none&amp;gt; 8080/TCP 26m
prometheus-operated ClusterIP None &amp;lt;none&amp;gt; 9090/TCP 25m
prometheus-prometheus-node-exporter ClusterIP 10.107.29.93 &amp;lt;none&amp;gt; 9100/TCP 26m
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上信息无误则表明&lt;code>prometheus&lt;/code>已成功部署.&lt;/p>
&lt;p>使用&lt;code>minikube&lt;/code>(&lt;code>kubectl&lt;/code>亦可)的转发功能, 将&lt;code>svc/prometheus-kube-prometheus-prometheus &lt;/code>的端口映射到本地:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ minikube port-forward svc/prometheus-kube-prometheus-prometheus &lt;span class="m">9090&lt;/span>
Forwarding from 127.0.0.1:9090 -&amp;gt; &lt;span class="m">9090&lt;/span>
Forwarding from &lt;span class="o">[&lt;/span>::1&lt;span class="o">]&lt;/span>:9090 -&amp;gt; &lt;span class="m">9090&lt;/span>
Handling connection &lt;span class="k">for&lt;/span> &lt;span class="m">9090&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>打开浏览器访问&lt;code>http://127.0.0.1:9090/&lt;/code>查看&lt;code>prometheus UI&lt;/code>:&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/prometheus%2Bk8s/prometheus%20ui.png" alt="">&lt;/p>
&lt;p>使用以下命令查看&lt;code>prometheus&lt;/code>的&lt;code>servicemonitor&lt;/code>(其对应&lt;code>prometheus UI&lt;/code>中的&lt;code>target&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ kubectl get servicemonitor
NAME AGE
prometheus-kube-prometheus-alertmanager 36m
prometheus-kube-prometheus-apiserver 36m
prometheus-kube-prometheus-coredns 36m
prometheus-kube-prometheus-grafana 36m
prometheus-kube-prometheus-kube-controller-manager 36m
prometheus-kube-prometheus-kube-etcd 36m
prometheus-kube-prometheus-kube-proxy 36m
prometheus-kube-prometheus-kube-scheduler 36m
prometheus-kube-prometheus-kube-state-metrics 36m
prometheus-kube-prometheus-kubelet 36m
prometheus-kube-prometheus-node-exporter 36m
prometheus-kube-prometheus-operator 36m
prometheus-kube-prometheus-prometheus 36m
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看所有&lt;code>crd&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ kubectl get crd
NAME CREATED AT
alertmanagers.monitoring.coreos.com 2020-10-08T01:10:04Z
podmonitors.monitoring.coreos.com 2020-10-08T01:10:04Z
prometheuses.monitoring.coreos.com 2020-10-08T01:10:04Z
prometheusrules.monitoring.coreos.com 2020-10-08T01:10:04Z
servicemonitors.monitoring.coreos.com 2020-10-08T01:10:04Z
thanosrulers.monitoring.coreos.com 2020-10-08T01:10:04Z
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>通过&lt;code>describe&lt;/code>子命令可以发现&lt;code>crd&lt;/code>的&lt;code>matchLabels&lt;/code>都包含&lt;code>release: prometheus&lt;/code>标签.&lt;/strong>&lt;/p>
&lt;h3 id="部署mongodb及其服务">部署&lt;code>MongoDB&lt;/code>及其服务&lt;/h3>
&lt;p>参考&lt;code>MongoDB-depl-svc.yaml&lt;/code>文件内容如下:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="k">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>apps/v1&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>Deployment&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>mongodb-deployment&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>mongodb&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">replicas&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">matchLabels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>mongodb&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">template&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>mongodb&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">containers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>mongodb&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>mongo&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">containerPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">27017&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>---&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>v1&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>Service&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>mongodb-service&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>mongodb&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>TCP&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">27017&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">targetPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">27017&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>按需进行修改, 修改完成之后应用配置清单:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ kubectl apply -f MongoDB-depl-svc.yaml
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>等待&lt;code>MongoDB&lt;/code>部署完成&amp;hellip;&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ kubectl get deployment/mongodb-deployment -w
NAME READY UP-TO-DATE AVAILABLE AGE
mongodb-deployment 2/2 &lt;span class="m">2&lt;/span> &lt;span class="m">0&lt;/span> 3m13s
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="部署mongodb-exporter">部署&lt;code>MongoDB Exporter&lt;/code>&lt;/h3>
&lt;p>添加&lt;code>helm repo&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
$ helm repo update
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>下载&lt;code>chart&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ helm pull prometheus-community/prometheus-mongodb-exporter --untar
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>修改&lt;code>value.yaml&lt;/code>文件内容:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-yaml" data-lang="yaml">...&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># 使用kubectl get svc获取MongoDB的服务及端口&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">mongodb&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">uri&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;mongodb://mongodb-service:27017&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>...&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># 从上面可以得知servicemonitor所匹配的标签 release: prometheus&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">serviceMonitor&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">additionalLabels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">release&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>prometheus&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>...&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>应用&lt;code>chart&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ helm install mongodb-exporter prometheus-mongodb-exporter/
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>等待&lt;code>svc&lt;/code>,&lt;code>pod&lt;/code>部署完成之后, 映射&lt;code>mongodb-exporter&lt;/code>, 检查&lt;code>/metrics&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ kubectl port-forward service/mongodb-exporter-prometheus-mongodb-exporter &lt;span class="m">9216&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>打开浏览器访问&lt;code>http://localhost:9216/metrics&lt;/code>进行查看:&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/prometheus%2Bk8s/mongodb%20metrics.png" alt="">&lt;/p>
&lt;p>此时, 再打开&lt;code>prometheus UI&lt;/code>查看&lt;code>target&lt;/code>可以看到&lt;code>mongodb-exporter&lt;/code>已经处于&lt;code>UP&lt;/code>状态:&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/prometheus%2Bk8s/mongodb%20target.png" alt="">&lt;/p>
&lt;h3 id="在grafana查看">在&lt;code>Grafana&lt;/code>查看&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ kubectl port-forward deployment/prometheus-grafana &lt;span class="m">3000&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>打开浏览器访问&lt;code>http://localhost:3000&lt;/code>:&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/prometheus%2Bk8s/mongodb%20grafana.png" alt="">&lt;/p>
&lt;p>ℹ️默认账号&lt;code>admin&lt;/code>, 默认密码&lt;code>prom-operator&lt;/code> (从官方文档中即可获取)&lt;/p>
&lt;h2 id="附录1-chart-地址">附录1: chart 地址&lt;/h2>
&lt;p>上文中所使用的&lt;code>chart&lt;/code>仓库地址:&lt;/p>
&lt;ul>
&lt;li>kube-prometheus-stack: &lt;a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack&lt;/a>&lt;/li>
&lt;li>mongodb-exporter: &lt;a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/prometheus-mongodb-exporter">https://github.com/prometheus-community/helm-charts/tree/main/charts/prometheus-mongodb-exporter&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="附录2-kubectl-get-all">附录2: kubectl get all&lt;/h2>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/prometheus%2Bk8s/kubectl%20get%20all.png" alt="">&lt;/p></description></item><item><title>自定义 shortcode</title><link>https://agou-ops.top/post/%E8%87%AA%E5%AE%9A%E4%B9%89shortcode/</link><pubDate>Tue, 06 Oct 2020 16:06:48 +0800</pubDate><guid>https://agou-ops.top/post/%E8%87%AA%E5%AE%9A%E4%B9%89shortcode/</guid><description>&lt;h1 id="shortcode-">shortcode ???&lt;/h1>
&lt;p>什么是&lt;code>shortcode&lt;/code>以及&lt;code>hugo内置shortcode&lt;/code>参考： &lt;a href="https://agou-ops.top/post/shortcodes-preview/">shortcodes-preview&lt;/a>&lt;/p>
&lt;h2 id="github-shortcode">github shortcode&lt;/h2>
&lt;p>在指定目录添加以下文件：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="c">&amp;lt;!-- 文件位置：~/layouts/shortcodes/github.html --&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;github&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;logo&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
{{ replace $.Site.Data.SVG.repository &amp;#34;icon&amp;#34; &amp;#34;icon github-icon&amp;#34; | safeHTML }}
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;name&amp;#34;&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">{{&lt;/span> &lt;span class="err">.&lt;/span>&lt;span class="na">Get&lt;/span> &lt;span class="err">&amp;#34;&lt;/span>&lt;span class="na">link&lt;/span>&lt;span class="err">&amp;#34;&lt;/span> &lt;span class="err">}}&lt;/span> &lt;span class="na">target&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;_blank&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>{{ .Get &amp;#34;name&amp;#34; }}&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;description&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>{{ .Get &amp;#34;description&amp;#34; }}&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;language&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">span&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;language-color&amp;#34;&lt;/span> &lt;span class="na">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;background-color: {{ .Get &amp;#34;&lt;/span>&lt;span class="na">color&lt;/span>&lt;span class="err">&amp;#34;&lt;/span> &lt;span class="err">}}&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">span&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">span&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;language-name&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>{{ .Get &amp;#34;language&amp;#34; }}&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">span&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
// 文件位置：~/assets/scss/custom/_custom.scss
// github shortcode
.github {
border: 1px solid var(--color-contrast-low);
border-color: #b3b4ac;
border-style: dotted;
border-radius: 12px !important;
margin: 0 auto;
margin-bottom: 1em;
padding: 1em;
background-color: #fcfdf8;
.github-icon {
width: 1.2em;
height: 1.2em;
margin-right: 0.5em;
margin-bottom: 0.2em;
fill: var(--color-contrast-high);
transition: all .5s;
}
.name {
font-weight: bold;
color: #0366d6 !important;
text-decoration: none;
}
.description {
margin-top: 0.5em;
margin-bottom: 1em;
color: #586069;
text-align: justify;
font-size: 90%;
transition: all .5s;
}
.language-color {
position: relative;
top: 1px;
display: inline-block;
width: 0.75em;
height: 0.75em;
border-radius: 50%;
}
.language-name {
color: var(--color-contrast-high);
font-size: 90%;
color: #586069;
margin-left: 0.5em;
transition: all .5s;
}
}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>markdown&lt;/code>代码如下（去掉注释符号&lt;code>/*&lt;/code>和&lt;code>*/&lt;/code>）：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-markdown" data-lang="markdown">{{/*&amp;lt; github name=&amp;#34;kubernetes/kubernetes&amp;#34; link=&amp;#34;https://github.com/kubernetes/kubernetes&amp;#34; description=&amp;#34;Production-Grade Container Scheduling and Management&amp;#34; color=&amp;#34;#00ADD8&amp;#34; language=&amp;#34;Go&amp;#34; &amp;gt;*/}}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;div class="github">
&lt;div class="logo">
&lt;svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 16 16">&lt;path fill-rule="evenodd" clip-rule="evenodd" d="M2 2.5C2 1.83696 2.26339 1.20107 2.73223 0.732233C3.20108 0.263392 3.83696 0 4.5 0L13.25 0C13.4489 0 13.6397 0.0790176 13.7803 0.21967C13.921 0.360322 14 0.551088 14 0.75V13.25C14 13.4489 13.921 13.6397 13.7803 13.7803C13.6397 13.921 13.4489 14 13.25 14H10.75C10.5511 14 10.3603 13.921 10.2197 13.7803C10.079 13.6397 10 13.4489 10 13.25C10 13.0511 10.079 12.8603 10.2197 12.7197C10.3603 12.579 10.5511 12.5 10.75 12.5H12.5V10.5H4.5C4.30308 10.5 4.11056 10.5582 3.94657 10.6672C3.78257 10.7762 3.65442 10.9312 3.57816 11.1128C3.50191 11.2943 3.48096 11.4943 3.51793 11.6878C3.5549 11.8812 3.64816 12.0594 3.786 12.2C3.92524 12.3422 4.0023 12.5338 4.00024 12.7328C3.99818 12.9318 3.91716 13.1218 3.775 13.261C3.63285 13.4002 3.4412 13.4773 3.24222 13.4752C3.04325 13.4732 2.85324 13.3922 2.714 13.25C2.25571 12.7829 1.99929 12.1544 2 11.5V2.5ZM12.5 1.5V9H4.5C4.144 9 3.806 9.074 3.5 9.208V2.5C3.5 2.23478 3.60536 1.98043 3.79289 1.79289C3.98043 1.60536 4.23478 1.5 4.5 1.5H12.5ZM5 12.25V15.5C5 15.5464 5.01293 15.5919 5.03734 15.6314C5.06175 15.6709 5.09667 15.7028 5.1382 15.7236C5.17972 15.7444 5.22621 15.7532 5.27245 15.749C5.31869 15.7448 5.36286 15.7279 5.4 15.7L6.85 14.613C6.89328 14.5805 6.94591 14.563 7 14.563C7.05409 14.563 7.10673 14.5805 7.15 14.613L8.6 15.7C8.63714 15.7279 8.68131 15.7448 8.72755 15.749C8.77379 15.7532 8.82028 15.7444 8.8618 15.7236C8.90333 15.7028 8.93826 15.6709 8.96266 15.6314C8.98707 15.5919 9 15.5464 9 15.5V12.25C9 12.1837 8.97366 12.1201 8.92678 12.0732C8.87989 12.0263 8.81631 12 8.75 12H5.25C5.1837 12 5.12011 12.0263 5.07322 12.0732C5.02634 12.1201 5 12.1837 5 12.25Z"/>&lt;/svg>
&lt;a class="name" href=https://github.com/kubernetes/kubernetes target="_blank">kubernetes/kubernetes&lt;/a>
&lt;/div>
&lt;div class="description">Production-Grade Container Scheduling and Management&lt;/div>
&lt;div class="language">
&lt;span class="language-color" style="background-color: #00ADD8">&lt;/span>
&lt;span class="language-name">Go&lt;/span>
&lt;/div>
&lt;/div>
&lt;h2 id="bilibili-shortcode">bilibili shortcode&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-markdown" data-lang="markdown">{{/*&amp;lt; bilibili BV1YK4y1C7CU &amp;gt;*/}}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="bilibili">
&lt;iframe src="//player.bilibili.com/player.html?bvid=BV1YK4y1C7CU&amp;page=1" scrolling="no"
border="0" frameborder="no" framespacing="0" allowfullscreen="true">&lt;/iframe>
&lt;/div>
&lt;h2 id="video-shortcode">video shortcode&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-markdown" data-lang="markdown">{{/*&amp;lt; video link=&amp;#34;http://agou-resources.oss-cn-chengdu.aliyuncs.com/video/test.mp4&amp;#34; pic=&amp;#34;http://agou-images.oss-cn-qingdao.aliyuncs.com/Wallpapers/violet.png&amp;#34; time=10 text=&amp;#34;高能部分&amp;#34; time1=20 text1=&amp;#34;高能结束&amp;#34; &amp;gt;*/}}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;style type="text/css">
#dplayer-video-container {
max-width: 800px;
margin: 0 auto;
margin-top: -1rem;
}
@media screen and (max-device-width: 400px) {
#dplayer {
width: 100%;
}
}
&lt;/style>
&lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/dplayer@1.25.0/dist/DPlayer.min.css">
&lt;div id="dplayer-video-container">
&lt;div id="dplayer">&lt;/div>
&lt;div>
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/dplayer/1.26.0/DPlayer.min.js">&lt;/script>
&lt;script>
const dp = new DPlayer({
container: document.getElementById('dplayer'),
autoplay: false,
theme: '#b7daff',
loop: true,
lang: 'zh-cn',
screenshot: false,
hotkey: true,
preload: 'auto',
volume : 0.7,
mutex: true,
video: {
type: 'auto',
url: 'http:\/\/agou-resources.oss-cn-chengdu.aliyuncs.com\/video\/test.mp4',
pic: 'http:\/\/agou-images.oss-cn-qingdao.aliyuncs.com\/Wallpapers\/violet.png'
},
contextmenu: [
{
text: '❤ 博客主页',
link: 'https://agou-ops.github.io'
},
{
text: '播放器信息',
click: (player) => {
console.log(player);
}
}
],
highlight: [
{
time: '10',
text: '高能部分',
},
{
time: '20',
text: '高能结束',
},
{
time: '',
text: '',
},
{
time: '',
text: '',
},
{
time: '',
text: '',
},
],
});
&lt;/script></description></item><item><title>我的动漫之旅(My Anime Trip.)</title><link>https://agou-ops.top/anime/</link><pubDate>Wed, 30 Sep 2020 19:14:44 +0800</pubDate><guid>https://agou-ops.top/anime/</guid><description>&lt;p>&lt;em>&lt;strong>按照观看结束时间排序，序号仅用于计数。(2020-03-28 至 ????-??-??)&lt;/strong>&lt;/em>&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>变更日志：&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>2020年10月01日：初始化表格；&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="二二年">二〇二〇年&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th align="center">序号&lt;/th>
&lt;th align="center">时间&lt;/th>
&lt;th align="center">动漫名&lt;/th>
&lt;th align="center">最喜欢的角色&lt;/th>
&lt;th align="center">制片方&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td align="center">0&lt;/td>
&lt;td align="center">2020/03/28&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%B0%8F%E6%9E%97%E5%AE%B6%E7%9A%84%E9%BE%99%E5%A5%B3%E4%BB%86">小林家的龙女仆&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E6%89%98%E5%B0%94(%E5%B0%8F%E6%9E%97%E5%AE%B6%E7%9A%84%E9%BE%99%E5%A5%B3%E4%BB%86)">托尔&lt;/a>、&lt;a href="https://zh.moegirl.org.cn/%E5%BA%B7%E5%A8%9C%E5%8D%A1%E5%A7%86%E4%BE%9D">康娜&lt;/a>、&lt;a href="https://zh.moegirl.org.cn/%E9%9C%B2%E7%A7%91%E4%BA%9A">尔科亚&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E4%BA%AC%E9%83%BD%E5%8A%A8%E7%94%BB">京都&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">1&lt;/td>
&lt;td align="center">2020/04/02&lt;/td>
&lt;td align="center">&lt;strong>&lt;a href="https://zh.moegirl.org.cn/%E7%B4%AB%E7%BD%97%E5%85%B0%E6%B0%B8%E6%81%92%E8%8A%B1%E5%9B%AD">《紫罗兰永恒花园》&lt;/a>&lt;/strong>&lt;/td>
&lt;td align="center">&lt;strong>&lt;a href="https://zh.moegirl.org.cn/%E8%96%87%E5%B0%94%E8%8E%89%E7%89%B9%C2%B7%E4%BC%8A%E8%8A%99%E5%8A%A0%E7%99%BB">薇尔莉特·伊芙加登&lt;/a>&lt;/strong>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E4%BA%AC%E9%83%BD%E5%8A%A8%E7%94%BB">京都&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">2&lt;/td>
&lt;td align="center">2020/04/06&lt;/td>
&lt;td align="center">&lt;strong>&lt;a href="https://zh.moegirl.org.cn/%E5%90%B9%E5%93%8D%EF%BC%81%E4%B8%8A%E4%BD%8E%E9%9F%B3%E5%8F%B7">《吹响！上低音号》&lt;/a>&lt;/strong>&lt;/td>
&lt;td align="center">&lt;strong>&lt;a href="https://zh.moegirl.org.cn/%E9%BB%84%E5%89%8D%E4%B9%85%E7%BE%8E%E5%AD%90">黄前久美子&lt;/a>&lt;/strong>(黄大叔)、&lt;a href="https://zh.moegirl.org.cn/%E4%B8%AD%E4%B8%96%E5%8F%A4%E9%A6%99%E7%BB%87">中世古香织&lt;/a>(小香织)&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E4%BA%AC%E9%83%BD%E5%8A%A8%E7%94%BB">京都&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">3&lt;/td>
&lt;td align="center">2020/04/18&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E8%BD%BB%E9%9F%B3%E5%B0%91%E5%A5%B3">《轻音少女》&lt;/a>(K-ON!)&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%B9%B3%E6%B3%BD%E5%94%AF">平泽唯&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E4%BA%AC%E9%83%BD%E5%8A%A8%E7%94%BB">京都&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">4&lt;/td>
&lt;td align="center">2020/04/24&lt;/td>
&lt;td align="center">&lt;strong>&lt;a href="https://zh.moegirl.org.cn/%E6%97%A5%E5%B8%B8">《日常》&lt;/a>&lt;/strong>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E9%95%BF%E9%87%8E%E5%8E%9F%E7%BE%8E%E7%BB%AA">长野原美绪&lt;/a>(美绪酱)&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E4%BA%AC%E9%83%BD%E5%8A%A8%E7%94%BB">京都&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">5&lt;/td>
&lt;td align="center">2020/05/02&lt;/td>
&lt;td align="center">&lt;strong>&lt;a href="https://zh.moegirl.org.cn/CLANNAD">《CLANNAD》&lt;/a>&lt;/strong>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%8F%A4%E6%B2%B3%E6%B8%9A">古河渚&lt;/a>、&lt;a href="https://zh.moegirl.org.cn/%E5%86%88%E5%B4%8E%E6%B1%90">冈崎汐&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E4%BA%AC%E9%83%BD%E5%8A%A8%E7%94%BB">京都&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">6&lt;/td>
&lt;td align="center">2020/05/07&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E4%B8%AD%E4%BA%8C%E7%97%85%E4%B9%9F%E8%A6%81%E8%B0%88%E6%81%8B%E7%88%B1">《中二病也要谈恋爱》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E4%B8%83%E5%AE%AB%E6%99%BA%E9%9F%B3">七宫智音&lt;/a>、&lt;a href="https://zh.moegirl.org.cn/%E5%B0%8F%E9%B8%9F%E6%B8%B8%E5%85%AD%E8%8A%B1">小鸟游六花&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E4%BA%AC%E9%83%BD%E5%8A%A8%E7%94%BB">京都&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">7&lt;/td>
&lt;td align="center">2020/05/12&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%A2%83%E7%95%8C%E7%9A%84%E5%BD%BC%E6%96%B9">《境界的彼方》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E6%A0%97%E5%B1%B1%E6%9C%AA%E6%9D%A5">栗山未来&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E4%BA%AC%E9%83%BD%E5%8A%A8%E7%94%BB">京都&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">8&lt;/td>
&lt;td align="center">2020/05/17&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E7%94%98%E5%9F%8E%E5%85%89%E8%BE%89%E6%B8%B8%E4%B9%90%E5%9B%AD">《甘城光辉游乐园》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%8D%83%E6%96%97%E4%BA%94%E5%8D%81%E9%93%83">千斗五十铃&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E4%BA%AC%E9%83%BD%E5%8A%A8%E7%94%BB">京都&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">9&lt;/td>
&lt;td align="center">2020/05/21&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E9%BE%99%E7%8E%8B%E7%9A%84%E5%B7%A5%E4%BD%9C">《龙王的工作》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E9%9B%8F%E9%B9%A4%E7%88%B1">雏鹤爱&lt;/a>、&lt;a href="https://zh.moegirl.org.cn/%E5%A4%8F%E6%B4%9B%E7%89%B9%C2%B7%E4%BC%8A%E4%BD%90%E9%98%BF%E5%B0%94">夏洛特·伊佐阿尔&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/Project_No.9">project No.9&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">10&lt;/td>
&lt;td align="center">2020/05/26&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%9F%83%E7%BD%97%E8%8A%92%E9%98%BF%E8%80%81%E5%B8%88">《埃罗芒阿老师》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E9%AB%98%E7%A0%82%E6%99%BA%E6%83%A0">高砂智惠&lt;/a>(店长)、&lt;a href="https://zh.moegirl.org.cn/%E5%92%8C%E6%B3%89%E7%BA%B1%E9%9B%BE">和泉纱雾&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/A-1_Pictures">A-1 Pictures&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">11&lt;/td>
&lt;td align="center">2020/05/26&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E7%8F%88%E7%99%BE%E7%92%83%E7%9A%84%E5%A0%95%E8%90%BD">《珈百璃的堕落》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E8%83%A1%E6%A1%83%E6%B3%BD%C2%B7%E8%90%A8%E5%A1%94%E5%A6%AE%E5%9F%BA%E4%BA%9A%C2%B7%E9%BA%A6%E5%85%8B%E9%81%93%E5%A8%81%E5%B0%94">胡桃泽·萨塔妮娅·麦克道威尔&lt;/a>(萨塔尼亚)、&lt;a href="https://zh.moegirl.org.cn/%E7%99%BD%E7%BE%BD%C2%B7%E6%8B%89%E8%8F%B2%E5%B0%94%C2%B7%E6%81%A9%E5%85%B9%E6%B2%83%E6%96%AF">白羽·菈菲尔·恩兹沃斯&lt;/a>(拉菲)&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%8A%A8%E7%94%BB%E5%B7%A5%E6%88%BF">动画工房&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">12&lt;/td>
&lt;td align="center">2020/05/28&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E6%9C%AA%E9%97%BB%E8%8A%B1%E5%90%8D">《未闻花名》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E6%9C%AC%E9%97%B4%E8%8A%BD%E8%A1%A3%E5%AD%90">本间芽衣子&lt;/a>(面码)&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/A-1_Pictures">A-1 Pictures&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">13&lt;/td>
&lt;td align="center">2020/05/31&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E8%B7%AF%E4%BA%BA%E5%A5%B3%E4%B8%BB%E7%9A%84%E5%85%BB%E6%88%90%E6%96%B9%E6%B3%95">《路人女主的养成方法》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%8A%A0%E8%97%A4%E6%83%A0">加藤惠&lt;/a>、&lt;a href="https://zh.moegirl.org.cn/%E9%9C%9E%E4%B9%8B%E4%B8%98%E8%AF%97%E7%BE%BD">霞之丘诗羽&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/A-1_Pictures">A-1 Pictures&lt;/a> &amp;amp; &lt;a href="https://zh.moegirl.org.cn/CloverWorks">CloverWorks&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">14&lt;/td>
&lt;td align="center">2020/06/01&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E8%BF%99%E4%B8%AA%E7%BE%8E%E6%9C%AF%E7%A4%BE%E6%9C%89%E5%A4%A7%E9%97%AE%E9%A2%98%EF%BC%81">《这个美术社有大问题！》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%AE%87%E4%BD%90%E7%BE%8E%E7%91%9E%E5%B8%8C">宇佐美瑞希&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/Feel.">feel.&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">15&lt;/td>
&lt;td align="center">2020/06/06&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/LoveLive!">《LoveLive!》&lt;/a>(&lt;a href="https://zh.moegirl.org.cn/%CE%9C's">μ&amp;rsquo;s&lt;/a>)&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E4%B8%9C%E6%9D%A1%E5%B8%8C">东条希&lt;/a>(希)、&lt;a href="https://zh.moegirl.org.cn/%E7%9F%A2%E6%B3%BD%E5%A6%AE%E5%8F%AF">矢泽妮可&lt;/a>(妮可)&lt;/td>
&lt;td align="center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">16&lt;/td>
&lt;td align="center">2020/06/15&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E6%81%8B%E7%88%B1%E7%A0%94%E7%A9%B6%E6%89%80">《恋爱研究所》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E7%9C%9F%E6%9C%A8%E5%A4%8F%E7%BB%AA">真木夏绪&lt;/a>、&lt;a href="https://zh.moegirl.org.cn/%E4%BB%93%E6%A1%A5%E8%8E%89%E5%AD%90">仓桥莉子&lt;/a>(李狗)&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%8A%A8%E7%94%BB%E5%B7%A5%E6%88%BF">动画工房&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">17&lt;/td>
&lt;td align="center">2020/06/17&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E7%BB%88%E5%B0%86%E6%88%90%E4%B8%BA%E4%BD%A0">《终将成为你》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E4%B8%83%E6%B5%B7%E7%81%AF%E5%AD%90">七海灯子&lt;/a>、&lt;a href="https://zh.moegirl.org.cn/%E5%B0%8F%E7%B3%B8%E4%BE%91">小糸侑&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/TROYCA">TROYCA&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">18&lt;/td>
&lt;td align="center">2020/06/19&lt;/td>
&lt;td align="center">&lt;strong>&lt;a href="https://zh.moegirl.org.cn/%E5%A6%96%E7%B2%BE%E6%A3%AE%E6%9E%97%E7%9A%84%E5%B0%8F%E4%B8%8D%E7%82%B9">《妖精森林的小不点》&lt;/a>&lt;/strong>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%BE%A1%E5%AD%90%E5%9C%B0">御子地&lt;/a>、&lt;a href="https://zh.moegirl.org.cn/%E7%99%BD%E6%98%8E">白明&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/Lerche">Lerche&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">19&lt;/td>
&lt;td align="center">2020/06/22&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E9%82%BB%E5%AE%B6%E7%B4%A2%E8%8F%B2">《邻家索菲》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%A4%A9%E9%87%8E%E7%81%AF">天野灯&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/Studio%E4%BA%94%E7%BB%84">Studio五组&lt;/a>×&lt;a href="https://zh.moegirl.org.cn/AXsiZ">AXsiZ&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">20&lt;/td>
&lt;td align="center">2020/06/26&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/tari_tari">《tari tari》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%86%B2%E7%94%B0%E7%BA%B1%E7%BE%BD">冲田纱羽&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/P.A.WORKS">P.A.WORKS&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">21&lt;/td>
&lt;td align="center">2020/06/26&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E6%91%87%E6%9B%B3%E9%9C%B2%E8%90%A5">《摇曳露营》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%BF%97%E6%91%A9%E5%87%9B">志摩凛&lt;/a>、&lt;a href="https://zh.moegirl.org.cn/%E5%90%84%E5%8A%A1%E5%8E%9F%E6%8A%9A%E5%AD%90">各务原抚子&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/C-Station">C-Station&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">22&lt;/td>
&lt;td align="center">2020/07/01&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E8%8A%B1%E5%BC%80%E4%BC%8A%E5%90%95%E6%B3%A2">《花开伊吕波》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E6%8A%BC%E6%B0%B4%E8%8F%9C%E5%AD%90">押水菜子&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/P.A.WORKS">P.A.WORKS&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">23&lt;/td>
&lt;td align="center">2020/07/12&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E6%A8%B1%E8%8A%B1%E5%BA%84%E7%9A%84%E5%AE%A0%E7%89%A9%E5%A5%B3%E5%AD%A9">《樱花庄的宠物女孩》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E4%B8%8A%E4%BA%95%E8%8D%89%E7%BE%8E%E5%92%B2">上井草美咲&lt;/a>、&lt;a href="https://zh.moegirl.org.cn/%E9%9D%92%E5%B1%B1%E4%B8%83%E6%B5%B7">青山七海&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/J.C.STAFF">J.C.STAFF&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">24&lt;/td>
&lt;td align="center">2020/07/23&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E6%82%A0%E5%93%89%E6%97%A5%E5%B8%B8%E5%A4%A7%E7%8E%8B">《悠哉日常大王》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%AE%AB%E5%86%85%E8%8E%B2%E5%8D%8E">宫内莲华&lt;/a>(喵帕斯)、&lt;a href="https://zh.moegirl.org.cn/%E8%B6%8A%E8%B0%B7%E5%A4%8F%E6%B5%B7">越谷夏海&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/SILVER_LINK."> SILVER LINK.&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">25&lt;/td>
&lt;td align="center">2020/07/27&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E6%80%95%E7%97%9B%E7%9A%84%E6%88%91%EF%BC%8C%E6%8A%8A%E9%98%B2%E5%BE%A1%E5%8A%9B%E7%82%B9%E6%BB%A1%E5%B0%B1%E5%AF%B9%E4%BA%86">《怕痛的我，把防御力点满就对了》&lt;/a>&lt;/td>
&lt;td align="center">梅普露&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/SILVER_LINK."> SILVER LINK.&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">26&lt;/td>
&lt;td align="center">2020/08/06&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/NEW_GAME!">《NEW GAME!》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E6%B3%B7%E6%9C%AC%E4%B8%80%E4%BA%8C%E4%B8%89">泷本一二三&lt;/a>&lt;strong>、&lt;/strong>&lt;a href="https://zh.moegirl.org.cn/%E9%A5%AD%E5%B2%9B%E7%BB%93%E9%9F%B3">饭岛结音&lt;/a>(关西腔i了)、&lt;a href="https://zh.moegirl.org.cn/%E6%A8%B1%E5%AE%81%E5%AE%81">樱宁宁&lt;/a>(宁宁鸡)&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%8A%A8%E7%94%BB%E5%B7%A5%E6%88%BF">动画工房&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">27&lt;/td>
&lt;td align="center">2020/08/10&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/Slow_Start">《Slow Start》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%8D%81%E4%BB%93%E8%8D%A3%E4%BE%9D%E5%AD%90">十仓荣依子&lt;/a>、&lt;a href="https://zh.moegirl.org.cn/%E5%8D%83%E7%9F%B3%E5%86%A0">千石冠&lt;/a>、&lt;a href="https://zh.moegirl.org.cn/%E4%B8%80%E4%B9%8B%E6%BF%91%E8%8A%B1%E5%90%8D"> 一之濑花名&lt;/a> 、 &lt;a href="https://zh.moegirl.org.cn/%E7%99%BE%E5%9C%B0%E7%8E%89%E6%89%8B">百地玉手&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/A-1_Pictures">A-1 Pictures&lt;/a>→&lt;a href="https://zh.moegirl.org.cn/CloverWorks">CloverWorks&lt;/a>[1] &lt;a href="https://zh.moegirl.org.cn/%E8%8A%B3%E6%96%87%E7%A4%BE">芳文社&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">28&lt;/td>
&lt;td align="center">2020/08/15&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/Comic_Girls">《Comic Girls》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E8%90%8C%E7%94%B0%E8%96%B0%E5%AD%90">萌田薰子&lt;/a>(小混沌)&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/Nexus">Nexus&lt;/a> &lt;a href="https://zh.moegirl.org.cn/%E8%8A%B3%E6%96%87%E7%A4%BE">芳文社&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">29&lt;/td>
&lt;td align="center">2020/08/19&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E6%81%8B%E7%88%B1%E5%B0%8F%E8%A1%8C%E6%98%9F">《恋爱小行星》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E6%9C%A8%E4%B9%8B%E5%B9%A1%E7%B1%B3%E6%8B%89">木之幡米拉&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%8A%A8%E7%94%BB%E5%B7%A5%E6%88%BF">动画工房&lt;/a> &lt;a href="https://zh.moegirl.org.cn/%E8%8A%B3%E6%96%87%E7%A4%BE">芳文社&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">30&lt;/td>
&lt;td align="center">2020/08/22&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E8%A1%97%E8%A7%92%E9%AD%94%E6%97%8F">《街角魔族》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%90%89%E7%94%B0%E4%BC%98%E5%AD%90">吉田优子&lt;/a>(夏美子)&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/J.C.STAFF">J.C.STAFF&lt;/a> &lt;a href="https://zh.moegirl.org.cn/%E8%8A%B3%E6%96%87%E7%A4%BE">芳文社&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">31&lt;/td>
&lt;td align="center">2020/08/27&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%B1%9E%E6%80%A7%E5%92%96%E5%95%A1%E9%A6%86">《属性咖啡馆》&lt;/a>(Blend·S)&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E6%97%A5%E5%90%91%E5%A4%8F%E5%B8%86">日向夏帆&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/A-1_Pictures">A-1 Pictures&lt;/a> &lt;a href="https://zh.moegirl.org.cn/%E8%8A%B3%E6%96%87%E7%A4%BE">芳文社&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">32&lt;/td>
&lt;td align="center">2020/08/30&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E6%9C%AA%E7%A1%AE%E8%AE%A4%E8%BF%9B%E8%A1%8C%E5%BC%8F">《未确认进行式》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E4%B8%89%E5%B3%B0%E7%9C%9F%E7%99%BD">三峰真白&lt;/a>、&lt;a href="https://zh.moegirl.org.cn/%E5%A4%9C%E4%B9%8B%E6%A3%AE%E5%B0%8F%E7%BA%A2">夜之森小红&lt;/a>(小红)&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%8A%A8%E7%94%BB%E5%B7%A5%E6%88%BF">动画工房&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">33&lt;/td>
&lt;td align="center">2020/09/02&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%A4%A9%E4%BD%93%E7%9A%84%E7%A7%A9%E5%BA%8F">《天体的秩序》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%8F%A4%E5%AE%AB%E4%B9%83%E4%B9%83%E9%A6%99">古宫乃乃香&lt;/a>、&lt;a href="https://zh.moegirl.org.cn/%E8%AF%BA%E8%89%BE%E5%B0%94(%E5%A4%A9%E4%BD%93%E7%9A%84%E7%A7%A9%E5%BA%8F)">诺艾尔&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/Studio_3Hz">Studio 3Hz&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">34&lt;/td>
&lt;td align="center">2020/09/08&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/citrus">《citrus》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E8%93%9D%E5%8E%9F%E6%9F%9A%E5%AD%90">蓝原柚子&lt;/a>、&lt;a href="https://zh.moegirl.org.cn/%E8%93%9D%E5%8E%9F%E8%8A%BD%E8%A1%A3">蓝原芽衣&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/Passione">Passione&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">35&lt;/td>
&lt;td align="center">2020/09/15&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/Anne_Happy">《Anne Happy♪》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E8%8A%B1%E5%B0%8F%E6%B3%89%E6%9D%8F">花小泉杏&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/SILVER_LINK.">SILVER LINK.&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">36&lt;/td>
&lt;td align="center">2020/09/24&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E6%94%BE%E5%AD%A6%E5%90%8E%E6%B5%B7%E5%A0%A4%E6%97%A5%E8%AE%B0">《放学后海堤日记》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E9%B9%A4%E6%9C%A8%E9%98%B3%E6%B8%9A">鹤木阳渚&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%8A%A8%E7%94%BB%E5%B7%A5%E6%88%BF">动画工房&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">37&lt;/td>
&lt;td align="center">2020/09/25&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E8%AF%B7%E9%97%AE%E6%82%A8%E4%BB%8A%E5%A4%A9%E8%A6%81%E6%9D%A5%E7%82%B9%E5%85%94%E5%AD%90%E5%90%97%EF%BC%9F">《请问您今天要来点兔子吗？》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E6%A1%90%E9%97%B4%E7%BA%B1%E8%B7%AF">桐间纱路&lt;/a>(纱路酱)、宇治松千夜](&lt;a href="https://zh.moegirl.org.cn/">https://zh.moegirl.org.cn/&lt;/a>宇治松千夜)&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/Koi">Koi&lt;/a>(原作)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">38&lt;/td>
&lt;td align="center">2020/09/25&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%AE%87%E5%B4%8E%E9%85%B1%E6%83%B3%E8%A6%81%E7%8E%A9%E8%80%8D%EF%BC%81">《宇崎酱想要玩耍！》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%AE%87%E5%B4%8E%E8%8A%B1">宇崎花 &lt;/a>&lt;/td>
&lt;td align="center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">39&lt;/td>
&lt;td align="center">2020/09/29&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E9%9B%8F%E5%AD%90%E7%9A%84%E7%AC%94%E8%AE%B0">《雏子的笔记》&lt;/a>&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/%E5%A4%8F%E5%B7%9D%E7%8E%96%E4%BA%95%E8%8F%9C">夏川玖井菜&lt;/a>(奇怪的爱好：喜欢吃书)&lt;/td>
&lt;td align="center">&lt;a href="https://zh.moegirl.org.cn/Passione">Passione&lt;/a>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="其他">其他&lt;/h2>
&lt;h5 id="年度最喜欢的声优及所配音角色">年度最喜欢的声优(及所配音角色)：&lt;/h5>
&lt;ul>
&lt;li>&lt;a href="https://zh.moegirl.org.cn/%E7%9F%B3%E5%B7%9D%E7%94%B1%E4%BE%9D">石川由依&lt;/a>：薇尔莉特·伊芙加登、高砂智惠；&lt;/li>
&lt;li>&lt;a href="https://zh.moegirl.org.cn/%E5%AD%90%E5%AE%89%E6%AD%A6%E4%BA%BA">子安武人&lt;/a>：克劳迪亚·霍金斯；&lt;/li>
&lt;/ul>
&lt;h5 id="年度最喜欢的opedost">年度最喜欢的OP/ED/OST&lt;/h5>
&lt;ul>
&lt;li>&lt;strong>だんご大家族（团子大家族）&lt;/strong>&lt;/li>
&lt;li>明日でいいから（明天也没关系）&lt;/li>
&lt;li>ne！ne！ne！（呐！呐！呐！）&lt;/li>
&lt;/ul>
&lt;hr></description></item><item><title>【日记】闲鱼垃圾佬的一天</title><link>https://agou-ops.top/post/%E6%97%A5%E8%AE%B0%E9%97%B2%E9%B1%BC%E5%9E%83%E5%9C%BE%E4%BD%AC%E7%9A%84%E4%B8%80%E5%A4%A9/</link><pubDate>Mon, 14 Sep 2020 20:36:21 +0800</pubDate><guid>https://agou-ops.top/post/%E6%97%A5%E8%AE%B0%E9%97%B2%E9%B1%BC%E5%9E%83%E5%9C%BE%E4%BD%AC%E7%9A%84%E4%B8%80%E5%A4%A9/</guid><description>&lt;h2 id="购置背景">购置背景&lt;/h2>
&lt;p>　　长达两个多月的菏泽实习结束了，感觉如释重负，终于摆脱了实习带来的困扰和限制，心情也不由地变好了起来。在返校的火车上，闲着没事刷了刷闲鱼，看了看自己这段时间以来卖出的虚拟商品（代搭建博客/代下载GitHub资源等），大概赚了&lt;code>1k&lt;/code>块钱左右吧，呃&amp;hellip;还是蛮不错的。&lt;/p>
&lt;p>&lt;img src="http://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/xianyu_1/Screenshot%20from%202020-09-14%2021-04-11.png" alt="">&lt;/p>
&lt;p>　　然后不经意之间就看到我上上学期买到的&lt;code>蜗牛星际B款双千&lt;/code>（矿难无情人有情），想起来机子还在宿舍桌子上，大半年没动过了，估计已经吃灰了。正当我犹豫是挂闲鱼转手再卖出去时（能小赚一笔），我看到了二手的笔记本拆机屏幕，萌发起重振蜗牛星际的想法，又想了想实习也赚了点小钱，&lt;strong>搞！&lt;/strong>。询问了一圈之后，最终买下了这款型号为&lt;code>友达(AUO)-B101EW05 V1(AUO51D4)&lt;/code>的拆机屏，大小是&lt;code>10.1寸&lt;/code>，最高分辨率为&lt;code>1280*800&lt;/code>，参数如下图所示：&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/xianyu_1/2ce6e2ceee2668b8034a05108ebfc531.jpg" alt="参数图">&lt;/p>
&lt;blockquote>
&lt;h4 id="有人会问为啥非要买一个二手拆机屏呢其实根本没人问这一切都是博主自己幻想出来的">有人会问为啥非要买一个二手拆机屏呢？（&lt;del>其实根本没人问，这一切都是博主自己幻想出来的&lt;/del>）&lt;/h4>
&lt;p>&lt;strong>理由如下：&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>手上没有现成的显示屏，之前全是借隔壁宿舍的显示屏来用的;&lt;/li>
&lt;li>笔记本显示屏驱动部件嵌在主板上，无法直接使用;&lt;/li>
&lt;li>可以作为笔记本拓展屏，一箭双雕;&lt;/li>
&lt;li>最后一点也是最最重要的一点，&lt;strong>穷穷穷&lt;/strong>，没钱买拓展屏，只能自己买破烂凑一个。&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="其他硬件设备购置">其他硬件设备购置&lt;/h2>
&lt;h3 id="驱动板">驱动板&lt;/h3>
&lt;p>　　光有显示屏还不行，还需要驱动板才能正常使用，不得不说闲鱼和淘宝是万能的，什么东西都能够买到，在苦苦寻找和对比了一番之后，最终找到了一个淘宝卖家（店铺链接：https：//m.tb.cn/h.VBYebL1?sm=6c9ebe ），销量和口碑都还不错，把显示屏型号发给卖家后，卖家制作完当天晚上就发货了，真是迅速啊，点个赞👍。&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/xianyu_1/Screenshot%20from%202020-09-14%2021-07-31.png" alt="">&lt;/p>
&lt;h3 id="msata">mSATA&lt;/h3>
&lt;p>　　蜗牛星际原装自带的&lt;code>mSATA&lt;/code>是&lt;code>16g&lt;/code>的，只够装个&lt;code>pve&lt;/code>、&lt;code>VMware ESXi&lt;/code>、&lt;code>iKuai&lt;/code>、&lt;code>openwrt&lt;/code>、&lt;code>群晖&lt;/code>啥的，根本不够用的，然后嘞，自己又想安装个&lt;code>Windows Server 2008 R2&lt;/code>挂一些软件，所以就下狠心来又买了一条&lt;code>128g&lt;/code>的渣士顿&lt;code>mSATA&lt;/code>固态硬盘，也是闲鱼买的，大概&lt;code>100软妹币&lt;/code>，&lt;code>MLC&lt;/code>颗粒的，还是蛮值的。&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/xianyu_1/Screenshot%20from%202020-09-14%2021-07-03.png" alt="">&lt;/p>
&lt;p>&lt;code>CrystalDiskMark&lt;/code>跑分如下图所示：&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/xianyu_1/%E9%87%91%E5%A3%AB%E9%A1%BFmSATA-128g2020-09-13.png" alt="">&lt;/p>
&lt;p>　　这样一来，拆蜗牛星际多出来的那块&lt;code>mSATA 16g&lt;/code>岂不是吃灰了？&lt;strong>不，垃圾佬不会就此止步，不会。&lt;/strong>&lt;/p>
&lt;p>所以就有了下面这个设备😆。&lt;/p>
&lt;h3 id="usb30-to-msata-box">USB3.0 TO mSATA Box&lt;/h3>
&lt;p>　　这小东西功能很简单，就是把&lt;code>mSATA&lt;/code>接口转为&lt;code>USB&lt;/code>接口，以便直接插在电脑上直接使用。实体图如下所示：&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>还是蛮好看的，不错，不错。&lt;/p>
&lt;h3 id="hdmi-线--亚克力壳">HDMI 线 &amp;amp; 亚克力壳&lt;/h3>
&lt;p>　　主要设备买完之后，突然发现还缺一条&lt;code>HDMI&lt;/code>线，回宿舍找了找没找到原来那根，于是&lt;code>10块钱&lt;/code>在闲鱼又买了条绿联&lt;code>0.75m&lt;/code>的&lt;code>HDMI&lt;/code>线，黄色扁线型的。&lt;/p>
&lt;p>亚克力壳子是买驱动板时加价&lt;code>10块&lt;/code>买的，用来保护驱动板各元件和增加观赏性用的。&lt;/p>
&lt;h2 id="成果展示-附全家福">成果展示-附全家福&lt;/h2>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/xianyu_1/IMG_20200914_143028.jpg" alt="">&lt;/p>
&lt;p>桌面图：&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/xianyu_1/1600085743650.jpg" alt="">&lt;/p>
&lt;h2 id="未来用途">未来用途&lt;/h2>
&lt;p>　　以后有空的话会专门写一篇文章来介绍蜗牛星际的用途，敬请期待吧！&lt;/p>
&lt;h2 id="参考资料">参考资料&lt;/h2>
&lt;ul>
&lt;li>【装机日常】废旧笔记本不要扔，拆下屏幕，裹上驱动板，做成副屏，隔壁小孩都馋哭啦！： &lt;a href="https%EF%BC%9A//www.youtube.com/watch?v=V1wC3KKF2TM">https：//www.youtube.com/watch?v=V1wC3KKF2TM&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>搭建内网yum源</title><link>https://agou-ops.top/post/%E6%90%AD%E5%BB%BA%E5%86%85%E7%BD%91yum%E6%BA%90/</link><pubDate>Tue, 04 Aug 2020 10:23:39 +0800</pubDate><guid>https://agou-ops.top/post/%E6%90%AD%E5%BB%BA%E5%86%85%E7%BD%91yum%E6%BA%90/</guid><description>&lt;blockquote>
&lt;p>搭建内网yum源，摆脱软件包困扰。&lt;/p>
&lt;/blockquote>
&lt;h2 id="选择合适稳定的公网yum仓库">选择合适稳定的公网yum仓库&lt;/h2>
&lt;p>建议选择对运营商网络友好的yum仓库&lt;/p>
&lt;p>国内可供选择的有:&lt;/p>
&lt;ul>
&lt;li>阿里云：http://mirrors.aliyun.com/ (这里我使用阿里云)&lt;/li>
&lt;li>网易：http://mirrors.163.com/&lt;/li>
&lt;/ul>
&lt;p>更多国内镜像仓库参考：https://blog.csdn.net/wyqwilliam/article/details/90581159&lt;/p>
&lt;h2 id="安装nginx并修改配置文件">安装nginx并修改配置文件&lt;/h2>
&lt;p>为了方便起见，我这里使用yum仓库进行安装.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@centos-7 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># yum install nginx -y&lt;/span>
&lt;span class="o">[&lt;/span>root@centos-7 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># vi /etc/nginx/conf.d/default.conf&lt;/span>
&lt;span class="c1"># -----在server段添加以下内容&lt;/span>
&lt;span class="c1"># 自动在index.html的索引打开&lt;/span>
autoindex on&lt;span class="p">;&lt;/span>
&lt;span class="c1"># 如果有文件则显示文件大小&lt;/span>
autoindex_exact_size on&lt;span class="p">;&lt;/span>
&lt;span class="c1"># 显示更改时间，以当前系统时间为准&lt;/span>
autoindex_localtime on
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>具体位置在下面这个位置
&lt;img src="https://s1.ax1x.com/2020/03/18/8wx7Ax.png" alt="内网yum源搭建-1">
启动nginx，使用&lt;code>service nignx start &lt;/code>即可&lt;/p>
&lt;h2 id="创建自定义indexhtml文件">创建自定义index.html文件&lt;/h2>
&lt;p>修改默认&lt;code>index.html&lt;/code>为以下内容：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span> &lt;span class="na">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;font-weight:bolder;color:green;font-size:30px;&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>ALL of the packages in the below:&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">/&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;http://192.168.1.128/CentOS-YUM/Aliyun&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Aliyun&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">/&amp;gt;&lt;/span>
These packagers from of CentOS ISO.&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">/&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;http://192.168.1.128/CentOS7-aliyun&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>CentOS&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">/&amp;gt;&lt;/span>
These packagers from of &amp;#34;Internet service provider&amp;#34;.&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">/&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span> &lt;span class="na">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;font-weight:bolder;color:red;font-size:18px;&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Please replace the file and fill in the following content:&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span> &lt;span class="na">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;font-weight:bolder;color:blue;font-size:15px;&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Way: /etc/yum.repos.d/CentOS-Base.repo&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在站点目录中创建&lt;code>CentOS-YUM/Aliyun&lt;/code>（本地ISO文件仓库）和&lt;code>CentOS7-aliyun&lt;/code>目录&lt;/p>
&lt;h2 id="添加并同步阿里云yum源">添加并同步阿里云yum源&lt;/h2>
&lt;p>添加阿里云CentOS7 yum源&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># 注意备份原仓库源&lt;/span>
curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>同步阿里云CentOS7 yum源到之前创建好的目录当中，使用命令&lt;code>reposync -p /usr/share/nginx/html/CentOS7-aliyun&lt;/code>
接着，使用&lt;code>createrepo -p /usr/share/nginx/html/CentOS7-aliyun&lt;/code>来创建repodata文件&lt;/p>
&lt;h2 id="客户端配置">客户端配置&lt;/h2>
&lt;p>使用以下命令为客户端添加内网仓库地址&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">yum-config-manager --add-repo&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;http://192.168.1.128/CentOS7-aliyun/base/Packages&amp;#34;&lt;/span>
yum makecache &lt;span class="c1"># 更新缓存&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="在yum仓库服务器端创建定时任务">在yum仓库服务器端创建定时任务&lt;/h2>
&lt;p>新建shell更新脚本&lt;code>update-aliyun.sh&lt;/code>，内容如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;span class="cp">&lt;/span>/usr/bin/reposync -np /usr/share/nginx/html/CentOS7-aliyun
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用&lt;code>chmod +x update-aliyun.sh&lt;/code>为其添加执行权限
添加定时任务(每5min执行一次)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="m">5&lt;/span> * * * * root run-parts /root/update-aliyun.sh
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>其中&lt;/strong>&lt;code>run-parts&lt;/code>的意思是执行后面目录中的脚本。&lt;/p></description></item><item><title>Git Hook介绍与使用</title><link>https://agou-ops.top/post/git-hook%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/</link><pubDate>Tue, 04 Aug 2020 10:23:38 +0800</pubDate><guid>https://agou-ops.top/post/git-hook%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/</guid><description>&lt;p>Git 钩子和其它版本控制系统一样，Git 能在特定的重要动作发生时触发自定义脚本。&lt;/p>
&lt;p>有两组这样的钩子：客户端的和服务器端的。 客户端钩子由诸如提交和合并这样的操作所调用，而服务器端钩子作用于诸如接收被推送的提交这样的联网操作。 你可以随心所欲地运用这些钩子。&lt;/p>
&lt;h2 id="安装钩子">安装钩子&lt;/h2>
&lt;p>钩子都被存储在 Git 目录下的 hooks 子目录中。 也即绝大部分项目中的 &lt;code>.git/hooks&lt;/code> 。 当你用 &lt;code>git init&lt;/code> 初始化一个新版本库时，Git 默认会在这个目录中放置一些示例脚本。 这些脚本除了本身可以被调用外，它们还透露了被触发时所传入的参数。 所有的示例都是 shell 脚本，其中一些还混杂了 Perl 代码，不过，任何正确命名的可执行脚本都可以正常使用 —— 你可以用 Ruby 或 Python，或任何你熟悉的语言编写它们。 这些示例的名字都是以 &lt;code>.sample&lt;/code> 结尾，如果你想启用它们，得先移除这个后缀。
把一个正确命名（不带扩展名）且可执行的文件放入 &lt;code>.git&lt;/code> 目录下的 hooks 子目录中，即可激活该钩子脚本。 这样一来，它就能被 Git 调用。&lt;/p>
&lt;p>创建一个空的仓库：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">git --bare init &lt;span class="c1"># 推荐使用&lt;/span>
&lt;span class="c1"># git init&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其中&lt;code>--bare&lt;/code>参数表示创建一个裸仓库，裸仓库何意？与普通空仓库有有什么区别？参考：https://www.cnblogs.com/irockcode/p/8761954.html
&lt;strong>但是需要注意的一点的是&lt;/strong>git仓库和git裸仓库的钩子所在位置不同:&lt;/p>
&lt;ul>
&lt;li>git普通仓库钩子在.git/hooks/中&lt;/li>
&lt;li>git裸仓库钩子在hooks/中&lt;/li>
&lt;/ul>
&lt;p>裸仓库初始化完成后，在&lt;code>hooks&lt;/code>文件夹中会发现一些以&lt;code>.sample&lt;/code>结尾的实例文件：
&lt;img src="https://s1.ax1x.com/2020/03/17/8aldFU.png" alt="githook1">&lt;/p>
&lt;h2 id="客户端钩子简单示例">客户端钩子简单示例&lt;/h2>
&lt;p>使用&lt;code>commit-msg&lt;/code>钩子实现commit信息字符数限制（实际可能没什么卵用,仅作为学习参考）&lt;/p>
&lt;ol>
&lt;li>编辑&lt;code>.git/hooks/commit-msg&lt;/code>文件如下：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">➜ git-hook-test git:&lt;span class="o">(&lt;/span>master&lt;span class="o">)&lt;/span> ✗ cat .git/hooks/commit-msg 20:55:37
&lt;span class="c1">#!/bin/sh&lt;/span>
&lt;span class="nv">MSG&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>awk &lt;span class="s1">&amp;#39;{printf(&amp;#34;%s&amp;#34;,$0)}&amp;#39;&lt;/span> &lt;span class="nv">$1&lt;/span>&lt;span class="sb">`&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="si">${#&lt;/span>&lt;span class="nv">MSG&lt;/span>&lt;span class="si">}&lt;/span> -lt &lt;span class="m">5&lt;/span> &lt;span class="o">]&lt;/span>
&lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------------------------------------------------------&amp;#34;&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;commit message 只有&lt;/span>&lt;span class="si">${#&lt;/span>&lt;span class="nv">MSG&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">字符，不符合要求&amp;#34;&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;message的长度不能小于5, 本次提交失败，请完善commit message，再提交&amp;#34;&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------------------------------------------------------&amp;#34;&lt;/span>
&lt;span class="nb">exit&lt;/span> &lt;span class="m">1&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>为&lt;code>commit-msg&lt;/code>文件添加执行权限：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">chmod u+x .git/hooks/commit-msg
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>生成一次提交信息：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">➜ git-hook-test git:&lt;span class="o">(&lt;/span>master&lt;span class="o">)&lt;/span> ✗ git add . 21:00:48
➜ git-hook-test git:&lt;span class="o">(&lt;/span>master&lt;span class="o">)&lt;/span> ✗ git commit -m &lt;span class="s2">&amp;#34;test&amp;#34;&lt;/span>
-------------------------------------------------------------------
commit message 只有4字符
message的长度不能小于5, 本次提交失败，请完善commit message，再提交
-------------------------------------------------------------------
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>不满足最低5字符要求，提交失败。&lt;/p>
&lt;h2 id="服务端钩子简单示例">服务端钩子简单示例&lt;/h2>
&lt;p>使用&lt;code>post-receive&lt;/code>将代码自动部署到服务器&lt;/p>
&lt;p>流程大致如下：在服务器端创建一个 Git 仓库(repository)，然后将本地的文件使用&lt;code>git push&lt;/code>上传到这个仓库后，将上传到Git 仓库的文件，自动复制到服务器里网站目录文件夹下。&lt;/p>
&lt;ol>
&lt;li>在服务器端初始化一个空的Git仓库&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">git init --bare myblog.git
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>在&lt;code>hooks&lt;/code>目录中创建&lt;code>post-receive&lt;/code>文件，并给予执行权限&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">cd&lt;/span> hooks/
touch post-receive&lt;span class="p">;&lt;/span>chmod u+x post-receive
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>编辑&lt;code>post-receive&lt;/code>文件内容如下：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@localhost hooks&lt;span class="o">]&lt;/span>&lt;span class="c1"># cat post-receive&lt;/span>
&lt;span class="c1">#!/bin/bash -l&lt;/span>
&lt;span class="nv">GIT_REPO&lt;/span>&lt;span class="o">=&lt;/span>/root/myblog.git
&lt;span class="nv">TMP_GIT_CLONE&lt;/span>&lt;span class="o">=&lt;/span>/tmp/myblog
&lt;span class="nv">PUBLIC_WWW&lt;/span>&lt;span class="o">=&lt;/span>/var/www/html
rm -rf &lt;span class="si">${&lt;/span>&lt;span class="nv">TMP_GIT_CLONE&lt;/span>&lt;span class="si">}&lt;/span>
git clone &lt;span class="nv">$GIT_REPO&lt;/span> &lt;span class="nv">$TMP_GIT_CLONE&lt;/span>
&lt;span class="nb">cd&lt;/span> &lt;span class="nv">$TMP_GIT_CLONE&lt;/span>
rm -rf &lt;span class="si">${&lt;/span>&lt;span class="nv">PUBLIC_WWW&lt;/span>&lt;span class="si">}&lt;/span>/*
cp -rf &lt;span class="si">${&lt;/span>&lt;span class="nv">TMP_GIT_CLONE&lt;/span>&lt;span class="si">}&lt;/span>/* &lt;span class="si">${&lt;/span>&lt;span class="nv">PUBLIC_WWW&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="4">
&lt;li>本地添加远程Git仓库并进行测试&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">➜ &lt;span class="nb">test&lt;/span> git:&lt;span class="o">(&lt;/span>master&lt;span class="o">)&lt;/span> ✗ git remote add deploy ssh://root@172.16.224.128:/root/myblog.git 21:20:35
➜ &lt;span class="nb">test&lt;/span> git:&lt;span class="o">(&lt;/span>master&lt;span class="o">)&lt;/span> ✗ git add . 21:20:52
➜ &lt;span class="nb">test&lt;/span> git:&lt;span class="o">(&lt;/span>master&lt;span class="o">)&lt;/span> ✗ git commit -m &lt;span class="s2">&amp;#34;auto deploy test&amp;#34;&lt;/span> 21:21:01
&lt;span class="o">[&lt;/span>master &lt;span class="o">(&lt;/span>root-commit&lt;span class="o">)&lt;/span> 26fde86&lt;span class="o">]&lt;/span> auto deploy &lt;span class="nb">test&lt;/span>
&lt;span class="m">2&lt;/span> files changed, &lt;span class="m">1&lt;/span> insertion&lt;span class="o">(&lt;/span>+&lt;span class="o">)&lt;/span>
create mode &lt;span class="m">100644&lt;/span> index.html
create mode &lt;span class="m">100644&lt;/span> testfile
➜ &lt;span class="nb">test&lt;/span> git:&lt;span class="o">(&lt;/span>master&lt;span class="o">)&lt;/span> git push --set-upstream deploy master 21:28:19
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在git服务器端查看&lt;code>post-receive&lt;/code>是否成功运行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@localhost ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># cd /var/www/html/&lt;/span>
&lt;span class="o">[&lt;/span>root@localhost html&lt;span class="o">]&lt;/span>&lt;span class="c1"># ls&lt;/span>
index.html testfile
&lt;span class="o">[&lt;/span>root@localhost html&lt;span class="o">]&lt;/span>&lt;span class="c1"># cat index.html&lt;/span>
auto deploy
auto deploy
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="5">
&lt;li>将代码推送指定分支：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="cp">#!/bin/bash -l
&lt;/span>&lt;span class="cp">&lt;/span>&lt;span class="k">while&lt;/span> &lt;span class="nb">read&lt;/span> oldrev newrev ref
&lt;span class="k">do&lt;/span>
&lt;span class="nv">branch&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$ref&lt;/span> &lt;span class="p">|&lt;/span> cut -d/ -f3&lt;span class="sb">`&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;master&amp;#34;&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$branch&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;production&amp;#34;&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$branch&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nv">GIT_REPO&lt;/span>&lt;span class="o">=&lt;/span>/root/myblog.git
&lt;span class="nv">TMP_GIT_CLONE&lt;/span>&lt;span class="o">=&lt;/span>/tmp/myblog
&lt;span class="nv">PUBLIC_WWW&lt;/span>&lt;span class="o">=&lt;/span>/var/www/html
rm -rf &lt;span class="si">${&lt;/span>&lt;span class="nv">TMP_GIT_CLONE&lt;/span>&lt;span class="si">}&lt;/span>
git clone &lt;span class="nv">$GIT_REPO&lt;/span> &lt;span class="nv">$TMP_GIT_CLONE&lt;/span>
&lt;span class="nb">cd&lt;/span> &lt;span class="nv">$TMP_GIT_CLONE&lt;/span>
&lt;span class="nb">unset&lt;/span> GIT_DIR
git checkout &lt;span class="nv">$branch&lt;/span>
rm -rf &lt;span class="si">${&lt;/span>&lt;span class="nv">PUBLIC_WWW&lt;/span>&lt;span class="si">}&lt;/span>/*
cp -rf &lt;span class="si">${&lt;/span>&lt;span class="nv">TMP_GIT_CLONE&lt;/span>&lt;span class="si">}&lt;/span>/* &lt;span class="si">${&lt;/span>&lt;span class="nv">PUBLIC_WWW&lt;/span>&lt;span class="si">}&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>更多钩子参考：https://git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E9%92%A9%E5%AD%90&lt;/p>
&lt;h2 id="参考链接">参考链接&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://www.ituring.com.cn/article/206985">git钩子-图灵社区&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://devslash.net/easy-git-hooks-with-python/">git hooks with python&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.jianshu.com/p/ccd135180783">commit-msg实用示例&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Hexo博客使用gulp压缩静态资源 1</title><link>https://agou-ops.top/post/hexo%E5%8D%9A%E5%AE%A2%E4%BD%BF%E7%94%A8gulp%E5%8E%8B%E7%BC%A9%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90-1/</link><pubDate>Tue, 04 Aug 2020 10:23:38 +0800</pubDate><guid>https://agou-ops.top/post/hexo%E5%8D%9A%E5%AE%A2%E4%BD%BF%E7%94%A8gulp%E5%8E%8B%E7%BC%A9%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90-1/</guid><description>&lt;p>gulp 将开发流程中让人痛苦或耗时的任务自动化，从而减少你所浪费的时间、创造更大价值。&lt;/p>
&lt;p>官方站点：https://www.gulpjs.com.cn/&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h3 id="1全局安装gulp">1、全局安装gulp&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">npm install gulp -g
# 查看版本
gulp -v
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="2安装gulp插件">2、安装gulp插件&lt;/h3>
&lt;p>在站点根目录下安装&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">npm install gulp --save
npm install gulp-minify-css --save
npm install gulp-uglify --save
npm install gulp-htmlmin --save
npm install gulp-htmlclean --save
npm install gulp-imagemin --save
# 解决【Gulp打包问题】 GulpUglifyError: unable to minify JavaScript
# 解决 gulp-uglify 压缩JavaScript 不兼容 es5 语法的问题
npm install babel-core@6.26.3 --save
npm install gulp-babel@7.0.1 --save
npm install babel-preset-es2015@6.24.1 --save
# gulp-babel 取消严格模式方法(&amp;#34;use strict&amp;#34;)
npm install babel-plugin-transform-remove-strict-mode --save
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>问题：如果安装&lt;code>gulp-imagemin&lt;/code>错误请执行以下语句
&lt;code>sudo npm i gulp-imagemin --unsafe-perms&lt;/code>&lt;/p>
&lt;h3 id="3创建gulpfilejs文件">3、创建&lt;code>gulpfile.js&lt;/code>文件&lt;/h3>
&lt;p>在 Hexo 站点下新建&lt;code>gulpfile.js&lt;/code>文件，文件内容如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">var gulp = require(&amp;#39;gulp&amp;#39;);
var minifycss = require(&amp;#39;gulp-minify-css&amp;#39;);
var uglify = require(&amp;#39;gulp-uglify&amp;#39;);
var htmlmin = require(&amp;#39;gulp-htmlmin&amp;#39;);
var htmlclean = require(&amp;#39;gulp-htmlclean&amp;#39;);
var imagemin = require(&amp;#39;gulp-imagemin&amp;#39;);
var babel = require(&amp;#39;gulp-babel&amp;#39;);
// 压缩css文件
gulp.task(&amp;#39;minify-css&amp;#39;, function (done) {
return gulp.src(&amp;#39;./public/**/*.css&amp;#39;)
.pipe(minifycss())
.pipe(gulp.dest(&amp;#39;./public&amp;#39;));
done();
});
// 压缩html文件
gulp.task(&amp;#39;minify-html&amp;#39;, function (done) {
return gulp.src(&amp;#39;./public/**/*.html&amp;#39;)
.pipe(htmlclean())
.pipe(htmlmin({
removeComments: true,
minifyJS: true,
minifyCSS: true,
minifyURLs: true,
}))
.pipe(gulp.dest(&amp;#39;./public&amp;#39;));
done();
});
// 压缩js文件
gulp.task(&amp;#39;minify-js&amp;#39;, function (done) {
return gulp.src([&amp;#39;./public/**/*.js&amp;#39;, &amp;#39;!./public/**/*.min.js&amp;#39;])
.pipe(babel({
//将ES6代码转译为可执行的JS代码
presets: [&amp;#39;es2015&amp;#39;] // es5检查机制
}))
.pipe(uglify())
.pipe(gulp.dest(&amp;#39;./public&amp;#39;));
done();
});
// 压缩 public/images 目录内图片(Version&amp;lt;3)
// gulp.task(&amp;#39;minify-images&amp;#39;, function () {
// gulp.src(&amp;#39;./public/images/**/*.*&amp;#39;)
// .pipe(imagemin({
// optimizationLevel: 5, //类型：Number 默认：3 取值范围：0-7（优化等级）
// progressive: true, //类型：Boolean 默认：false 无损压缩jpg图片
// interlaced: false, //类型：Boolean 默认：false 隔行扫描gif进行渲染
// multipass: false, //类型：Boolean 默认：false 多次优化svg直到完全优化
// }))
// .pipe(gulp.dest(&amp;#39;./public/images&amp;#39;));
// });
// 压缩 public/images 目录内图片(Version&amp;gt;3)
gulp.task(&amp;#39;minify-images&amp;#39;, function (done) {
gulp.src(&amp;#39;./public/images/**/*.*&amp;#39;)
.pipe(imagemin([
imagemin.gifsicle({interlaced: true}),
imagemin.jpegtran({progressive: true}),
imagemin.optipng({optimizationLevel: 5}),
imagemin.svgo({
plugins: [
{removeViewBox: true},
{cleanupIDs: false}
]
})
]))
.pipe(gulp.dest(&amp;#39;./public/images&amp;#39;));
done();
});
//4.0以前的写法
//gulp.task(&amp;#39;default&amp;#39;, [
// &amp;#39;minify-html&amp;#39;, &amp;#39;minify-css&amp;#39;, &amp;#39;minify-js&amp;#39;, &amp;#39;minify-images&amp;#39;
//]);
//4.0以后的写法
// 执行 gulp 命令时执行的任务
gulp.task(&amp;#39;default&amp;#39;, gulp.series(gulp.parallel(&amp;#39;minify-html&amp;#39;, &amp;#39;minify-css&amp;#39;, &amp;#39;minify-js&amp;#39;, &amp;#39;minify-images&amp;#39;)), function () {
console.log(&amp;#34;----------gulp Finished----------&amp;#34;);
// Do something after a, b, and c are finished.
});
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="4创建babelrc文件">4、创建&lt;code>.babelrc&lt;/code>文件&lt;/h3>
&lt;p>在 Hexo 站点下新建&lt;code>.babelrc&lt;/code>文件，文件内容如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">{
&amp;#39;presets&amp;#39;: [&amp;#39;es2015&amp;#39;],
&amp;#34;plugins&amp;#34;: [&amp;#34;transform-remove-strict-mode&amp;#34;]
}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="5启用静态资源压缩">5、启用静态资源压缩&lt;/h3>
&lt;p>推荐姿势：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">hexo cl &amp;amp;&amp;amp; hexo g &amp;amp;&amp;amp; gulp &amp;amp;&amp;amp; hexo d
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可在&lt;code>package.json&lt;/code> 中的 &lt;code>&amp;quot;scripts&amp;quot;&lt;/code> 项增加一个 &lt;code>&amp;quot;publish&amp;quot;&lt;/code> 命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">{
//...
&amp;#34;scripts&amp;#34;: {
//...
&amp;#34;publish&amp;#34;: &amp;#34;hexo cl &amp;amp;&amp;amp; hexo g &amp;amp;&amp;amp; gulp &amp;amp;&amp;amp; hexo d&amp;#34;,
//...
}
//...
}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>使用GitHub Actions将文件push到OSS</title><link>https://agou-ops.top/post/%E4%BD%BF%E7%94%A8github-actions%E5%B0%86%E6%96%87%E4%BB%B6push%E5%88%B0oss/</link><pubDate>Tue, 04 Aug 2020 10:23:38 +0800</pubDate><guid>https://agou-ops.top/post/%E4%BD%BF%E7%94%A8github-actions%E5%B0%86%E6%96%87%E4%BB%B6push%E5%88%B0oss/</guid><description>&lt;p>阿里云对象存储服务（Object Storage Service，简称OSS）为您提供基于网络的数据存取服务。使用OSS，您可以通过网络随时存储和调用包括文本、图片、音频和视频等在内的各种非结构化数据文件。&lt;/p>
&lt;p>官方帮助文档：https://help.aliyun.com/document_detail/31883.html&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;ol>
&lt;li>首先打开所要使用&lt;code>Github Actions&lt;/code>的仓库，点击&lt;code>Actions&lt;/code>，并创建一个新的&lt;code>workflow&lt;/code>
&lt;img src="https://s2.ax1x.com/2020/03/08/3zlpwD.png" alt="3zlpwD.png">
此时，github将会自动在仓库中创建一个名为&lt;code>.github/workflows&lt;/code>的文件夹。
&lt;img src="https://s2.ax1x.com/2020/03/08/3zlN0U.png" alt="3zlN0U.png">&lt;/li>
&lt;li>编辑配置文件&lt;code>oss.yml&lt;/code>,输入以下内容&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>MainWorkflow&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>push&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">runs-on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>ubuntu-latest&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>actions/checkout@v1&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>actions/setup-node@v1&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">node-version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;12.x&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>Build&lt;span class="w"> &lt;/span>Blog&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="sd">|
&lt;/span>&lt;span class="sd"> npm install&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>npm&lt;span class="w"> &lt;/span>install&lt;span class="w"> &lt;/span>-g&lt;span class="w"> &lt;/span>hexo-cli&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>hexo&lt;span class="w"> &lt;/span>generate&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>manyuanrong/setup-ossutil@v1&lt;span class="m">.0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># endpoint 可以去oss控制台上查看&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">endpoint&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;oss-cn-hangzhou.aliyuncs.com&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 使用我们之前配置在secrets里面的accesskeys来配置ossutil&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">access-key-id&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>${{&lt;span class="w"> &lt;/span>secrets.ACCESS_KEY_ID&lt;span class="w"> &lt;/span>}}&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">access-key-secret&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>${{&lt;span class="w"> &lt;/span>secrets.ACCESS_KEY_SECRET&lt;span class="w"> &lt;/span>}}&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>Deply&lt;span class="w"> &lt;/span>To&lt;span class="w"> &lt;/span>OSS&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>ossutil&lt;span class="w"> &lt;/span>cp&lt;span class="w"> &lt;/span>public&lt;span class="w"> &lt;/span>oss&lt;span class="p">:&lt;/span>//agou-ops/&lt;span class="w"> &lt;/span>-rf&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其中，&lt;code>secrets.ACCESS_KEY_ID&lt;/code>和&lt;code>secrets.ACCESS_KEY_SECRET&lt;/code>属于github的专用秘钥，比较隐私的变量可以放置在此处，具体位置在Settings&amp;gt;Secrets
&lt;img src="https://s2.ax1x.com/2020/03/08/3zlx9s.png" alt="3zlx9s.png">
3. 提交&lt;code>commit&lt;/code>，github会自动进行部署，点击&lt;code>Actions&lt;/code>可以查看部署的详细状态&lt;/p>
&lt;h2 id="参考链接">参考链接&lt;/h2>
&lt;blockquote>
&lt;p>&lt;a href="http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html">Github Actions入门教程&lt;/a>,阮一峰
&lt;a href="https://help.github.com/en/categories/automating-your-workflow-with-github-actions">GitHub Pages 官方文档&lt;/a>
&lt;a href="https://lukeboyle.com/blog-posts/2019/08/github-actions-for-web-apps/">Github Actions for web apps&lt;/a>, Luke Boyle
&lt;a href="https://medium.com/@adam.zolyak/my-first-week-with-github-actions-5d92de4c4851">My First Week With GitHub Actions&lt;/a>, Adam Zolyak&lt;/p>
&lt;/blockquote></description></item><item><title>编写shell帮助信息通用小技巧</title><link>https://agou-ops.top/post/%E7%BC%96%E5%86%99shell%E5%B8%AE%E5%8A%A9%E6%96%87%E6%A1%A3/</link><pubDate>Tue, 14 Jul 2020 11:00:31 +0800</pubDate><guid>https://agou-ops.top/post/%E7%BC%96%E5%86%99shell%E5%B8%AE%E5%8A%A9%E6%96%87%E6%A1%A3/</guid><description>&lt;p>废话少说， 直接上脚本：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;span class="cp">&lt;/span>&lt;span class="c1">###&lt;/span>
&lt;span class="c1">### Some shell version or description here.&lt;/span>
&lt;span class="c1">###&lt;/span>
&lt;span class="c1">### Usage:&lt;/span>
&lt;span class="c1">### test &amp;lt;input&amp;gt; &amp;lt;output&amp;gt;&lt;/span>
&lt;span class="c1">###&lt;/span>
&lt;span class="c1">### Options:&lt;/span>
&lt;span class="c1">### &amp;lt;input&amp;gt; Input file to read.&lt;/span>
&lt;span class="c1">### &amp;lt;output&amp;gt; Output file to write. Use &amp;#39;-&amp;#39; for stdout.&lt;/span>
&lt;span class="c1">### -h | --help Show this message.&lt;/span>
help&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
sed -rn &lt;span class="s1">&amp;#39;s/^### ?//;T;p&amp;#39;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1"># 如果用户输入“-h”或者无参数，执行help函数&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$#&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;-h&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;--help&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">help&lt;/span>
&lt;span class="nb">exit&lt;/span> &lt;span class="m">1&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>效果：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">╭─agou-ops@ideapad-15ISK ~/tmp
╰─$ bash test.sh --help
Some shell version or description here.
Usage:
&lt;span class="nb">test&lt;/span> &amp;lt;input&amp;gt; &amp;lt;output&amp;gt;
Options:
&amp;lt;input&amp;gt; Input file to read.
&amp;lt;output&amp;gt; Output file to write. Use &lt;span class="s1">&amp;#39;-&amp;#39;&lt;/span> &lt;span class="k">for&lt;/span> stdout.
-h &lt;span class="p">|&lt;/span> --help Show this message.
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Web 压测工具</title><link>https://agou-ops.top/post/web-benchmark/</link><pubDate>Tue, 14 Jul 2020 10:23:47 +0800</pubDate><guid>https://agou-ops.top/post/web-benchmark/</guid><description>&lt;h2 id="web-benchmark-tools">web benchmark tools&lt;/h2>
&lt;h3 id="apache-bench">Apache Bench&lt;/h3>
&lt;blockquote>
&lt;p>ApacheBench 是一个用来衡量http服务器性能的单线程命令行工具。原本针对Apache http服务器，但是也适用于其他http服务器。&lt;/p>
&lt;/blockquote>
&lt;p>如果你的操作系统没有&lt;code>ab&lt;/code>工具， 那么只需安装&lt;code>httpd-tools&lt;/code>(CentOS)或者&lt;code>apache-utils&lt;/code>(Ubuntu)即可。&lt;/p>
&lt;p>常用参数说明：&lt;/p>
&lt;ul>
&lt;li>-n：执行的请求次数&lt;/li>
&lt;li>-c：并发数量&lt;/li>
&lt;li>-s：响应的超时时间&lt;/li>
&lt;li>-p：post请求的数据文件路径，需要设置-T参数&lt;/li>
&lt;li>-T：Content-Type&lt;/li>
&lt;li>-C：设置cookie，格式为&amp;quot;name=zhou&amp;rdquo;&lt;/li>
&lt;/ul>
&lt;p>常用组合：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">ab -n &lt;span class="m">10000&lt;/span> -c &lt;span class="m">1000&lt;/span> http://localhost/index.html
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="wrk">wrk&lt;/h3>
&lt;blockquote>
&lt;p>wrk HTTP是一个现代的基准测试工具能产生显著的负载运行时在一个多核CPU。它结合了多线程设计可伸缩的系统如epoll和kqueue事件通知。&lt;/p>
&lt;/blockquote>
&lt;p>官方github仓库： &lt;a href="https://github.com/wg/wrk">https://github.com/wg/wrk&lt;/a>&lt;/p>
&lt;p>编译安装：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">wget https://github.com/wg/wrk/archive/4.1.0.tar.gz
tar xf 4.1.0.tar.gz
&lt;span class="nb">cd&lt;/span> 4.1.0/deps
tar xf LuaJIT-2.1.0-beta3.tar.gz -C /usr/local
tar xf openssl-1.1.0g.tar.gz -C /usr/local
&lt;span class="nb">cd&lt;/span> ..
make &lt;span class="nv">WITH_LUAJIT&lt;/span>&lt;span class="o">=&lt;/span>/usr/local/LuaJIT-2.1.0-beta3 &lt;span class="nv">WITH_OPENSSL&lt;/span>&lt;span class="o">=&lt;/span>/usr/local/openssl-1.1.0g
make install
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>常用参数说明：&lt;/p>
&lt;ul>
&lt;li>-t：线程数&lt;/li>
&lt;li>-c：http总请求数量&lt;/li>
&lt;li>-d：测试时长，e.g. 2s, 2m, 2h&lt;/li>
&lt;/ul>
&lt;p>简单使用：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">wrk -t12 -c400 -d30s http://127.0.0.1:8080/index.html
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="待续">待续。。。&lt;/h3></description></item><item><title>ECS-Linux 故障处理</title><link>https://agou-ops.top/post/ecs-linux-%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/</link><pubDate>Tue, 14 Jul 2020 09:41:39 +0800</pubDate><guid>https://agou-ops.top/post/ecs-linux-%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/</guid><description>&lt;p>&lt;strong>篇幅有限，转至 &lt;a href="https://agou-ops.top/linux_sys_fix">https://agou-ops.top/linux_sys_fix&lt;/a> 进行查看。&lt;/strong>&lt;/p></description></item><item><title>Linux 实时查看网卡流量</title><link>https://agou-ops.top/post/linux-%E5%AE%9E%E6%97%B6%E6%9F%A5%E7%9C%8B%E7%BD%91%E5%8D%A1%E6%B5%81%E9%87%8F/</link><pubDate>Sat, 11 Jul 2020 22:12:17 +0800</pubDate><guid>https://agou-ops.top/post/linux-%E5%AE%9E%E6%97%B6%E6%9F%A5%E7%9C%8B%E7%BD%91%E5%8D%A1%E6%B5%81%E9%87%8F/</guid><description>&lt;h2 id="nload工具">nload工具&lt;/h2>
&lt;p>nload用于实时查看网卡流量，默认系统都没有安装，首先安装方式如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ yum install -y epel-release
$ yum install -y nload
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用也非常简单，如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">
$ nload
Device eth0 &lt;span class="o">[&lt;/span>192.168.0.110&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>4/5&lt;span class="o">)&lt;/span>:
&lt;span class="o">===================================================================================&lt;/span>
Incoming:
Curr: 5.21 kBit/s &lt;span class="c1"># Incoming：进来的流量&lt;/span>
Avg: 4.09 kBit/s &lt;span class="c1"># Outgoing：出去的流量&lt;/span>
Min: 1.59 kBit/s &lt;span class="c1"># Curr：当前的流量值&lt;/span>
Max: 12.51 kBit/s &lt;span class="c1"># Avg：平均值的流量值&lt;/span>
Ttl: 4.16 GByte &lt;span class="c1"># Min：最小的流量值&lt;/span>
Outgoing: &lt;span class="c1"># Max：最大的流量值&lt;/span>
Curr: 16.48 kBit/s &lt;span class="c1"># Ttl：总的流量值&lt;/span>
Avg: 14.38 kBit/s
Min: 6.73 kBit/s
Max: 28.39 kBit/s
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="iftop工具">iftop工具&lt;/h2>
&lt;p>默认系统没有安装，需要安装，如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># 需要epel环境&lt;/span>
$ yum install -y epel-release
$ yum install -y iftop
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装完成之后，输入iftop便可看到如下界面&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/Others/iftop.png" alt="null">&lt;/p>
&lt;p>其中，相关参数解释如下：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>界面上面显示的是类似刻度尺的刻度范围，为显示流量图形的长条作标尺用的。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>中间的&amp;lt;= =&amp;gt;这两个左右箭头，表示的是流量的方向。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>TX：发送流量&lt;/p>
&lt;/li>
&lt;li>
&lt;p>RX：接收流量5.TOTAL：总流量6.Cumm：运行iftop到目前时间的总流量&lt;/p>
&lt;/li>
&lt;li>
&lt;p>peak：流量峰值&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>rates：分别表示过去 2s 10s 40s 的平均流量&lt;/strong>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="sar命令">sar命令&lt;/h2>
&lt;p>sar命令包含在&lt;code>sysstat&lt;/code>工具包中，提供系统的众多统计数据。其在不同的系统上命令有些差异，某些系统提供的sar支持基于网络接口的数据统计，也可以查看设备上每秒收发包的个数和流量。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># DEV显示网络接口信息&lt;/span>
&lt;span class="c1"># 命令后面1 2 意思是：每一秒钟取1次值，取2次&lt;/span>
$ sar -n DEV &lt;span class="m">1&lt;/span> &lt;span class="m">2&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>另外，-n参数很有用，他有6个不同的开关：&lt;code>DEV | EDEV | NFS | NFSD | SOCK | ALL&lt;/code> ，其代表的含义如下：&lt;/p>
&lt;ul>
&lt;li>DEV显示网络接口信息。&lt;/li>
&lt;li>EDEV显示关于网络错误的统计数据。&lt;/li>
&lt;li>NFS统计活动的NFS客户端的信息。&lt;/li>
&lt;li>NFSD统计NFS服务器的信息&lt;/li>
&lt;li>SOCK显示套接字信息&lt;/li>
&lt;li>ALL显示所有5个开关&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ sar -n DEV &lt;span class="m">1&lt;/span> &lt;span class="m">2&lt;/span>
Linux 3.10.0-514.26.2.el7.x86_64 &lt;span class="o">(&lt;/span>localhost&lt;span class="o">)&lt;/span> 08/31/2019 _x86_64_ &lt;span class="o">(&lt;/span>&lt;span class="m">1&lt;/span> CPU&lt;span class="o">)&lt;/span>
09:52:28 AM IFACE rxpck/s txpck/s rxkB/s txkB/s rxcmp/s txcmp/s rxmcst/s
09:52:29 AM eth0 2.02 1.01 0.13 0.16 0.00 0.00 0.00
09:52:29 AM lo 0.00 0.00 0.00 0.00 0.00 0.00 0.00
09:52:29 AM IFACE rxpck/s txpck/s rxkB/s txkB/s rxcmp/s txcmp/s rxmcst/s
09:52:30 AM eth0 1.02 1.02 0.07 0.23 0.00 0.00 0.00
09:52:30 AM lo 0.00 0.00 0.00 0.00 0.00 0.00 0.00
Average: IFACE rxpck/s txpck/s rxkB/s txkB/s rxcmp/s txcmp/s rxmcst/s
Average: eth0 1.52 1.02 0.10 0.19 0.00 0.00 0.00
Average: lo 0.00 0.00 0.00 0.00 0.00 0.00 0.00
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>参数说明：&lt;/p>
&lt;ul>
&lt;li>IFACE：LAN接口&lt;/li>
&lt;li>rxpck/s：每秒钟接收的数据包&lt;/li>
&lt;li>txpck/s：每秒钟发送的数据包&lt;/li>
&lt;li>rxbyt/s：每秒钟接收的字节数&lt;/li>
&lt;li>txbyt/s：每秒钟发送的字节数&lt;/li>
&lt;li>rxcmp/s：每秒钟接收的压缩数据包&lt;/li>
&lt;li>txcmp/s：每秒钟发送的压缩数据包&lt;/li>
&lt;li>rxmcst/s：每秒钟接收的多播数据包&lt;/li>
&lt;li>rxerr/s：每秒钟接收的坏数据包&lt;/li>
&lt;li>txerr/s：每秒钟发送的坏数据包&lt;/li>
&lt;li>coll/s：每秒冲突数&lt;/li>
&lt;li>rxdrop/s：因为缓冲充满，每秒钟丢弃的已接收数据包数&lt;/li>
&lt;li>txdrop/s：因为缓冲充满，每秒钟丢弃的已发送数据包数&lt;/li>
&lt;li>txcarr/s：发送数据包时，每秒载波错误数&lt;/li>
&lt;li>rxfram/s：每秒接收数据包的帧对齐错误数&lt;/li>
&lt;li>rxfifo/s：接收的数据包每秒FIFO过速的错误数&lt;/li>
&lt;li>txfifo/s：发送的数据包每秒FIFO过速的错误数&lt;/li>
&lt;/ul>
&lt;p>这种方式简单，直观，推荐使用。&lt;/p>
&lt;h2 id="cat-procnetdev">cat /proc/net/dev&lt;/h2>
&lt;p>Linux 内核提供了一种通过 /proc 文件系统，在运行时访问内核内部数据结构、改变内核设置的机制。proc文件系统是一个伪文件系统，它只存在内存当中，而不占用外存空间。它以文件系统的方式为访问系统内核数据的操作提供接口。用户和应用程序可以通过proc得到系统的信息，并可以改变内核的某些参数。由于系统的信息，如进程，是动态改变的，所以用户或应用程序读取proc文件时，proc文件系统是动态从系统内核读出所需信息并提交的。/proc文件系统中包含了很多目录，其中/proc/net/dev 保存了网络适配器及统计信息。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@agou ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> cat /proc/net/dev
Inter-&lt;span class="p">|&lt;/span> Receive &lt;span class="p">|&lt;/span> Transmit
face &lt;span class="p">|&lt;/span>bytes packets errs drop fifo frame compressed multicast&lt;span class="p">|&lt;/span>bytes packets errs drop fifo colls carrier compressed
ens32: &lt;span class="m">11196722&lt;/span> &lt;span class="m">21042&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">4605085&lt;/span> &lt;span class="m">14465&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span>
lo: &lt;span class="m">1934784&lt;/span> &lt;span class="m">7162&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">1934784&lt;/span> &lt;span class="m">7162&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback"> 说明：
最左边的表示接口的名字，Receive表示收包，Transmit表示发送包；
bytes表示收发的字节数；
packets表示收发正确的包量；
errs表示收发错误的包量；
drop表示收发丢弃的包量；
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其实，我们平时经常用的很多查看网卡实时流量的命令，都是通过读取该目录下的实时流量，并通过简单计算得到的。&lt;/p>
&lt;h2 id="实时监控脚本1">实时监控脚本1&lt;/h2>
&lt;p>ifconfig可以查看的是从连上网开始的流量总和，cat /proc/net/dev记录的值也是总流量，那么可以计算一下，实时流量=当前流量-上一秒的流量。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@localhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> cat network.sh
&lt;span class="c1"># 传入网卡参数&lt;/span>
&lt;span class="nv">ethn&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$1&lt;/span>
&lt;span class="k">while&lt;/span> &lt;span class="nb">true&lt;/span>
&lt;span class="k">do&lt;/span>
&lt;span class="nv">RX_pre&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>cat /proc/net/dev &lt;span class="p">|&lt;/span> grep &lt;span class="nv">$ethn&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;s/:/ /g&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $2}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;span class="nv">TX_pre&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>cat /proc/net/dev &lt;span class="p">|&lt;/span> grep &lt;span class="nv">$ethn&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;s/:/ /g&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $10}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
sleep &lt;span class="m">1&lt;/span>
&lt;span class="nv">RX_next&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>cat /proc/net/dev &lt;span class="p">|&lt;/span> grep &lt;span class="nv">$ethn&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;s/:/ /g&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $2}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;span class="nv">TX_next&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>cat /proc/net/dev &lt;span class="p">|&lt;/span> grep &lt;span class="nv">$ethn&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;s/:/ /g&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $10}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
clear
&lt;span class="c1"># echo -e激活转义符&lt;/span>
&lt;span class="c1"># 输出时间的标题&lt;/span>
&lt;span class="nb">echo&lt;/span> -e &lt;span class="s2">&amp;#34;t RX `date +%k:%M:%S` TX&amp;#34;&lt;/span>
&lt;span class="nv">RX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$((&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">RX_next&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">RX_pre&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="k">))&lt;/span>
&lt;span class="nv">TX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$((&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">TX_next&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">TX_pre&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="k">))&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$RX&lt;/span> -lt &lt;span class="m">1024&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="k">then&lt;/span>
&lt;span class="nv">RX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">RX&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">B/s&amp;#34;&lt;/span>
&lt;span class="k">elif&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$RX&lt;/span> -gt &lt;span class="m">1048576&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="k">then&lt;/span>
&lt;span class="nv">RX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$RX&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $1/1048576 &amp;#34;MB/s&amp;#34;}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;span class="k">else&lt;/span>
&lt;span class="nv">RX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$RX&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $1/1024 &amp;#34;KB/s&amp;#34;}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$TX&lt;/span> -lt &lt;span class="m">1024&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="k">then&lt;/span>
&lt;span class="nv">TX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">TX&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">B/s&amp;#34;&lt;/span>
&lt;span class="k">elif&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$TX&lt;/span> -gt &lt;span class="m">1048576&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="k">then&lt;/span>
&lt;span class="nv">TX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$TX&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $1/1048576 &amp;#34;MB/s&amp;#34;}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;span class="k">else&lt;/span>
&lt;span class="nv">TX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$TX&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $1/1024 &amp;#34;KB/s&amp;#34;}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;span class="c1"># 输出流量&lt;/span>
&lt;span class="nb">echo&lt;/span> -e &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$ethn&lt;/span>&lt;span class="s2"> t &lt;/span>&lt;span class="nv">$RX&lt;/span>&lt;span class="s2"> &lt;/span>&lt;span class="nv">$TX&lt;/span>&lt;span class="s2"> &amp;#34;&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>执行结果如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@localhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> ./network.sh eth0
RX 20:23:38 TX
eth0 66B/s 0B/s
RX 20:23:39 TX
eth0 132B/s 0B/s
RX 20:23:40 TX
eth0 186B/s 194B/s
RX 20:23:41 TX
eth0 240B/s 194B/s
RX 20:23:42 TX
eth0 132B/s 0B/s
RX 20:23:43 TX
eth0 240B/s 194B/s
RX 20:23:44 TX
eth0 396B/s 4.19727KB/s
RX 20:23:45 TX
eth0 276B/s 178B/s
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="实时监控脚本2">实时监控脚本2&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ cat network_flow.sh
&lt;span class="c1"># 监控实时网卡流量&lt;/span>
&lt;span class="c1"># $1 接收所传第一个参数 即要监控的网卡&lt;/span>
&lt;span class="nv">NIC&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$1&lt;/span>
&lt;span class="c1"># echo -e &amp;#34;traffic in --- traffic out&amp;#34;&lt;/span>
&lt;span class="k">while&lt;/span> true&lt;span class="p">;&lt;/span>&lt;span class="k">do&lt;/span>
&lt;span class="c1"># $0 命令输出结果 ~ 匹配模式&lt;/span>
&lt;span class="nv">OLD_IN&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>awk &lt;span class="s1">&amp;#39;$0~&amp;#34;&amp;#39;&lt;/span>&lt;span class="nv">$NIC&lt;/span>&lt;span class="s1">&amp;#39;&amp;#34;{print $2}&amp;#39;&lt;/span> /proc/net/dev&lt;span class="sb">`&lt;/span>
&lt;span class="nv">OLD_OUT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>awk &lt;span class="s1">&amp;#39;$0~&amp;#34;&amp;#39;&lt;/span>&lt;span class="nv">$NIC&lt;/span>&lt;span class="s1">&amp;#39;&amp;#34;{print $10}&amp;#39;&lt;/span> /proc/net/dev&lt;span class="sb">`&lt;/span>
sleep &lt;span class="m">1&lt;/span>
&lt;span class="nv">NEW_IN&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>awk &lt;span class="s1">&amp;#39;$0~&amp;#34;&amp;#39;&lt;/span>&lt;span class="nv">$NIC&lt;/span>&lt;span class="s1">&amp;#39;&amp;#34;{print $2}&amp;#39;&lt;/span> /proc/net/dev&lt;span class="sb">`&lt;/span>
&lt;span class="nv">NEW_OUT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>awk &lt;span class="s1">&amp;#39;$0~&amp;#34;&amp;#39;&lt;/span>&lt;span class="nv">$NIC&lt;/span>&lt;span class="s1">&amp;#39;&amp;#34;{print $10}&amp;#39;&lt;/span> /proc/net/dev&lt;span class="sb">`&lt;/span>
clear
&lt;span class="c1"># printf不换行 %s占位符&lt;/span>
&lt;span class="nv">IN&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">printf&lt;/span> &lt;span class="s2">&amp;#34;%.1f%s&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$((&lt;/span>&lt;span class="nv">$NEW_IN&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">$OLD_IN&lt;/span>&lt;span class="k">))&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;B/s&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;span class="nv">OUT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">printf&lt;/span> &lt;span class="s2">&amp;#34;%.1f%s&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$((&lt;/span>&lt;span class="nv">$NEW_OUT&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">$OLD_OUT&lt;/span>&lt;span class="k">))&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;B/s&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34; traffic in `date +%k:%M:%S` traffic out &amp;#34;&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$NIC&lt;/span>&lt;span class="s2"> &lt;/span>&lt;span class="nv">$IN&lt;/span>&lt;span class="s2"> &lt;/span>&lt;span class="nv">$OUT&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>执行结果如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ ./network_flow.sh eth0
traffic in 11:15:02 traffic out
eth0 732.0B/s 948.0B/s
traffic in 11:15:03 traffic out
eth0 132.0B/s 0.0B/s
traffic in 11:15:04 traffic out
eth0 132.0B/s 0.0B/s
traffic in 11:15:05 traffic out
eth0 132.0B/s 0.0B/s
traffic in 11:15:06 traffic out
eth0 186.0B/s 242.0B/s
traffic in 11:15:07 traffic out
eth0 132.0B/s 0.0B/s
traffic in 11:15:08 traffic out
eth0 132.0B/s 0.0B/s
traffic in 11:15:09 traffic out
eth0 132.0B/s 0.0B/s
traffic in 11:15:10 traffic out
eth0 240.0B/s 242.0B/s
traffic in 11:15:11 traffic out
eth0 132.0B/s 0.0B/s
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>该文章内容收集于网络。&lt;/p>
&lt;/blockquote></description></item><item><title>Linux 系统封装</title><link>https://agou-ops.top/post/linux-%E7%B3%BB%E7%BB%9F%E5%B0%81%E8%A3%85/</link><pubDate>Fri, 10 Jul 2020 21:16:31 +0800</pubDate><guid>https://agou-ops.top/post/linux-%E7%B3%BB%E7%BB%9F%E5%B0%81%E8%A3%85/</guid><description>&lt;h2 id="mondo-rescue">Mondo Rescue&lt;/h2>
&lt;p>Mondo Rescue（简称 Mondo）：是一款开源免费的故障恢复和备份工具，可以说是 Linux 操作系统下的 Ghost ，你可以轻松地创建系统（Linux 或 Windows）克隆或备份的 ISO 镜像，可以将这些镜像存放在 CD、DVD、磁带、USB 设备、硬盘和 NFS 上。&lt;/p>
&lt;p>官方站点:http://www.mondorescue.org/&lt;/p>
&lt;h3 id="安装-mondo">安装 mondo&lt;/h3>
&lt;p>从&lt;a href="http://mondo.mirror.pclark.com/ftp/pub/mondorescue/">官方指定的仓库&lt;/a>下载&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">wget http://mondo.mirror.pclark.com/ftp/pub/mondorescue/centos/7/x86_64/mondorescue.repo -O /etc/yum.repos.d/mondorescue.repo
yum install -y mondo
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>或者直接安装&lt;code>rpm&lt;/code>包:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">yum install -y http://mondo.mirror.pclark.com/ftp/pub/mondorescue/centos/7/x86_64/mondo-3.3.0-1.centos7.x86_64.rpm
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用该方法安装可能会缺少依赖包文件,在这里手动解决依赖关系即可(太多了,说着玩的,还是推荐用在线仓库安装吧&amp;hellip;):&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">yum install -y http://ftp.mondorescue.org/centos/7/x86_64/afio-2.5-1.centos7.x86_64.rpm
yum install -y http://ftp.mondorescue.org/centos/7/x86_64/mindi-3.3.0-1.centos7.x86_64.rpm
yum install -y http://ftp.mondorescue.org/centos/7/x86_64/buffer-1.19-8.centos7.x86_64.rpm
...
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="制作光盘镜像">制作光盘镜像&lt;/h3>
&lt;p>安装完毕后，在终端下输入&lt;code>mondoarchive&lt;/code>，即可进入图形安装界面。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">mondoarchive
See /var/log/mondoarchive.log &lt;span class="k">for&lt;/span> details of backup run.
Checking sanity of your Linux distribution
.......
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>随后,按照引导一步步设置即可.&lt;/p>
&lt;h2 id="remastersys">Remastersys&lt;/h2>
&lt;p>Remastersys 可以将你安装的 Ubuntu、Debian 及其衍生版打包成一个可以用来安装的 Live CD/DVD 的 ISO 镜像文件，可打包一个包含个人数据的 ISO 镜像文件作为操作系统备份，也可以打包一个不包含个人数据的 ISO 镜像文件发布给其他人安装。&lt;/p>
&lt;h3 id="remastersys-包下载">&lt;strong>Remastersys 包下载&lt;/strong>&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">$ mkdir tools
$ cd tools/
$ wget ftp://ftp.gwdg.de/pub/linux/easyvdr/mirror/remastersys/ubuntu/remastersys/remastersys_3.0.4-2_all.deb
$ wget ftp://ftp.gwdg.de/pub/linux/easyvdr/mirror/remastersys/ubuntu/remastersys-gui/remastersys-gui_3.0.4-1_amd64.deb
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="安装-remastersys-依赖">&lt;strong>安装 Remastersys 依赖&lt;/strong>&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">$ sudo apt-get install syslinux-utils isolinux squashfs-tools casper libdebian-installer4 ubiquity-frontend-debconf user-setup discover xresprobe systemd
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="安装-remastersys-gui-依赖">&lt;strong>安装 Remastersys-gui 依赖&lt;/strong>&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">$ sudo apt-get install libvte-common libvte9 plymouth-x11
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="开始安装-remastersys">&lt;strong>开始安装 Remastersys&lt;/strong>&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">$ cd tools/
$ sudo dpkg -i remastersys_3.0.4-2_all.deb
$ sudo dpkg -i remastersys-gui_3.0.4-1_amd64.deb
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>Remastersys 备份操作系统&lt;/strong>&lt;/p>
&lt;p>&lt;strong>命令行模式：&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="n">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">remastersys&lt;/span> &lt;span class="n">backup&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>图形化模式：&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="n">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">remastersys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gui&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Apache HTTPD使用Let's Encrypt</title><link>https://agou-ops.top/post/apache-httpd%E4%BD%BF%E7%94%A8lets-encrypt/</link><pubDate>Fri, 10 Jul 2020 21:15:22 +0800</pubDate><guid>https://agou-ops.top/post/apache-httpd%E4%BD%BF%E7%94%A8lets-encrypt/</guid><description>&lt;h2 id="apache-httpd使用lets-encrypt实现安全连接https">&lt;code>Apache HTTPD&lt;/code>使用&lt;code>Let's Encrypt&lt;/code>实现安全连接(https)&lt;/h2>
&lt;p>安装&lt;code>cerbot&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">yum update -y
yum install -y cerbot
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>生成高安全性的&lt;code>DH&lt;/code>秘钥到&lt;code>/etc/ssl/certs/&lt;/code>目录当中去:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo openssl dhparam -out /etc/ssl/certs/dhparam.pem &lt;span class="m">2048&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>运行以下命令创建目录, 并使它可写为Apache服务器:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo mkdir -p /var/lib/letsencrypt/.well-known
sudo chgrp www-data /var/lib/letsencrypt
sudo chmod g+s /var/lib/letsencrypt
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>为了避免复制代码和配置更易于维护, 创建以下两个配置代码片段:&lt;/p>
&lt;ul>
&lt;li>编辑&lt;code>/etc/apache2/conf-available/letsencrypt.conf&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">Alias /.well-known/acme-challenge/ &lt;span class="s2">&amp;#34;/var/lib/letsencrypt/.well-known/acme-challenge/&amp;#34;&lt;/span>
&amp;lt;Directory &lt;span class="s2">&amp;#34;/var/lib/letsencrypt/&amp;#34;&lt;/span>&amp;gt;
AllowOverride None
Options MultiViews Indexes SymLinksIfOwnerMatch IncludesNoExec
Require method GET POST OPTIONS
&amp;lt;/Directory&amp;gt;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>编辑&lt;code>/etc/apache2/conf-available/ssl-params.conf&lt;/code>:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1
SSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384
SSLHonorCipherOrder off
SSLSessionTickets off
SSLUseStapling On
SSLStaplingCache &lt;span class="s2">&amp;#34;shmcb:logs/ssl_stapling(32768)&amp;#34;&lt;/span>
SSLOpenSSLConfCmd DHParameters &lt;span class="s2">&amp;#34;/etc/ssl/certs/dhparam.pem&amp;#34;&lt;/span>
Header always &lt;span class="nb">set&lt;/span> Strict-Transport-Security &lt;span class="s2">&amp;#34;max-age=63072000&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>进行启用配置文件之前, 确保&lt;code>mod_ssl &lt;/code>和&lt;code>mod_headers&lt;/code>已经被启用:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo a2enmod ssl
sudo a2enmod headers
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后, 启用&lt;code>SSL&lt;/code>配置文件, 运行以下命令即可:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo a2enconf letsencrypt
sudo a2enconf ssl-params
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>启用&lt;code>HTTP/2&lt;/code>模块:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo a2enmod http2
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>重启&lt;code>httpd&lt;/code>让配置生效:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">systemctl restart httpd
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>现在，我们可以使用&lt;code>webroot&lt;/code>插件运行&lt;code>Certbot&lt;/code>工具并获取SSL证书文件：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo certbot certonly --agree-tos --email agou-ops@foxmail.com --webroot -w /var/lib/letsencrypt/ -d agou-ops.top -d www.agou-ops.top
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果输出以下信息, 则表已经成功申请到&lt;code>SSL&lt;/code>证书文件:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">IMPORTANT NOTES:
- Congratulations! Your certificate and chain have been saved at:
/etc/letsencrypt/live/agou-ops.top/fullchain.pem
Your key file has been saved at:
/etc/letsencrypt/live/agou-ops.top/privkey.pem
Your cert will expire on 2020-10-06. To obtain a new or tweaked
version of this certificate in the future, simply run certbot
again. To non-interactively renew *all* of your certificates, run
&lt;span class="s2">&amp;#34;certbot renew&amp;#34;&lt;/span>
- Your account credentials have been saved in your Certbot
configuration directory at /etc/letsencrypt. You should make a
secure backup of this folder now. This configuration directory will
also contain certificates and private keys obtained by Certbot so
making regular backups of this folder is ideal.
- If you like Certbot, please consider supporting our work by:
Donating to ISRG / Let&lt;span class="err">&amp;#39;&lt;/span>s Encrypt: https://letsencrypt.org/donate
Donating to EFF: https://eff.org/donate-le
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="配置虚拟主机">配置虚拟主机&lt;/h2>
&lt;p>创建一个虚拟主机&lt;code>conf.d/agou-ops-top.conf&lt;/code>(仅为示例):&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&amp;lt;VirtualHost *:80&amp;gt;
ServerName mail.agou-ops.top
Redirect permanent / https://mail.agou-ops.top/
&amp;lt;/VirtualHost&amp;gt;
&amp;lt;VirtualHost *:443&amp;gt;
ServerName mail.agou-ops.top
Protocols h2 http:/1.1
&amp;lt;If &lt;span class="s2">&amp;#34;%{HTTP_HOST} == &amp;#39;www.mail.agou-ops.top&amp;#39;&amp;#34;&lt;/span>&amp;gt;
Redirect permanent / https://mail.agou-ops.top/
&amp;lt;/If&amp;gt;
DocumentRoot /var/www/mail.agou-ops.top/public_html
ErrorLog &lt;span class="si">${&lt;/span>&lt;span class="nv">APACHE_LOG_DIR&lt;/span>&lt;span class="si">}&lt;/span>/mail.agou-ops.top-error.log
CustomLog &lt;span class="si">${&lt;/span>&lt;span class="nv">APACHE_LOG_DIR&lt;/span>&lt;span class="si">}&lt;/span>/mail.agou-ops.top-access.log combined
SSLEngine On
SSLCertificateFile /etc/letsencrypt/live/mail.agou-ops.top/fullchain.pem
SSLCertificateKeyFile /etc/letsencrypt/live/mail.agou-ops.top/privkey.pem
&lt;span class="c1"># Other Apache Configuration&lt;/span>
&amp;lt;/VirtualHost&amp;gt;
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>重载&lt;code>httpd&lt;/code>使虚拟主机配置生效:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">systemctl reload httpd
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>现在, 就可以通过&lt;code>https&lt;/code>访问你的站点了: &lt;a href="https://agou-ops.top">https://agou-ops.top&lt;/a>&lt;/p>
&lt;h2 id="自动更新lets-encrypt证书">自动更新Let’s Encrypt证书&lt;/h2>
&lt;p>&lt;code>Let’s Encrypt&lt;/code>的证书有效期为90天, 自动更新证书到期前,certbot包创建一个计划, 一天两次, 并自动更新任何证书到期前30天.&lt;/p>
&lt;p>解决方法, 添加定时任务, &lt;code>/etc/cron.d/cerbot&lt;/code>, 内容如下所示:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="m">0&lt;/span> */12 * * * root &lt;span class="nb">test&lt;/span> -x /usr/bin/certbot -a &lt;span class="se">\!&lt;/span> -d /run/systemd/system &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> perl -e &lt;span class="s1">&amp;#39;sleep int(rand(3600))&amp;#39;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> certbot -q renew --renew-hook &lt;span class="s2">&amp;#34;systemctl reload apache2&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>测试更新, 使用&lt;code>certbot&lt;/code>的干跑模式进行测试:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">sudo certbot renew --dry-run
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="参考链接">参考链接&lt;/h2>
&lt;ul>
&lt;li>SSL lab: &lt;a href="https://www.ssllabs.com/">https://www.ssllabs.com/&lt;/a>&lt;/li>
&lt;li>Let&amp;rsquo;s Encrypt: &lt;a href="https://letsencrypt.org/">https://letsencrypt.org/&lt;/a>&lt;/li>
&lt;/ul>
&lt;!-- raw HTML omitted --></description></item><item><title>【日记】果然大学生都是廉价劳动力吗？可恶！</title><link>https://agou-ops.top/post/%E6%97%A5%E8%AE%B0%E6%9E%9C%E7%84%B6%E5%A4%A7%E5%AD%A6%E7%94%9F%E9%83%BD%E6%98%AF%E5%BB%89%E4%BB%B7%E5%8A%B3%E5%8A%A8%E5%8A%9B%E5%90%97%E5%8F%AF%E6%81%B6/</link><pubDate>Sun, 28 Jun 2020 22:14:03 +0800</pubDate><guid>https://agou-ops.top/post/%E6%97%A5%E8%AE%B0%E6%9E%9C%E7%84%B6%E5%A4%A7%E5%AD%A6%E7%94%9F%E9%83%BD%E6%98%AF%E5%BB%89%E4%BB%B7%E5%8A%B3%E5%8A%A8%E5%8A%9B%E5%90%97%E5%8F%AF%E6%81%B6/</guid><description>&lt;p>​ &lt;code>2020年06月28日&lt;/code>，端午“三天小短假”已经过去了，按常理说应当放假，哪怕一天也好，但我们没有放假，一行五人还是像往常一样出外业，经理呢也完全没有任何表示，当然我也不奢望有何表示，毕竟这个东西看个人，对我来说也就无所谓了。 可今天是周日，又让我们出外业了，早上七点就把我们叫起来（其实八点半才上班），等了一个多小时才出发。&lt;/p>
&lt;p>欸，这时候可能就有小伙伴要问了，为什么周日也要上班呢？没有休息的的时间么，这里引用经理的一些话，大概意思是：&lt;/p>
&lt;blockquote>
&lt;p>项目比较“紧张”，休息的话视情况而言，比如说项目有可能进度快，不到周末就会休息，有时候呢项目“紧张”，也就不休息了。&lt;/p>
&lt;/blockquote>
&lt;p>​ 嘿嘿，翻译过来就是，除非外面下大雨或者考试与工作时间冲突才会放假休息，否则就别想了，哦，说不定心情好会给放半天假。&lt;/p>
&lt;p>&lt;img src="https://s1.ax1x.com/2020/06/28/NR65Pf.jpg" alt="" title="嘿嘿">&lt;/p>
&lt;hr>
&lt;p>​ 你也别跟我说来实习就是来锻炼自己的吃苦精神的，那都是放狗臭屁，至少对于我个人而言，不需要。 要不是为了那点学分，学校又强制要求来实习（虽然表面没直接说），扪心自问，谁又会闲着没事来实习呢？这里我可能言重了，但对于我或者我这类人来说，是这样的，毕竟我/我们的志向不在于此，对于以后要混这碗饭的人来说，实习“或许”是个好选择，为什么用“或许”这个词呢，因为决定性因素太多，学校，指导老师，还有项目经理等等。。。&lt;/p>
&lt;hr>
&lt;p>​ 是啊，他们都能坚持七天无休上班更何况我们这些小青年呢？能这么单纯想的也真是天真烂漫，是的，我们实习生一天在外面到处跑一天加上餐费（算上补贴）工资才六十块左右，和他们一天二三百块，三四百块相比。。。 &lt;strong>啊，果然大学生是廉价劳动力，可恶！&lt;/strong> 要是我有这工资，不说和他们一样工资待遇，有一半，就算早上七点开始工作到晚上九点半十点下班我也愿意，迫真，哈哈。&lt;/p>
&lt;hr>
&lt;p>​ 另外呢，我现在十分讨厌别人拿他那一辈的艰辛和难处“教导/开导”我们这些后辈，那时候确实很难，这是毋庸置疑的，我也十分感激前辈们的努力和付出，这才有了当今这样美好的社会。 也许初中高中前辈们的这些话能感染到我们，但现在长大了，有些道理不言而喻，不知不觉之间也开始厌恶这些话，甚至麻痹，对于这些，我只想说，时代变了，每一代人都有每一代人的烦恼和艰辛之处，或许不是身体上的，但精神和身心上的烦恼与伤害，我觉得要比身体上的严重百倍不止！&lt;/p>
&lt;hr>
&lt;p>​ 这里又扯远了，进入正题。⏭⏭&lt;/p>
&lt;p>&lt;em>&lt;strong>上面这些都不是今天真正让我愤懑写下这篇博客的原因&lt;/strong>&lt;/em>，不止我一人给他说过28号下午&lt;code>1:30-3:00&lt;/code>考VR，并且需要提前至少半小时来准备考试。&lt;/p>
&lt;p>​ 可是呢，中午十一点半下班了还没见到他人，开车也不知道去哪办些重要的业务了，果然大学生就是大学生，可能我们是一些无所谓的人吧，过了十分钟，也就是十一点四十左右，我让和我一起实习的同班同学打电话给他，哈哈，真是没想到，打过去，这边响了两声，那边直接给挂了！我敲，我还以为在路上呢，快要到了才没接电话，结果呢，又过了十几二十分钟吧，大概十一点五十多，他打电话给另外一个和我们一起实习的女生，说不过来了，让我们打车回去，？？？！！！真是个小机灵鬼呢&amp;hellip;个屁。 我们在郊区又在一个位置比较靠大路远的一个村里，能打到车，我估计考试都考完了，随后，果然，在滴滴上等了十分钟没见个车影。 最后，这里要十分感谢马岭岗村里的那个书记大哥把我俩送回去，还有一同实习的那个女生帮我们说清楚原因让大哥带我们回去考试，真是十分感谢。&lt;/p>
&lt;hr>
&lt;p>以上都只是我的个人观点，想扯淡的话，可以在下方评论区和我一起交流交流这方面的一些东西。&lt;/p>
&lt;p>在此，最后一次向万恶的资本主义低头。&lt;/p>
&lt;p>&lt;img src="https://s1.ax1x.com/2020/06/28/NR6IG8.jpg" alt="">&lt;/p></description></item><item><title>【日记】马岭岗村实习</title><link>https://agou-ops.top/post/%E6%97%A5%E8%AE%B0%E9%A9%AC%E5%B2%AD%E5%B2%97%E6%9D%91%E5%AE%9E%E4%B9%A0/</link><pubDate>Thu, 25 Jun 2020 20:44:20 +0800</pubDate><guid>https://agou-ops.top/post/%E6%97%A5%E8%AE%B0%E9%A9%AC%E5%B2%AD%E5%B2%97%E6%9D%91%E5%AE%9E%E4%B9%A0/</guid><description>&lt;p>苦逼的实习已经进行到第三天，天气一天比一天热，不过值得高兴的是，不用再一一进户对所有房屋进行测量了，减少了了不少的工作量，因为昨天下午已经用&lt;code>RTK&lt;/code>测量好了控制点，那些无数木遮挡的建筑物就可以直接用无人机进行测量了。无需人工再测量。&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/daily/IMG_20200624_170305.jpg" alt="测量ing" title="测量ing">&lt;/p>
&lt;p>另外呢，这里的村民十分的热心好客，天气炎热，给我们切西瓜和冰棍吃，哈哈，我们三人吃了一路（当然没这么夸张），真是不错呢。&lt;/p>
&lt;p>另附一张村民家里遇到的山羊兄弟：&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/daily/IMG_20200625_165318.jpg" alt="山羊兄弟" title="山羊兄弟">&lt;/p>
&lt;p>啊，还有好多户要量，坚持坚持，也就这几天了，港巴嘚！&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/daily/IMG_20200624_093738.jpg" alt="">&lt;/p></description></item><item><title>Linux 日志分割工具-split和logrotate</title><link>https://agou-ops.top/post/linux-%E6%97%A5%E5%BF%97%E5%88%86%E5%89%B2%E5%B7%A5%E5%85%B7/</link><pubDate>Mon, 22 Jun 2020 08:45:13 +0800</pubDate><guid>https://agou-ops.top/post/linux-%E6%97%A5%E5%BF%97%E5%88%86%E5%89%B2%E5%B7%A5%E5%85%B7/</guid><description>&lt;p>本文主要介绍Linux系统下的日志分割工具，&lt;code>Split&lt;/code> 和 &lt;code>Logrotate&lt;/code>。&lt;/p>
&lt;h2 id="split">Split&lt;/h2>
&lt;p>Linux 系统自带简单日志文件分割工具。&lt;/p>
&lt;p>常用参数列表：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>选项&lt;/th>
&lt;th>含义&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>-b&lt;/td>
&lt;td>分割后的文档大小，单位是byte&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-C&lt;/td>
&lt;td>分割后的文档，单行最大byte数&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-d&lt;/td>
&lt;td>使用数字作为后缀(default: 字母)，同时使用-a length(default: 2)指定后缀长度&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-l&lt;/td>
&lt;td>分割后文档的行数&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ndash;verbose&lt;/td>
&lt;td>显示输出详细信息&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>示例：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">split -l --verbose &lt;span class="m">1000000&lt;/span> split.test -d -a &lt;span class="m">3&lt;/span> split.log
╰─$ ls
split.test split.test008 split.test017 split.test026
split.test000 split.test009 split.test018 split.test027
split.test001 split.test010 split.test019 split.test028
split.test002 split.test011 split.test020 split.test029
split.test003 split.test012 split.test021 split.test030
split.test004 split.test013 split.test022 split.test031
split.test005 split.test014 split.test023 split.test032
split.test006 split.test015 split.test024 split.test033
split.test007 split.test016 split.test025
...
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="logrotate">Logrotate&lt;/h2>
&lt;h3 id="简介及解决方案">简介及解决方案&lt;/h3>
&lt;p>Logrotate，即&lt;code>Log rotation&lt;/code>日志滚动，属于Linux系统自带工具，基于&lt;code>crontab&lt;/code>实现时间点滚动日志，计划每天运行的脚本位于 &lt;code>/etc/cron.daily/logrotate&lt;/code>。&lt;/p>
&lt;p>GitHub 地址：https://github.com/logrotate/logrotate&lt;/p>
&lt;blockquote>
&lt;p>logrotate 是怎么做到滚动日志时不影响程序正常的日志输出呢？logrotate 提供了两种解决方案。&lt;/p>
&lt;ol>
&lt;li>create&lt;/li>
&lt;li>copytruncate&lt;/li>
&lt;/ol>
&lt;h3 id="create">create&lt;/h3>
&lt;p>这也就是默认的方案，可以通过 create 命令配置文件的权限和属组设置；这个方案的思路是重命名原日志文件，创建新的日志文件。详细步骤如下：&lt;/p>
&lt;ol>
&lt;li>重命名正在输出日志文件，因为重命名只修改目录以及文件的名称，而进程操作文件使用的是 inode，所以并不影响原程序继续输出日志。&lt;/li>
&lt;li>创建新的日志文件，文件名和原日志文件一样，注意，此时只是文件名称一样，而 inode 编号不同，原程序输出的日志还是往原日志文件输出。&lt;/li>
&lt;li>最后通过某些方式通知程序，重新打开日志文件；由于重新打开日志文件会用到文件路径而非 inode 编号，所以打开的是新的日志文件。&lt;/li>
&lt;/ol>
&lt;p>如上也就是 logrotate 的默认操作方式，也就是 mv+create 执行完之后，通知应用重新在新文件写入即可。mv+create 成本都比较低，几乎是原子操作，如果应用支持重新打开日志文件，如 syslog, nginx, mysql 等，那么这是最好的方式。&lt;/p>
&lt;p>不过，有些程序并不支持这种方式，压根没有提供重新打开日志的接口；而如果重启应用程序，必然会降低可用性，为此引入了如下方式。&lt;/p>
&lt;h3 id="copytruncate">copytruncate&lt;/h3>
&lt;p>该方案是把正在输出的日志拷 (copy) 一份出来，再清空 (trucate) 原来的日志；详细步骤如下：&lt;/p>
&lt;ol>
&lt;li>将当前正在输出的日志文件复制为目标文件，此时程序仍然将日志输出到原来文件中，此时，原文件名也没有变。&lt;/li>
&lt;li>清空日志文件，原程序仍然还是输出到预案日志文件中，因为清空文件只把文件的内容删除了，而 inode 并没改变，后续日志的输出仍然写入该文件中。&lt;/li>
&lt;/ol>
&lt;p>如上所述，对于 copytruncate 也就是先复制一份文件，然后清空原有文件。&lt;/p>
&lt;p>通常来说，清空操作比较快，但是如果日志文件太大，那么复制就会比较耗时，从而可能导致部分日志丢失。不过这种方式不需要应用程序的支持即可。&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>执行文件： &lt;code>/usr/sbin/logrotate&lt;/code>&lt;/li>
&lt;li>主配置文件: &lt;code>/etc/logrotate.conf&lt;/code>&lt;/li>
&lt;li>自定义配置文件: &lt;code>/etc/logrotate.d/*.conf&lt;/code>&lt;/li>
&lt;li>执行状态文件：&lt;code>/var/lib/logrotate/logrotate.status&lt;/code>&lt;/li>
&lt;/ul>
&lt;h3 id="运行-logrotate">运行 logrotate&lt;/h3>
&lt;p>logrotate 命令格式及常用参数如下所示：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">logrotate &lt;span class="o">[&lt;/span>-dv&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-f&lt;span class="p">|&lt;/span>--force&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-s&lt;span class="p">|&lt;/span>--state file&lt;span class="o">]&lt;/span> config_file ..
-d, --debug ：debug 模式，测试配置文件是否有错误，并不会真正执行 rorate 和 compose 操作，但是会打印出整个执行的流程，和调用的脚本等详细信息。
-f, --force ：强制转储文件。
-m, --mail&lt;span class="o">=&lt;/span>&lt;span class="nb">command&lt;/span> ：压缩日志后，发送日志到指定邮箱。
-s, --state&lt;span class="o">=&lt;/span>statefile ：使用指定的状态文件。
-v, --verbose ：显示详细转储过程。
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>通常使用的方法是配合&lt;code>crontab&lt;/code>来运行：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">crontab -e
*/30 * * * * /usr/sbin/logrotate /etc/logrotate.d/rsyslog &amp;gt; /dev/null 2&amp;gt;&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="p">&amp;amp;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>手动调用 logrotate：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># 调用 /etc/lograte.d/ 下配置的所有日志&lt;/span>
logrotate /etc/logrotate.conf
&lt;span class="c1"># 要为某个特定的配置调用 logrotate&lt;/span>
logrotate -d /etc/logrotate.d/log_file &lt;span class="c1"># 开启debug模式，不实际生成日志文件。&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="配置文件详解">配置文件详解&lt;/h3>
&lt;p>这里以系统自带的部分&lt;code>/etc/logrotate.d/rsyslog&lt;/code>配置文件为例：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">/var/log/syslog
&lt;span class="o">{&lt;/span>
rotate &lt;span class="m">7&lt;/span>
daily
missingok
notifempty
delaycompress
compress
postrotate
/usr/lib/rsyslog/rsyslog-rotate
endscript
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;code>monthly&lt;/code>: 日志文件将按月轮循。其它可用值为 &lt;code>daily&lt;/code>，&lt;code>weekly&lt;/code> 或者 &lt;code>yearly&lt;/code>。&lt;/li>
&lt;li>&lt;code>rotate 5&lt;/code>: 一次将存储 5 个归档日志。对于第六个归档，时间最久的归档将被删除。&lt;/li>
&lt;li>&lt;code>compress&lt;/code>: 在轮循任务完成后，已轮循的归档将使用 &lt;code>gzip&lt;/code> 进行压缩。&lt;/li>
&lt;li>&lt;code>delaycompress&lt;/code>: 总是与 compress 选项一起用，delaycompress 选项指示 logrotate &lt;em>不要将最近的归档压缩&lt;/em>，压缩 将在下一次轮循周期进行。这在你或任何软件仍然需要读取最新归档时很有用。&lt;/li>
&lt;li>&lt;code>missingok&lt;/code>: 在日志轮循期间，任何错误将被忽略，例如 “文件无法找到” 之类的错误。&lt;/li>
&lt;li>&lt;code>notifempty&lt;/code>: 如果日志文件为空，轮循不会进行。&lt;/li>
&lt;li>&lt;code>create 644 root root&lt;/code>: 以指定的权限创建全新的日志文件，同时 logrotate 也会重命名原始日志文件。&lt;/li>
&lt;li>&lt;code>postrotate/endscript&lt;/code>: 在所有其它指令完成后，postrotate 和 endscript 里面指定的命令将被执行。在这种情况下，rsyslogd 进程将立即再次读取其配置并继续运行。&lt;/li>
&lt;/ul>
&lt;p>其他常用参数：&lt;/p>
&lt;ul>
&lt;li>&lt;code>tabooext [+] list&lt;/code>:让 logrotate 不转储指定扩展名的文件，缺省的扩展名是.rpm-orig, .rpmsave, v, 和～&lt;/li>
&lt;li>&lt;code>missingok&lt;/code>:在日志轮循期间，任何错误将被忽略，例如 “文件无法找到” 之类的错误。&lt;/li>
&lt;li>&lt;code>size size&lt;/code>:当日志文件到达指定的大小时才转储，bytes (缺省) 及 KB (sizek) 或 MB (sizem)&lt;/li>
&lt;li>&lt;code>copytruncate&lt;/code>:用于还在打开中的日志文件，把当前日志备份并截断&lt;/li>
&lt;li>&lt;code>nocopytruncate&lt;/code>: 备份日志文件但是不截断&lt;/li>
&lt;li>&lt;code>create mode owner group &lt;/code>: 转储文件，使用指定的文件模式创建新的日志文件&lt;/li>
&lt;li>&lt;code>nocreate&lt;/code>: 不建立新的日志文件&lt;/li>
&lt;li>&lt;code>nodelaycompress&lt;/code>: 覆盖 delaycompress 选项，转储同时压缩。&lt;/li>
&lt;li>&lt;code>errors address &lt;/code>: 专储时的错误信息发送到指定的 Email 地址&lt;/li>
&lt;li>&lt;code>ifempty &lt;/code>:即使是空文件也转储，这个是 logrotate 的缺省选项。&lt;/li>
&lt;li>&lt;code>mail address &lt;/code>: 把转储的日志文件发送到指定的 E-mail 地址&lt;/li>
&lt;li>&lt;code>nomail &lt;/code>: 转储时不发送日志文件&lt;/li>
&lt;li>&lt;code>olddir directory&lt;/code>:储后的日志文件放入指定的目录，必须和当前日志文件在同一个文件系统&lt;/li>
&lt;li>&lt;code>noolddir&lt;/code>: 转储后的日志文件和当前日志文件放在同一个目录下&lt;/li>
&lt;/ul>
&lt;h3 id="logrotate-日志切割轮询">logrotate 日志切割轮询&lt;/h3>
&lt;p>由于 logrotate 是基于&lt;code>cron&lt;/code>运行的，所以这个日志轮转的时间是由 cron 控制的，具体可以查询 cron 的配置文件 &lt;code>/etc/anacrontab&lt;/code>，过往的老版本的文件为（&lt;code>/etc/crontab&lt;/code>）&lt;/p>
&lt;p>使用 crontab 来作为日志轮转的触发容器来修改 logrotate 默认执行时间：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ vim /etc/crontab
&lt;span class="c1"># 切割时间为每天晚上的12点钟&lt;/span>
&lt;span class="nv">SHELL&lt;/span>&lt;span class="o">=&lt;/span>/bin/bash
&lt;span class="nv">PATH&lt;/span>&lt;span class="o">=&lt;/span>/sbin:/bin:/usr/sbin:/usr/bin
&lt;span class="nv">MAILTO&lt;/span>&lt;span class="o">=&lt;/span>root
&lt;span class="nv">HOME&lt;/span>&lt;span class="o">=&lt;/span>/
&lt;span class="c1"># run-parts&lt;/span>
&lt;span class="m">01&lt;/span> * * * * root run-parts /etc/cron.hourly
&lt;span class="m">59&lt;/span> &lt;span class="m">23&lt;/span> * * * root run-parts /etc/cron.daily
&lt;span class="m">22&lt;/span> &lt;span class="m">4&lt;/span> * * &lt;span class="m">0&lt;/span> root run-parts /etc/cron.weekly
&lt;span class="m">42&lt;/span> &lt;span class="m">4&lt;/span> &lt;span class="m">1&lt;/span> * * root run-parts /etc/cron.monthly
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="附logrotate-配置文件示例">附：logrotate 配置文件示例&lt;/h3>
&lt;ul>
&lt;li>syslog&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">[root@gop-sg-192-168-56-103 logrotate.d]# cat syslog
/var/log/cron
/var/log/maillog
/var/log/messages
/var/log/secure
/var/log/spooler
{
missingok
sharedscripts
postrotate
/bin/kill -HUP `cat /var/run/syslogd.pid 2&amp;gt; /dev/null` 2&amp;gt; /dev/null || true
endscript
}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>zabbix-agent&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">[root@gop-sg-192-168-56-103 logrotate.d]# cat zabbix-agent
/var/log/zabbix/zabbix_agentd.log {
weekly
rotate 12
compress
delaycompress
missingok
notifempty
create 0664 zabbix zabbix
}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>nginx&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">[root@gop-sg-192-168-56-103 logrotate.d]# cat nginx
/var/log/nginx/*.log /var/log/nginx/*/*.log{
daily
missingok
rotate 14
compress
delaycompress
notifempty
create 640 root adm
sharedscripts
postrotate
[ ! -f /var/run/nginx.pid ] || kill -USR1 `cat /var/run/nginx.pid`
endscript
}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>influxdb&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">[root@gop-sg-192-168-56-103 logrotate.d]# cat influxdb
/var/log/influxdb/access.log {
daily
rotate 7
missingok
dateext
copytruncate
compress
}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Linux 系统资源监控面板</title><link>https://agou-ops.top/post/linux-%E7%B3%BB%E7%BB%9F%E8%B5%84%E6%BA%90%E7%9B%91%E6%8E%A7%E9%9D%A2%E6%9D%BF/</link><pubDate>Fri, 12 Jun 2020 19:40:55 +0800</pubDate><guid>https://agou-ops.top/post/linux-%E7%B3%BB%E7%BB%9F%E8%B5%84%E6%BA%90%E7%9B%91%E6%8E%A7%E9%9D%A2%E6%9D%BF/</guid><description>&lt;p>&lt;code>WTF&lt;/code>和&lt;code>bashtop&lt;/code>是我个人目前在用的系统资源管理面板，界面非常的美观，极具极客风范，在这里我分别做简单介绍。&lt;/p>
&lt;h2 id="wtf">WTF&lt;/h2>
&lt;blockquote>
&lt;p>WTF（又名“wtfutil”）是终端的个人信息仪表板，可快速访问您非常重要但不常需要的统计信息和数据。&lt;/p>
&lt;/blockquote>
&lt;p>项目地址：&lt;a href="https://github.com/wtfutil/wtf">https://github.com/wtfutil/wtf&lt;/a>&lt;/p>
&lt;p>官方站点：&lt;a href="https://wtfutil.com/">https://wtfutil.com/&lt;/a>&lt;/p>
&lt;p>先放一张截图吧：&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/Linux%20%E7%9B%91%E6%8E%A7%E9%9D%A2%E6%9D%BF/WTF.png" alt="" title="WTF截图">&lt;/p>
&lt;p>面板中有以下展示模块：&lt;/p>
&lt;ul>
&lt;li>世界时间&lt;/li>
&lt;li>我的IP地址信息&lt;/li>
&lt;li>TODO List（待办事件）&lt;/li>
&lt;li>系统安全状态&lt;/li>
&lt;li>当前城市天气&lt;/li>
&lt;li>电源使用情况&lt;/li>
&lt;li>docker 运行状态&lt;/li>
&lt;li>资源使用情况&lt;/li>
&lt;li>硬盘占用情况&lt;/li>
&lt;li>开机时长&lt;/li>
&lt;/ul>
&lt;p>好了，废话不多说，直接开始吧。&lt;/p>
&lt;h3 id="安装与使用">安装与使用&lt;/h3>
&lt;p>首先打开项目的 &lt;a href="https://github.com/wtfutil/wtf/releases">release仓库&lt;/a> 下载可直接使用的二进制包.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">wget https://github.com/wtfutil/wtf/releases/download/v0.30.0/wtf_0.30.0_linux_amd64.tar.gz
tar xf wtf_0.30.0_linux_amd64.tar.gz
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>解压完成之后，直接运行&lt;code>./wtfutil&lt;/code>即可，为了日后方便使用，可以将该程序软连接到用户&lt;code>bin&lt;/code>目录进行使用：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">ln -sv /root/wtfutil /usr/bin/
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="配置文件">配置文件&lt;/h3>
&lt;p>下面是我的配置文件，配置文件的目录是&lt;code>$HOME/.config/wtf/config.yml&lt;/code>，可以拿来参考参考：&lt;/p>
&lt;p>ℹ️文件比较长，单击&lt;a href="#%E5%AE%98%E6%96%B9%E6%94%AF%E6%8C%81%E6%A8%A1%E5%9D%97">&amp;raquo;&amp;gt; 这里 &amp;laquo;&amp;lt;&lt;/a>可直接跳到下一节&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="k">wtf&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">colors&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">background&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>black&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">border&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">focusable&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>darkslateblue&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">focused&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>orange&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">normal&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>gray&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">checked&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>yellow&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">highlight&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">fore&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>black&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">back&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>gray&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">rows&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">even&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>yellow&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">odd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>white&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">grid&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">columns&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">40&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">35&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">35&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">55&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">rows&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">4&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">openFileUtil&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;open&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">mods&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">digitalclock&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">color&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>red&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">font&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>digitalfont&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">hourFormat&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">24&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;big clock&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;digitalclock&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">world_time&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;World Time&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>clocks&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">colors&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">rows&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">even&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;lightblue&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">odd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;white&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">locations&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">UTC&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;Etc/UTC&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">London&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;Europe/London&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Berlin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;Europe/Berlin&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">New_York&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;America/New_York&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">China&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;Asia/Shanghai&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">15&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">sort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;alphabetical&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">battery&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>power&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;⚡️&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">15&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">todolist&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>todo&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">checkedIcon&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;X&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">colors&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">checked&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>gray&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">highlight&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">fore&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;black&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">back&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;orange&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">filename&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;todo.yml&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3600&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ip&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>ipinfo&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;My IP&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">colors&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;lightblue&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">value&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;white&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">150&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">prettyweather&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">city&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;临沂&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">300&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">unit&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;m&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">view&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">language&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;en&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">security&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3600&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">docker&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>docker&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">labelColor&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>lightblue&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">resources&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>resourceusage&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">uptime&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>cmdrunner&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">cmd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;uptime&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">4&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">30&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">disks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>cmdrunner&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">cmd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;df&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;-h&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">top&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">refreshInterval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3600&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="官方支持模块">官方支持模块&lt;/h3>
&lt;details>
&lt;summary style="background-color:#f5f5f5;border:1px solid #ccc;padding:5px;">
单击以展开
&lt;/summary>
Azure DevOps
BambooHR
Buildkite
CDS
CircleCI
Clocks
CmdRunner
Crypto Currencies
Datadog
DEV (dev.to)
Digital Clock
DigitalOcean
Docker
Exchange Rates
Feed Reader
Gerrit
Git
GitHub
GitLab
Gitter
Google Apps
Hacker News
Have I Been Pwned (HIBP)
IP Addresses
Jenkins
Jira
Kubernetes
Logger
Mercurial
New Relic
OpsGenie
Pagerduty
Pi-hole
Power
Resource Usage
Rollbar
Security
Sports
Spotify
Subreddit
Textfile
Todo
Todoist
Transmission
TravisCI
Trello
Twitter
VictorOps OnCall
Weather Services
Zendesk
&lt;/details>
&lt;h2 id="bashtop">bashtop&lt;/h2>
&lt;p>官方开源仓库：&lt;a href="https://github.com/aristocratos/bashtos">https://github.com/aristocratos/bashtos&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/Linux%20%E7%9B%91%E6%8E%A7%E9%9D%A2%E6%9D%BF/bashtop.png" alt="" title="截图">&lt;/p>
&lt;p>主菜单：
&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/Linux%20%E7%9B%91%E6%8E%A7%E9%9D%A2%E6%9D%BF/bashtop-1.png" alt="" title="主菜单">&lt;/p>
&lt;p>选项菜单：
&lt;img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/Linux%20%E7%9B%91%E6%8E%A7%E9%9D%A2%E6%9D%BF/bashtop-1.png" alt="" title="选项菜单">&lt;/p>
&lt;h3 id="安装与使用-1">安装与使用&lt;/h3>
&lt;p>Add PPA repository and install bashtop&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash"> sudo add-apt-repository ppa:bashtop-monitor/bashtop
sudo apt update
sudo apt install bashtop
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装完毕之后，直接在终端运行&lt;code>bashtop&lt;/code>即可。&lt;/p>
&lt;p>&lt;strong>使用&lt;code>ESC&lt;/code>键可以呼出菜单，按下&lt;code>q&lt;/code>键退出。&lt;/strong>&lt;/p>
&lt;h3 id="配置文件-1">配置文件&lt;/h3>
&lt;p>All options changeable from within UI. Config files stored in &amp;ldquo;&lt;code>$HOME/.config/bashtop&lt;/code>&amp;rdquo; folder&lt;/p>
&lt;h4 id="bashtopcfg-auto-generated-if-not-found">bashtop.cfg: (auto generated if not found)&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1">#? Config file for bashtop v. 0.9.9&lt;/span>
&lt;span class="c1">#* Color theme, looks for a .theme file in &amp;#34;$HOME/.config/bashtop/themes&amp;#34; and &amp;#34;$HOME/.config/bashtop/user_themes&amp;#34;, &amp;#34;Default&amp;#34; for builtin default theme&lt;/span>
&lt;span class="nv">color_theme&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Default&amp;#34;&lt;/span>
&lt;span class="c1">#* Update time in milliseconds, increases automatically if set below internal loops processing time, recommended 2000 ms or above for better sample times for graphs&lt;/span>
&lt;span class="nv">update_ms&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2500&amp;#34;&lt;/span>
&lt;span class="c1">#* Processes sorting, &amp;#34;pid&amp;#34; &amp;#34;program&amp;#34; &amp;#34;arguments&amp;#34; &amp;#34;threads&amp;#34; &amp;#34;user&amp;#34; &amp;#34;memory&amp;#34; &amp;#34;cpu lazy&amp;#34; &amp;#34;cpu responsive&amp;#34; &amp;#34;tree&amp;#34;&lt;/span>
&lt;span class="c1">#* &amp;#34;cpu lazy&amp;#34; updates sorting over time, &amp;#34;cpu responsive&amp;#34; updates sorting directly at a cpu usage cost&lt;/span>
&lt;span class="nv">proc_sorting&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;cpu lazy&amp;#34;&lt;/span>
&lt;span class="c1">#* Reverse sorting order, &amp;#34;true&amp;#34; or &amp;#34;false&amp;#34;&lt;/span>
&lt;span class="nv">proc_reversed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;false&amp;#34;&lt;/span>
&lt;span class="c1">#* Check cpu temperature, only works if &amp;#34;sensors&amp;#34;, &amp;#34;vcgencmd&amp;#34; or &amp;#34;osx-cpu-temp&amp;#34; commands is available&lt;/span>
&lt;span class="nv">check_temp&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>
&lt;span class="c1">#* Draw a clock at top of screen, formatting according to strftime, empty string to disable&lt;/span>
&lt;span class="nv">draw_clock&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;%X&amp;#34;&lt;/span>
&lt;span class="c1">#* Update main ui when menus are showing, set this to false if the menus is flickering too much for comfort&lt;/span>
&lt;span class="nv">background_update&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>
&lt;span class="c1">#* Custom cpu model name, empty string to disable&lt;/span>
&lt;span class="nv">custom_cpu_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;span class="c1">#* Enable error logging to &amp;#34;$HOME/.config/bashtop/error.log&amp;#34;, &amp;#34;true&amp;#34; or &amp;#34;false&amp;#34;&lt;/span>
&lt;span class="nv">error_logging&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>
&lt;span class="c1">#* Show color gradient in process list, &amp;#34;true&amp;#34; or &amp;#34;false&amp;#34;&lt;/span>
&lt;span class="nv">proc_gradient&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>
&lt;span class="c1">#* If process cpu usage should be of the core it&amp;#39;s running on or usage of the total available cpu power&lt;/span>
&lt;span class="nv">proc_per_core&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;false&amp;#34;&lt;/span>
&lt;span class="c1">#* Optional filter for shown disks, should be names of mountpoints, &amp;#34;root&amp;#34; replaces &amp;#34;/&amp;#34;, separate multiple values with space&lt;/span>
&lt;span class="nv">disks_filter&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;span class="c1">#* Enable check for new version from github.com/aristocratos/bashtop at start&lt;/span>
&lt;span class="nv">update_check&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>
&lt;span class="c1">#* Enable graphs with double the horizontal resolution, increases cpu usage&lt;/span>
&lt;span class="nv">hires_graphs&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;false&amp;#34;&lt;/span>
&lt;span class="c1">#* Enable the use of psutil python3 module for data collection, default on OSX&lt;/span>
&lt;span class="nv">use_psutil&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Linux 生成随机数</title><link>https://agou-ops.top/post/linux%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E6%95%B0/</link><pubDate>Mon, 01 Jun 2020 10:01:51 +0800</pubDate><guid>https://agou-ops.top/post/linux%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E6%95%B0/</guid><description>&lt;p>[TOC]&lt;/p>
&lt;h2 id="通过-openssl-生成">通过 openssl 生成&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> openssl rand -base64 &lt;span class="m">3&lt;/span>
xsSp
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> openssl rand -base64 &lt;span class="m">8&lt;/span>
&lt;span class="nv">8SlHCsBAiYw&lt;/span>&lt;span class="o">=&lt;/span>
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> openssl rand -base64 &lt;span class="m">10&lt;/span>
&lt;span class="nv">nUzBw8ngKGGqWw&lt;/span>&lt;span class="o">==&lt;/span>
&lt;span class="sb">`&lt;/span>openssl rand -base64 32&lt;span class="p">|&lt;/span>tr A-Z a-z&lt;span class="p">|&lt;/span>cut -c 1-10&lt;span class="sb">`&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="使用-date-命令生成">使用 date 命令生成&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> date +%s
&lt;span class="m">1539071518&lt;/span>
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> date +%N
&lt;span class="m">801398716&lt;/span>
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> date +%s%N
&lt;span class="m">1539071555311467855&lt;/span>
&lt;span class="sb">`&lt;/span>date +%s &lt;span class="p">|&lt;/span>sha256sum &lt;span class="p">|&lt;/span>base64 &lt;span class="p">|&lt;/span>head -c &lt;span class="m">10&lt;/span> &lt;span class="p">;&lt;/span>&lt;span class="nb">echo&lt;/span>&lt;span class="sb">`&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="使用-md5sum-生成随机数">使用 md5sum 生成随机数&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">date &lt;span class="p">|&lt;/span> md5sum
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="使用-dd-命令生成随机数">使用 dd 命令生成随机数&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">dd &lt;span class="k">if&lt;/span>&lt;span class="o">=&lt;/span>/dev/urandom &lt;span class="nv">bs&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="nv">count&lt;/span>&lt;span class="o">=&lt;/span>15&lt;span class="p">|&lt;/span>base64 -w &lt;span class="m">0&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="通过devrandom设备产生uuid">通过/dev/random设备产生uuid&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> cat /proc/sys/kernel/random/uuid
a3dfb0f2-f893-4e57-9d67-184a88d4cb5d
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> cat /proc/sys/kernel/random/uuid &lt;span class="p">|&lt;/span>cut -c 1-8
b80c60d8
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="使用系统环境变量-random">使用系统环境变量 RANDOM&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$RANDOM&lt;/span>
&lt;span class="m">14535&lt;/span>
&lt;span class="c1">##说明：linux系统下的环境变量$RANDOM的取值范围是：0–32767 。&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>产生0-25范围内的数，用这个环境变量对26取余即可。&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="k">$((&lt;/span>&lt;span class="nv">$RANDOM&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="m">26&lt;/span>&lt;span class="k">))&lt;/span>
&lt;span class="m">6&lt;/span>
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="k">$((&lt;/span>RANDOM%26&lt;span class="k">))&lt;/span>
&lt;span class="m">11&lt;/span>
&lt;span class="c1">##说明：第二个表达式RANDOM前面无$符号好像也可以。&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>产生6位数的整数，用这个环境变量加上100000即可。&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="k">$((&lt;/span>&lt;span class="nv">$RANDOM&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="m">100000&lt;/span>&lt;span class="k">))&lt;/span>
&lt;span class="m">117482&lt;/span>
&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="k">$((&lt;/span>RANDOM+100000&lt;span class="k">))&lt;/span>
&lt;span class="m">126058&lt;/span>
&lt;span class="c1">##说明：第二个表达式RANDOM前面无$符号好像也可以。&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>产生加密的随机数码，将随机数管道给命令md5sum命令即可。&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$RANDOM&lt;/span> &lt;span class="p">|&lt;/span>md5sum
6ee8cd13547eb044ad13ba014573af6f -
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="4">
&lt;li>需要固定位数的随机数码，将随机数管道给命令md5sum命令再管道给cut命令即可。&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>root@myhost ~&lt;span class="o">]&lt;/span>&lt;span class="se">\#&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$RANDOM&lt;/span> &lt;span class="p">|&lt;/span>md5sum&lt;span class="p">|&lt;/span>cut -c 1-8
de3cfe23
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="使用第三方工具">使用第三方工具&lt;/h2>
&lt;ol>
&lt;li>expect 非交互式程序控制下用&lt;code>mkpasswd&lt;/code>命令：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">yum install -y expect
mkpasswd -l 7 &lt;span class="c1"># 生成七位密码包含大小写加特殊字符&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>使用&lt;code>pwgen&lt;/code>生成随机可读的密码：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">yum install pwgen
&lt;span class="c1"># 生成长度8，含有数字，含有大小写字母的密码4个，列打印&lt;/span>
pwgen -ncC &lt;span class="m">8&lt;/span> &lt;span class="m">4&lt;/span>
&lt;span class="c1"># 生成长度8，含有数字，含有小写字母，不包含歧义的密码4个，列打印&lt;/span>
pwgen -nABC &lt;span class="m">8&lt;/span> &lt;span class="m">4&lt;/span>
&lt;span class="c1"># 生成长度16，含有数字，含有大小写字母，含有特殊字符的密码8个，行打印&lt;/span>
pwgen -ncy1 &lt;span class="m">16&lt;/span> &lt;span class="m">8&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>参数说明：&lt;/p>
&lt;ul>
&lt;li>&lt;code>-c or –capitalize&lt;/code>密码中至少包含一个大写字母&lt;/li>
&lt;li>&lt;code>-A or –no-capitalize&lt;/code>密码中不包含大写字母&lt;/li>
&lt;li>&lt;code>-n or –numerals&lt;/code>密码中至少包含一个数字&lt;/li>
&lt;li>&lt;code>-0 or –no-numerals&lt;/code>密码中不包含数字&lt;/li>
&lt;li>&lt;code>-y or –symbols&lt;/code>密码中至少包含一个特殊符号&lt;/li>
&lt;li>&lt;code>-s or –secure&lt;/code>生成完全随机密码&lt;/li>
&lt;li>&lt;code>-B or –ambiguous&lt;/code>密码中不包含歧义字符（例如1,l,O,0）&lt;/li>
&lt;li>&lt;code>-H or –sha1=path/to/file[#seed]&lt;/code>使用SHA1 hash给定的文件作为一个随机种子&lt;/li>
&lt;li>&lt;code>-C&lt;/code>在列中打印生成的密码&lt;/li>
&lt;li>&lt;code>-1&lt;/code>不要在列中打印生成的密码，即一行一个密码&lt;/li>
&lt;li>&lt;code>-v or –no-vowels&lt;/code>不要使用任何元音，以避免偶然的脏话&lt;/li>
&lt;/ul>
&lt;ol start="3">
&lt;li>其他第三方工具：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-fallback" data-lang="fallback">randpw、spw、gpg、xkcdpass
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="参考链接">参考链接&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://blog.csdn.net/yuki5233/article/details/82997001">https://blog.csdn.net/yuki5233/article/details/82997001&lt;/a>&lt;/li>
&lt;/ul></description></item></channel></rss>