<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>k8s on AGou's Blog</title><link>https://agou-ops.cn/tags/k8s/</link><description>Recent content in k8s on AGou's Blog</description><generator>Hugo -- gohugo.io</generator><language>en</language><managingEditor>suofeiyaxx@gmail.com (AGou-ops)</managingEditor><webMaster>suofeiyaxx@gmail.com (AGou-ops)</webMaster><copyright>WTFPLv2</copyright><lastBuildDate>Thu, 21 Sep 2023 14:30:17 +0800</lastBuildDate><atom:link href="https://agou-ops.cn/tags/k8s/index.xml" rel="self" type="application/rss+xml"/><item><title>K8s中使用traefik（基础）</title><link>https://agou-ops.cn/post/k8s%E4%B8%AD%E4%BD%BF%E7%94%A8traefik/</link><pubDate>Thu, 21 Sep 2023 14:30:17 +0800</pubDate><author>suofeiyaxx@gmail.com (AGou-ops)</author><guid>https://agou-ops.cn/post/k8s%E4%B8%AD%E4%BD%BF%E7%94%A8traefik/</guid><description>&lt;h2 id="简介">简介&lt;/h2>
&lt;blockquote>
&lt;p>Traefik是一个为了让部署微服务更加便捷而诞生的现代HTTP反向代理、负载均衡工具。它支持多种后台 (Docker, Swarm, Kubernetes, Marathon, Mesos, Consul, Etcd, Zookeeper, BoltDB, Rest API, file…) 来自动化、动态的应用它的配置文件设置。&lt;/p>
&lt;/blockquote>
&lt;p>核心概念：
当启动Traefik时，需要定义&lt;code>entrypoints&lt;/code>，然后通过entrypoints的路由来分析传入的请求，来查看他们是否是一组规则匹配，如果匹配，则路由可能将请求通过一系列的转换过来在发送到服务上去。&lt;/p>
&lt;ul>
&lt;li>&lt;code>Providers&lt;/code>用来自动发现平台上的服务，可以是编排工具、容器引擎&lt;/li>
&lt;li>&lt;code>Entrypoints&lt;/code>监听传入的流量，是网络的入口点，定义了接受请求的端口(HTTP或者TCP)&lt;/li>
&lt;li>&lt;code>Routers&lt;/code>分析请求(host,path,headers,SSL等)，负责将传入的请求连接到可以处理这些请求的服务上去&lt;/li>
&lt;li>&lt;code>Service&lt;/code>将请求转发给应用，负责配置如何最终将处理传入请求的实际服务&lt;/li>
&lt;li>&lt;code>Middlewares&lt;/code>中间件，用来修改请求或者根据请求来做出判断，中间件被附件到路由上，是一种在请求发送到服务之前调整请求的一种方法&lt;/li>
&lt;/ul></description></item><item><title>使用cert-manager颁发自签证书</title><link>https://agou-ops.cn/post/cert-manager%E9%A2%81%E5%8F%91%E8%87%AA%E7%AD%BE%E8%AF%81%E4%B9%A6/</link><pubDate>Tue, 19 Sep 2023 14:50:30 +0800</pubDate><author>suofeiyaxx@gmail.com (AGou-ops)</author><guid>https://agou-ops.cn/post/cert-manager%E9%A2%81%E5%8F%91%E8%87%AA%E7%AD%BE%E8%AF%81%E4%B9%A6/</guid><description>&lt;h2 id="cert-manager简介">cert-manager简介&lt;/h2>
&lt;blockquote>
&lt;p>cert-manager 是一个云原生证书管理开源项目，用于在 Kubernetes 集群中自动管理和颁发来自各种颁发源的 TLS 证书，它可以从各种受支持的来源颁发证书，包括 &lt;a href="https://letsencrypt.org/">Let’s Encrypt&lt;/a>、&lt;a href="https://www.vaultproject.io/">HashiCorp Vault&lt;/a>和&lt;a href="https://www.venafi.com/">Venafi&lt;/a>以及私有 PKI，它将确保证书定期有效和更新，并在到期前的适当时间尝试更新证书。&lt;/p>
&lt;/blockquote>
&lt;h2 id="k8s集群中安装cert-manager">k8s集群中安装cert-manager&lt;/h2>
&lt;p>参考：&lt;a href="https://cert-manager.io/docs/installation/">https://cert-manager.io/docs/installation/&lt;/a>&lt;/p>
&lt;p>推荐使用helm chart进行安装：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">helm repo add jetstack https://charts.jetstack.io
helm repo update
kubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.13.0/cert-manager.crds.yaml
helm install &lt;span class="se">\
&lt;/span>&lt;span class="se">&lt;/span> cert-manager jetstack/cert-manager &lt;span class="se">\
&lt;/span>&lt;span class="se">&lt;/span> --namespace cert-manager &lt;span class="se">\
&lt;/span>&lt;span class="se">&lt;/span> --create-namespace &lt;span class="se">\
&lt;/span>&lt;span class="se">&lt;/span> --version v1.13.0 &lt;span class="se">\
&lt;/span>&lt;span class="se">&lt;/span> &lt;span class="c1"># --set installCRDs=true&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>K8s中部署Apollo配置中心</title><link>https://agou-ops.cn/post/k8s%E4%B8%AD%E9%83%A8%E7%BD%B2apollo%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83/</link><pubDate>Mon, 11 Sep 2023 14:23:18 +0800</pubDate><author>suofeiyaxx@gmail.com (AGou-ops)</author><guid>https://agou-ops.cn/post/k8s%E4%B8%AD%E9%83%A8%E7%BD%B2apollo%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83/</guid><description>&lt;h2 id="简介">简介&lt;/h2>
&lt;blockquote>
&lt;p>Apollo（阿波罗）是一款可靠的分布式配置管理中心，诞生于携程框架研发部，能够集中化管理应用不同环境、不同集群的配置，配置修改后能够实时推送到应用端，并且具备规范的权限、流程治理等特性，适用于微服务配置管理场景。&lt;/p>
&lt;p>Apollo支持4个维度管理Key-Value格式的配置：&lt;/p>
&lt;ol>
&lt;li>application (应用)&lt;/li>
&lt;li>environment (环境)&lt;/li>
&lt;li>cluster (集群)&lt;/li>
&lt;li>namespace (命名空间)&lt;/li>
&lt;/ol>
&lt;p>同时，Apollo基于开源模式开发，开源地址：https://github.com/ctripcorp/apollo&lt;/p>
&lt;/blockquote></description></item><item><title>Debian12二进制安装k8s v1.25.12</title><link>https://agou-ops.cn/post/k8s-debian12%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85/</link><pubDate>Sun, 27 Aug 2023 10:33:38 +0800</pubDate><author>suofeiyaxx@gmail.com (AGou-ops)</author><guid>https://agou-ops.cn/post/k8s-debian12%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85/</guid><description>&lt;p>篇幅过长，为了更好的阅读体验可以前往&lt;a href="https://docs.agou-ops.cn/docs/CloudNative/k8s/Installation/k8s%20Debian12%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85">我的文档-k8s Debian12 二进制安装&lt;/a> 或者我的&lt;a href="https://agou-ops.cn/myBlog-2/post/k8s-debian12%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85/">备用博客地址&lt;/a> .&lt;/p>
&lt;h2 id="一预先准备">一、预先准备&lt;/h2>
&lt;h3 id="11-服务器角色">1.1 服务器角色&lt;/h3>
&lt;p>环境信息：&lt;/p>
&lt;ul>
&lt;li>k8s版本：v1.25.12&lt;/li>
&lt;li>Debian12(bookworm)：内核6.1.0-9-amd64&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>角色&lt;/th>
&lt;th>IP&lt;/th>
&lt;th>组件列表&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>master&lt;/td>
&lt;td>172.19.82.157&lt;/td>
&lt;td>kube-apiserver、kube-controller-manage、kube-scheduler、kubelet、kube-proxy、etcd、containerd&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>node01&lt;/td>
&lt;td>172.19.82.158&lt;/td>
&lt;td>kubelet、kube-proxy、containerd、etcd&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>node02&lt;/td>
&lt;td>172.19.82.159&lt;/td>
&lt;td>kubelet、kube-proxy、containerd、etcd&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>在k8s上使用Prometheus监控MongoDB</title><link>https://agou-ops.cn/post/%E5%9C%A8k8s%E4%B8%8A%E4%BD%BF%E7%94%A8prometheus%E7%9B%91%E6%8E%A7mongodb/</link><pubDate>Thu, 08 Oct 2020 14:04:30 +0800</pubDate><author>suofeiyaxx@gmail.com (AGou-ops)</author><guid>https://agou-ops.cn/post/%E5%9C%A8k8s%E4%B8%8A%E4%BD%BF%E7%94%A8prometheus%E7%9B%91%E6%8E%A7mongodb/</guid><description>&lt;h2 id="预先准备">预先准备&lt;/h2>
&lt;ul>
&lt;li>minikube For Windows(资源充足, 有集群更好不过);&lt;/li>
&lt;li>Helm;&lt;/li>
&lt;li>科学上网能力.&lt;/li>
&lt;/ul></description></item></channel></rss>